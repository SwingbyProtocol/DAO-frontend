"use strict";(self.webpackChunkbarnbridge_frontend=self.webpackChunkbarnbridge_frontend||[]).push([[585],{74585:function(e,t,n){n.r(t),n.d(t,{default:function(){return os}});var o=n(29439),r=n(47313),a=n(63830),i=n(1413),s=n(45987),l=n(97013),c=n(46123),d=n.n(c),u={tabs:"s_tabs__jcfpg",simple:"s_simple__9d2UH"},p=n(46417),h=["className"],m=["className","simple"],x=function(e){var t=e.className,n=e.simple,o=void 0!==n&&n,r=(0,s.Z)(e,m);return(0,p.jsx)(l.default,(0,i.Z)({className:d()(u.tabs,t,o&&u.simple),tabBarGutter:32},r))};x.Tab=function(e){var t=e.className,n=(0,s.Z)(e,h);return(0,p.jsx)(l.default.TabPane,(0,i.Z)({className:d()(u.tab,t)},n))};var f=x,v=n(45958),g=n(37313),j=n(36565),w=n(42797),b=n(58704),y=n.n(b),Z=n(31172),k=n(18666),N=n(57722),A=n(83185),C=n(89851),_=["status"],S=["status"],T=["status"],P=["status"],E=function(e){return e.CREATED="CREATED",e.WARMUP="WARMUP",e.ACTIVE="ACTIVE",e.CANCELED="CANCELED",e.FAILED="FAILED",e.ACCEPTED="ACCEPTED",e.QUEUED="QUEUED",e.GRACE="GRACE",e.EXPIRED="EXPIRED",e.EXECUTED="EXECUTED",e.ABROGATED="ABROGATED",e}({}),V=function(e){return e[e.WARMUP=0]="WARMUP",e[e.ACTIVE=1]="ACTIVE",e[e.CANCELED=2]="CANCELED",e[e.FAILED=3]="FAILED",e[e.ACCEPTED=4]="ACCEPTED",e[e.QUEUED=5]="QUEUED",e[e.GRACE=6]="GRACE",e[e.EXPIRED=7]="EXPIRED",e[e.EXECUTED=8]="EXECUTED",e[e.ABROGATED=9]="ABROGATED",e}({}),D=new Map([[E.CREATED,"Created"],[E.WARMUP,"Warm-Up"],[E.ACTIVE,"Voting"],[E.CANCELED,"Canceled"],[E.FAILED,"Failed"],[E.ACCEPTED,"Accepted"],[E.QUEUED,"Queued for execution"],[E.GRACE,"Pending execution"],[E.EXPIRED,"Expired"],[E.EXECUTED,"Executed"],[E.ABROGATED,"Abrogated"]]),F=(0,r.createContext)((0,A.L)("DaoAPIProvider"));function I(){return(0,r.useContext)(F)}var R=function(e){var t=(0,N.z)();var n={fetchOverviewData:function(){var e=new URL("/api/governance/overview",t.api.baseUrl);return fetch(e.toString()).then((function(e){return e.json()})).then((function(e){return(0,i.Z)((0,i.Z)({},e.data),{},{totalDelegatedPower:(0,k.EO)(y().from(e.data.totalDelegatedPower),18),totalVbond:(0,k.EO)(y().from(e.data.totalVbond),18)})}))},fetchVoters:function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=new URL("/api/governance/voters?page=".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,"&limit=").concat(e),t.api.baseUrl);return fetch(n.toString()).then((function(e){return e.json()})).then((function(e){var t;return(0,i.Z)((0,i.Z)({},e),{},{data:(null!==(t=e.data)&&void 0!==t?t:[]).map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{bondStaked:(0,k.EO)(y().from(e.bondStaked),18),delegatedPower:(0,k.EO)(y().from(e.delegatedPower),18),votingPower:(0,k.EO)(y().from(e.votingPower),18)})}))})}))},fetchProposals:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,o=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,a=Z.stringify({page:String(e),limit:String(n),state:o,title:r},{skipNull:!0,skipEmptyString:!0,encode:!0}),l=new URL("/api/governance/proposals?".concat(a),t.api.baseUrl);return fetch(l.toString()).then((function(e){return e.json()})).then((function(e){var t=e.status,n=(0,s.Z)(e,_);return 200!==t?Promise.reject(t):n})).then((function(e){var t;return(0,i.Z)((0,i.Z)({},e),{},{data:(null!==(t=e.data)&&void 0!==t?t:[]).map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{forVotes:(0,k.EO)(y().from(e.forVotes),18),againstVotes:(0,k.EO)(y().from(e.againstVotes),18)})}))})}))},fetchProposal:function(e){var n=new URL("/api/governance/proposals/".concat(e),t.api.baseUrl);return fetch(n.toString()).then((function(e){return e.json()})).then((function(e){var t=e.data,n=e.status;return 200!==n?Promise.reject(n):t})).then((function(e){return(0,i.Z)((0,i.Z)({},e),{},{forVotes:(0,k.EO)(y().from(e.forVotes),18),againstVotes:(0,k.EO)(y().from(e.againstVotes),18)})}))},fetchProposalVoters:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3?arguments[3]:void 0,a=Z.stringify({page:String(n),limit:String(o),support:r},{skipNull:!0,skipEmptyString:!0,encode:!0}),l=new URL("/api/governance/proposals/".concat(e,"/votes?").concat(a),t.api.baseUrl);return fetch(l.toString()).then((function(e){return e.json()})).then((function(e){var t=e.status,n=(0,s.Z)(e,S);return 200!==t?Promise.reject(t):n})).then((function(e){var t;return(0,i.Z)((0,i.Z)({},e),{},{data:(null!==(t=e.data)&&void 0!==t?t:[]).map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{power:(0,k.EO)(y().from(e.power),18)})}))})}))},fetchAbrogation:function(e){var n=new URL("/api/governance/abrogation-proposals/".concat(e),t.api.baseUrl);return fetch(n.toString()).then((function(e){return e.json()})).then((function(e){var t=e.data,n=e.status;return 200!==n?Promise.reject(n):t})).then((function(e){return(0,i.Z)((0,i.Z)({},e),{},{forVotes:(0,k.EO)(y().from(e.forVotes),18),againstVotes:(0,k.EO)(y().from(e.againstVotes),18)})}))},fetchAbrogationVoters:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3?arguments[3]:void 0,a=Z.stringify({page:String(n),limit:String(o),support:r},{skipNull:!0,skipEmptyString:!0,encode:!0}),l=new URL("/api/governance/abrogation-proposals/".concat(e,"/votes?").concat(a),t.api.baseUrl);return fetch(l.toString()).then((function(e){return e.json()})).then((function(e){var t=e.status,n=(0,s.Z)(e,T);return 200!==t?Promise.reject(t):n})).then((function(e){var t;return(0,i.Z)((0,i.Z)({},e),{},{data:(null!==(t=e.data)&&void 0!==t?t:[]).map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{power:(0,k.EO)(y().from(e.power),18)})}))})}))},fetchTreasuryTokens:function(){var e,n=new URL("/api/governance/treasury/tokens?address=".concat(null===(e=t.contracts.dao)||void 0===e?void 0:e.governance),t.api.baseUrl);return fetch(n.toString()).then((function(e){return e.json()})).then((function(e){var t=e.status,n=e.data;return 200!==t?Promise.reject(t):n}))},fetchTreasuryHistory:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,l=Z.stringify({address:null===(e=t.contracts.dao)||void 0===e?void 0:e.governance,page:String(n),limit:String(o),tokenAddress:r,transactionDirection:a},{skipNull:!0,skipEmptyString:!0,encode:!0}),c=new URL("/api/governance/treasury/transactions?".concat(l),t.api.baseUrl);return fetch(c.toString()).then((function(e){return e.json()})).then((function(e){var t=e.status,n=(0,s.Z)(e,P);return 200!==t?Promise.reject(t):n})).then((function(e){var t;return(0,i.Z)((0,i.Z)({},e),{},{data:(null!==(t=e.data)&&void 0!==t?t:[]).map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{amount:Number(e.amount)})}))})}))}};return(0,p.jsx)(F.Provider,{value:n,children:e.children})};var U=n(43785),B=n(67779),O=n(86577),L=n(54655),M=n(74165),q=n(15861),G=n(15671),W=n(43144),Y=n(60136),z=n(29388),Q=n(52350),H=[(0,Q.I7)("bondStaked",[],["uint256"]),(0,Q.I7)("balanceOf",["address"],["uint256"]),(0,Q.I7)("votingPower",["address"],["uint256"]),(0,Q.I7)("userLockedUntil",["address"],["uint256"]),(0,Q.I7)("delegatedPower",["address"],["uint256"]),(0,Q.I7)("userDelegatedTo",["address"],["address"]),(0,Q.I7)("bondStakedAtTs",["uint256"],["uint256"]),(0,Q.I7)("votingPowerAtTs",["address","uint256"],["uint256"]),(0,Q.I7)("multiplierAtTs",["address","uint256"],["uint256"]),(0,Q.I7)("checkTimeLock",["address","uint8"],["uint256","uint256","bytes32"]),(0,Q.I7)("deposit",["uint256"],[]),(0,Q.I7)("withdraw",["uint256"],[]),(0,Q.I7)("addOrAdjusttimelock",["uint256","uint256","uint8","bytes32"],[]),(0,Q.I7)("delegate",["address"],[]),(0,Q.I7)("stopDelegate",[],[]),(0,Q.I7)("lock",["uint256"],[])],K=function(e){(0,Y.Z)(n,e);var t=(0,z.Z)(n);function n(e){var o;return(0,G.Z)(this,n),(o=t.call(this,H,e,"DAO Barn")).bondStaked=void 0,o.balance=void 0,o.votingPower=void 0,o.userLockedUntil=void 0,o.delegatedPower=void 0,o.userDelegatedTo=void 0,o.on(Q.ZP.UPDATE_ACCOUNT,(function(){o.balance=void 0,o.votingPower=void 0,o.userLockedUntil=void 0,o.delegatedPower=void 0,o.userDelegatedTo=void 0})),o}return(0,W.Z)(n,[{key:"isUserLocked",get:function(){var e;return(null!==(e=this.userLockedUntil)&&void 0!==e?e:0)>Date.now()/1e3}},{key:"loadCommonData",value:function(){var e=(0,q.Z)((0,M.Z)().mark((function e(){var t,n,r;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.batch([{method:"bondStaked"}]);case 2:t=e.sent,n=(0,o.Z)(t,1),r=n[0],this.bondStaked=new(y())(r).unscaleBy(18),this.emit(Q.ZP.UPDATE_DATA);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadUserData",value:function(){var e=(0,q.Z)((0,M.Z)().mark((function e(){var t,n,r,a,i,s,l,c;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.account,this.assertAccount(),e.next=4,this.batch([{method:"balanceOf",methodArgs:[t]},{method:"votingPower",methodArgs:[t]},{method:"userLockedUntil",methodArgs:[t]},{method:"delegatedPower",methodArgs:[t]},{method:"userDelegatedTo",methodArgs:[t]}]);case 4:n=e.sent,r=(0,o.Z)(n,5),a=r[0],i=r[1],s=r[2],l=r[3],c=r[4],this.balance=new(y())(a).unscaleBy(18),this.votingPower=new(y())(i).unscaleBy(18),this.userLockedUntil=Number(s),this.delegatedPower=new(y())(l).unscaleBy(18),this.userDelegatedTo=c,this.emit(Q.ZP.UPDATE_DATA);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBondStakedAtTs",value:function(e){return this.call("bondStakedAtTs",[e]).then((function(e){return new(y())(e).unscaleBy(18)}))}},{key:"getVotingPower",value:function(e){return this.call("votingPower",[e]).then((function(e){return new(y())(e).unscaleBy(18)}))}},{key:"getVotingPowerAtTs",value:function(e,t){return this.call("votingPowerAtTs",[e,t]).then((function(e){return new(y())(e).unscaleBy(18)}))}},{key:"getMultiplierAtTs",value:function(e,t){return this.call("votingPowerAtTs",[e,t]).then((function(e){return new(y())(e).unscaleBy(18)}))}},{key:"checkTimeLock",value:function(e,t){return this.call("checkTimeLock",[e,t]).then((function(e){return{amount:new(y())(e[0]).unscaleBy(18).toNumber(),expiry:Number(e[1]),data:String(e[2])}}))}},{key:"deposit",value:function(e,t){return this.send("deposit",[e],{},t)}},{key:"withdraw",value:function(e,t){return this.send("withdraw",[e],{},t)}},{key:"delegate",value:function(e,t){return this.send("delegate",[e],{},t)}},{key:"stopDelegate",value:function(e){return this.send("stopDelegate",[],{},e)}},{key:"lock",value:function(e,t){return this.send("lock",[e],{},t)}},{key:"addOrAdjusttimelock",value:function(e,t,n,o,r){return this.send("addOrAdjusttimelock",[e,t,n,o],{},r)}}]),n}(Q.ZP),X=K,J=[(0,Q.I7)("isActive",[],["bool"]),(0,Q.I7)("state",["uint256"],["uint8"]),(0,Q.I7)("latestProposalIds",["address"],["uint256"]),(0,Q.I7)("getReceipt",["uint256","address"],[new Q.ve(["bool","uint256","bool"])]),(0,Q.I7)("abrogationProposals",["uint256"],["address","uint256","string","uint256","uint256"]),(0,Q.I7)("getAbrogationProposalReceipt",["uint256","address"],[new Q.ve(["bool","uint256","bool"])]),(0,Q.I7)("minQuorum",[],["uint256"]),(0,Q.I7)("acceptanceThreshold",[],["uint256"]),(0,Q.I7)("activate",[],[]),(0,Q.I7)("propose",["address[]","uint256[]","string[]","bytes[]","string","string"],["uint256"]),(0,Q.I7)("cancelProposal",["uint256"],[]),(0,Q.I7)("queue",["uint256"],[]),(0,Q.I7)("execute",["uint256"],[]),(0,Q.I7)("castVote",["uint256","bool"],[]),(0,Q.I7)("cancelVote",["uint256"],[]),(0,Q.I7)("startAbrogationProposal",["uint256","string"],[]),(0,Q.I7)("abrogationProposal_castVote",["uint256","bool"],[]),(0,Q.I7)("abrogationProposal_cancelVote",["uint256"],[])],$=function(e){(0,Y.Z)(n,e);var t=(0,z.Z)(n);function n(e){var o;return(0,G.Z)(this,n),(o=t.call(this,J,e,"DAO Governance")).isActive=void 0,o.acceptanceThreshold=void 0,o.minQuorum=void 0,o.on(Q.ZP.UPDATE_ACCOUNT,(function(){})),o}return(0,W.Z)(n,[{key:"loadCommonData",value:function(){var e=(0,q.Z)((0,M.Z)().mark((function e(){var t,n,r,a,i;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.batch([{method:"isActive"},{method:"minQuorum"},{method:"acceptanceThreshold"}]);case 2:t=e.sent,n=(0,o.Z)(t,3),r=n[0],a=n[1],i=n[2],this.isActive=Boolean(r),this.minQuorum=Number(a),this.acceptanceThreshold=Number(i),this.emit(Q.ZP.UPDATE_DATA);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadUserData",value:function(){var e=(0,q.Z)((0,M.Z)().mark((function e(){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.assertAccount(),this.emit(Q.ZP.UPDATE_DATA);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getState",value:function(e){return this.call("state",[e]).then((function(e){return Number(e)}))}},{key:"getLatestProposalIds",value:function(e){return this.call("latestProposalIds",[e]).then((function(e){return Number(e)}))}},{key:"getReceipt",value:function(e,t){return this.call("getReceipt",[e,t]).then((function(e){return{hasVoted:Boolean(e[0]),votes:Number(e[1]),support:Boolean(e[2])}}))}},{key:"getAbrogationProposals",value:function(e){return this.call("abrogationProposals",[e]).then((function(e){return{creator:e[0],createTime:Number(e[1]),description:e[2],forVotes:Number(e[3]),againstVotes:Number(e[4])}}))}},{key:"getAbrogationProposalReceipt",value:function(e,t){return this.call("getAbrogationProposalReceipt",[e,t]).then((function(e){return{hasVoted:Boolean(e[0]),votes:Number(e[1]),support:Boolean(e[2])}}))}},{key:"activate",value:function(e){return this.send("activate",[],{},e)}},{key:"propose",value:function(e,t,n,o,r,a,i){return this.send("propose",[n,o,r,a,t,e],{},i)}},{key:"cancelProposal",value:function(e,t){return this.send("cancelProposal",[e],{},t)}},{key:"queue",value:function(e,t){return this.send("queue",[e],{},t)}},{key:"execute",value:function(e,t){return this.send("execute",[e],{},t)}},{key:"castVote",value:function(e,t,n){return this.send("castVote",[e,t],{},n)}},{key:"cancelVote",value:function(e,t){return this.send("cancelVote",[e],{},t)}},{key:"startAbrogationProposal",value:function(e,t,n){return this.send("startAbrogationProposal",[e,t],{},n)}},{key:"abrogationProposalCastVote",value:function(e,t,n){return this.send("abrogationProposal_castVote",[e,t],{},n)}},{key:"abrogationProposalCancelVote",value:function(e,t){return this.send("abrogationProposal_cancelVote",[e],{},t)}}]),n}(Q.ZP),ee=$,te=[(0,Q.I7)("pullFeature",[],["address","uint256","uint256","uint256"]),(0,Q.I7)("apr",[],["uint256"]),(0,Q.I7)("claim",[],["uint256"]),(0,Q.I7)("userMultiplier",["address"],["uint256"])],ne=function(e){(0,Y.Z)(n,e);var t=(0,z.Z)(n);function n(e){var o;return(0,G.Z)(this,n),(o=t.call(this,te,e,"DAO Reward")).pullFeature=void 0,o.apr=void 0,o.toClaim=void 0,o.multiP=void 0,o.on(Q.ZP.UPDATE_ACCOUNT,(function(){o.toClaim=void 0})),o}return(0,W.Z)(n,[{key:"bondRewards",get:function(){if(this.pullFeature){var e=this.pullFeature;e.startTs,e.endTs,e.totalDuration,Date.now();return y().ZERO}}},{key:"loadCommonData",value:function(){var e=(0,q.Z)((0,M.Z)().mark((function e(){var t,n,r;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.batch([{method:"apr"}]);case 2:t=e.sent,n=(0,o.Z)(t,1),r=n[0],this.apr=Number(r),this.emit(Q.ZP.UPDATE_DATA);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadUserData",value:function(){var e=(0,q.Z)((0,M.Z)().mark((function e(){var t,n,r,a,i,s,l;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.account,this.assertAccount(),e.next=4,this.batch([{method:"claim",callArgs:{from:r}},{method:"userMultiplier",methodArgs:[r],callArgs:{from:r}}]);case 4:a=e.sent,i=(0,o.Z)(a,2),s=i[0],l=i[1],this.toClaim=null===(t=y().from(s))||void 0===t?void 0:t.unscaleBy(18),this.multiP=y().from(l),!0===(null===(n=this.multiP)||void 0===n?void 0:n.isZero())&&(this.toClaim=new(y())(0)),this.emit(Q.ZP.UPDATE_DATA);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"claim",value:function(){var e=(0,q.Z)((0,M.Z)().mark((function e(t){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("claim",[],{},t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Q.ZP),oe=ne,re=[(0,Q.I7)("apr",[],["uint256"]),(0,Q.I7)("claim",[],["uint256"])],ae=function(e){(0,Y.Z)(n,e);var t=(0,z.Z)(n);function n(e){var o;return(0,G.Z)(this,n),(o=t.call(this,re,e,"DAO Reward")).apr=void 0,o.toClaim=void 0,o.on(Q.ZP.UPDATE_ACCOUNT,(function(){o.toClaim=void 0})),o}return(0,W.Z)(n,[{key:"loadCommonData",value:function(){var e=(0,q.Z)((0,M.Z)().mark((function e(){var t,n,r;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.batch([{method:"apr"}]);case 2:t=e.sent,n=(0,o.Z)(t,1),r=n[0],this.apr=Number(r),this.emit(Q.ZP.UPDATE_DATA);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadUserData",value:function(){var e=(0,q.Z)((0,M.Z)().mark((function e(){var t,n,r,a,i;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.account,this.assertAccount(),e.next=4,this.batch([{method:"claim",callArgs:{from:n}}]);case 4:r=e.sent,a=(0,o.Z)(r,1),i=a[0],this.toClaim=null===(t=y().from(i))||void 0===t?void 0:t.unscaleBy(18),this.emit(Q.ZP.UPDATE_DATA);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"claim",value:function(){var e=(0,q.Z)((0,M.Z)().mark((function e(t){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("claim",[],{},t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Q.ZP),ie=ae,se=[(0,Q.I7)("pullFeature",[],["address","uint256","uint256","uint256"]),(0,Q.I7)("apr",[],["uint256"]),(0,Q.I7)("claim",[],["uint256"])],le=function(e){(0,Y.Z)(n,e);var t=(0,z.Z)(n);function n(e){var o;return(0,G.Z)(this,n),(o=t.call(this,se,e,"Node Reward")).apr=void 0,o.toClaim=void 0,o.on(Q.ZP.UPDATE_ACCOUNT,(function(){o.toClaim=void 0})),o}return(0,W.Z)(n,[{key:"loadCommonData",value:function(){var e=(0,q.Z)((0,M.Z)().mark((function e(){var t,n,r;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.batch([{method:"apr"}]);case 2:t=e.sent,n=(0,o.Z)(t,1),r=n[0],this.apr=Number(r),this.emit(Q.ZP.UPDATE_DATA);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadUserData",value:function(){var e=(0,q.Z)((0,M.Z)().mark((function e(){var t,n,r,a,i;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.account,this.assertAccount(),e.next=4,this.batch([{method:"claim",callArgs:{from:n}}]);case 4:r=e.sent,a=(0,o.Z)(r,1),i=a[0],this.toClaim=null===(t=y().from(i))||void 0===t?void 0:t.unscaleBy(18),this.emit(Q.ZP.UPDATE_DATA);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"claim",value:function(){var e=(0,q.Z)((0,M.Z)().mark((function e(t){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("claim",[],{},t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Q.ZP),ce=le,de=[(0,Q.I7)("pullFeature",[],["address","uint256","uint256","uint256"]),(0,Q.I7)("claim",[],["uint256"]),(0,Q.I7)("userMultiplier",["address"],["uint256"])],ue=function(e){(0,Y.Z)(n,e);var t=(0,z.Z)(n);function n(e){var o;return(0,G.Z)(this,n),(o=t.call(this,de,e,"sbBTC Pool")).pullFeature=void 0,o.apr=void 0,o.toClaim=void 0,o.multiP=void 0,o.on(Q.ZP.UPDATE_ACCOUNT,(function(){o.toClaim=void 0})),o}return(0,W.Z)(n,[{key:"bondRewards",get:function(){if(this.pullFeature){var e=this.pullFeature;e.startTs,e.endTs,e.totalDuration,Date.now();return y().ZERO}}},{key:"loadUserData",value:function(){var e=(0,q.Z)((0,M.Z)().mark((function e(){var t,n,r,a,i,s;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.account,this.assertAccount(),e.next=4,this.batch([{method:"claim",callArgs:{from:n}},{method:"userMultiplier",methodArgs:[n],callArgs:{from:n}}]);case 4:r=e.sent,a=(0,o.Z)(r,2),i=a[0],s=a[1],this.multiP=y().from(s),this.toClaim=null===(t=y().from(i))||void 0===t?void 0:t.unscaleBy(8),this.emit(Q.ZP.UPDATE_DATA);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"claim",value:function(){var e=(0,q.Z)((0,M.Z)().mark((function e(t){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.send("claim",[],{},t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Q.ZP),pe=ue,he={minThreshold:1,isActive:void 0,bondStaked:void 0,activationRate:void 0,thresholdRate:void 0},me=r.createContext((0,A.L)("DAOProvider"));function xe(){return r.useContext(me)}var fe=function(e){var t,n,a,s,l,c,d=e.children,u=(0,N.z)(),h=(0,U.Os)(),m=(0,B.cq)(null===(t=u.contracts.dao)||void 0===t?void 0:t.barn,(function(){var e;return new X(null===(e=u.contracts.dao)||void 0===e?void 0:e.barn)})),x=(0,B.cq)(null===(n=u.contracts.dao)||void 0===n?void 0:n.governance,(function(){var e;return new ee(null===(e=u.contracts.dao)||void 0===e?void 0:e.governance)})),f=(0,B.cq)(null===(a=u.contracts.dao)||void 0===a?void 0:a.reward_legacy,(function(){var e;return new oe(null===(e=u.contracts.dao)||void 0===e?void 0:e.reward_legacy)})),v=(0,B.cq)(null===(s=u.contracts.dao)||void 0===s?void 0:s.reward,(function(){var e;return new ie(null===(e=u.contracts.dao)||void 0===e?void 0:e.reward)})),g=(0,B.cq)(null===(l=u.contracts.dao)||void 0===l?void 0:l.nodeRewards,(function(){var e;return new ce(null===(e=u.contracts.dao)||void 0===e?void 0:e.nodeRewards)})),j=(0,B.cq)(null===(c=u.contracts.dao)||void 0===c?void 0:c.sbBTCPool,(function(){var e;return new pe(null===(e=u.contracts.dao)||void 0===e?void 0:e.sbBTCPool)})),w=(0,O.cE)().projectToken,b=(0,L.Z)(he),Z=(0,o.Z)(b,2),k=Z[0],A=Z[1];return r.useEffect((function(){x.loadCommonData(),f.loadCommonData(),v.loadCommonData(),m.loadCommonData(),g.loadCommonData()}),[]),r.useEffect((function(){var e,t=w.contract;(t.setAccount(h.account),h.account)&&(x.loadUserData(),f.loadUserData(),v.loadUserData(),m.loadUserData(),g.loadUserData(),j.loadUserData(),t.loadAllowance(null===(e=u.contracts.dao)||void 0===e?void 0:e.barn).catch(Error))}),[h.account]),r.useEffect((function(){var e,t,n,o=x.isActive,r=m.bondStaked,a=m.votingPower,i=null===(e=u.dao)||void 0===e?void 0:e.activationThreshold;r&&i&&i>0&&(t=r.multipliedBy(100).div(i).toNumber(),t=Math.min(t,100)),a&&null!==r&&void 0!==r&&r.gt(y().ZERO)&&(n=a.multipliedBy(100).div(r).toNumber(),n=Math.min(n,100)),A({isActive:o,bondStaked:r,activationRate:t,thresholdRate:n})}),[x.isActive,m.bondStaked,m.votingPower]),(0,p.jsx)(me.Provider,{value:(0,i.Z)((0,i.Z)({},k),{},{daoBarn:m,daoRewardLegacy:f,daoReward:v,daoGovernance:x,nodeReward:g,sbBTCPool:j,actions:{activate:function(){return x.activate().then((function(){}))},hasThreshold:function(){if(void 0!==k.thresholdRate)return k.thresholdRate>=k.minThreshold},hasActiveProposal:function(){return h.account?x.getLatestProposalIds(h.account).then((function(e){return e?x.getState(e).then((function(e){return![V.CANCELED,V.EXECUTED,V.FAILED,V.EXPIRED,V.ABROGATED].includes(e)})):Promise.resolve(!1)})):Promise.resolve(!1)}}}),children:d})},ve=n(72652),ge=n(15405),je=n(85230),we="s_divider__ZB39I",be=["className"],ye=function(e){var t=e.className,n=(0,s.Z)(e,be);return(0,p.jsx)(je.Z,(0,i.Z)({className:d()(we,t)},n))},Ze=n(26464),ke="s_skeleton__b36ax",Ne=["className","width","height","loading","children"],Ae=function(e){var t=e.className,n=e.width,o=e.height,r=e.loading,a=e.children,l=(0,s.Z)(e,Ne);return(0,p.jsx)(Ze.Z,(0,i.Z)((0,i.Z)({className:d()(ke,t),title:{width:n,style:{height:o}},active:!0,loading:!1!==r,paragraph:{rows:0}},l),{},{children:a}))},Ce=n(48946),_e=n(56252),Se=n(51071),Te=n(93513),Pe=n(41730);function Ee(e){var t,n=(0,r.useRef)(e);n.current=e;var a=(0,r.useState)(!1),i=(0,o.Z)(a,2),s=i[0],l=i[1],c=(0,r.useState)(!1),d=(0,o.Z)(c,2),u=d[0],p=d[1],h=(0,r.useCallback)((function(){if(n.current.end)return Math.max(n.current.end.valueOf()-Date.now(),0)}),[]),m=(0,Se.Z)((function(){var e,t,o,r,a=h();(null===(e=(t=n.current).onTick)||void 0===e||e.call(t,null!==a&&void 0!==a?a:0),0===a)&&(l(!1),v(),null===(o=(r=n.current).onEnd)||void 0===o||o.call(r))}),null!==(t=e.delay)&&void 0!==t?t:1e3,!1),x=(0,o.Z)(m,2),f=x[0],v=x[1];return(0,r.useEffect)((function(){var t,o,r;(!e.end||Date.now()<e.end)&&(l(!0),f(),null===(t=(o=n.current).onStart)||void 0===t||t.call(o,null!==(r=h())&&void 0!==r?r:0));return function(){l(!1),v()}}),[e.end]),(0,r.useMemo)((function(){return{isStarted:s,isRunning:u,start:function(){var e,t,o;l(!0),p(!0),f(),null===(e=(t=n.current).onStart)||void 0===e||e.call(t,null!==(o=h())&&void 0!==o?o:0)},stop:function(){var e,t,o;p(!1),l(!1),v(),null===(e=(t=n.current).onStop)||void 0===e||e.call(t,null!==(o=h())&&void 0!==o?o:0)},pause:function(){p(!1),v()},resume:function(){p(!0),f()}}}),[u,v,f])}var Ve=function(e){var t,n=(0,Te.k)().windowState,a=(0,Pe.O)(),s=(0,o.Z)(a,1)[0],l=(0,r.useRef)(),c=Ee((0,i.Z)((0,i.Z)({},e),{},{onStart:function(t){var n;l.current=t,s(),null===(n=e.onStart)||void 0===n||n.call(e,t)},onStop:function(t){var n;l.current=t,s(),null===(n=e.onStop)||void 0===n||n.call(e,t)},onTick:function(t){var n;l.current=t,s(),null===(n=e.onTick)||void 0===n||n.call(e,t)}})),d=c.isStarted,u=c.isRunning,h=c.pause,m=c.resume;return(0,r.useEffect)((function(){d&&(!u&&n.isVisible&&m(),u&&!n.isVisible&&h())}),[n.isVisible,d,u]),(0,p.jsx)(p.Fragment,{children:e.children(null!==(t=l.current)&&void 0!==t?t:0)})},De=n(2832),Fe=n(5479),Ie=n(95823),Re="s_component__YaEjx",Ue="s_separator__7LeJI",Be="s_list__ewY1Y",Oe="s_row__SnlRz",Le="s_term__Y1geb",Me="s_termIcon__t4yOI",qe="s_data__qQKAR",Ge="s_dataIcon__6XqmX",We={leftBonus:void 0,leftTotalVotingPower:void 0},Ye=function(e){var t=xe().daoBarn,n=t.votingPower,a=t.userDelegatedTo,s=t.delegatedPower,l=t.userLockedUntil,c=t.balance,d=(0,L.Z)(We),u=(0,o.Z)(d,2),h=u[0],m=u[1],x=(0,Ie.At)(a),f=r.useMemo((function(){return(null!==l&&void 0!==l?l:Date.now())-Date.now()}),[l]);return Ee({end:x?0:null!==l&&void 0!==l?l:0,delay:1e3,onTick:function(e){var t,o,r,a=null===n||void 0===n?void 0:n.minus(null!==s&&void 0!==s?s:y().ZERO);x||(a=null===(r=a)||void 0===r?void 0:r.minus(null!==c&&void 0!==c?c:y().ZERO));var i=null===(t=a)||void 0===t?void 0:t.multipliedBy(e).div(f),l=null===n||void 0===n?void 0:n.minus(null!==(o=a)&&void 0!==o?o:y().ZERO).plus(null!==i&&void 0!==i?i:y().ZERO);m({leftBonus:i,leftTotalVotingPower:l})}}),r.useEffect((function(){m({leftBonus:x?y().ZERO:null===n||void 0===n?void 0:n.minus(null!==c&&void 0!==c?c:y().ZERO).minus(null!==s&&void 0!==s?s:y().ZERO),leftTotalVotingPower:n})}),[x]),(0,p.jsx)(Fe.Z,(0,i.Z)((0,i.Z)({className:Re,title:"Voting power detailed view"},e),{},{children:(0,p.jsxs)("dl",{className:Be,children:[(0,p.jsxs)("div",{className:Oe,children:[(0,p.jsxs)("dt",{className:Le,children:[(0,p.jsx)(j.Z,{name:"wallet-outlined",width:20,height:20,className:Me}),"My staked balance"]}),(0,p.jsxs)("dd",{className:qe,children:[(0,k.nx)(c),(0,p.jsx)(j.Z,{name:"circle-plus-outlined",width:18,height:18,color:"green",className:Ge})]})]}),(0,p.jsxs)("div",{className:Oe,children:[(0,p.jsxs)("dt",{className:Le,children:[(0,p.jsx)(j.Z,{name:"wallet-outlined",width:20,height:20,className:Me}),"Delegated by me"]}),(0,p.jsxs)("dd",{className:qe,children:[x?(0,k.nx)(c):0,(0,p.jsx)(j.Z,{name:"circle-minus-outlined",width:18,height:18,color:"red",className:Ge})]})]}),(0,p.jsxs)("div",{className:Oe,children:[(0,p.jsxs)("dt",{className:Le,children:[(0,p.jsx)(j.Z,{name:"rate-outlined",width:20,height:20,className:Me}),"Locked bonus"]}),(0,p.jsxs)("dd",{className:qe,children:[(0,k.nx)(h.leftBonus),(0,p.jsx)(j.Z,{name:"circle-plus-outlined",width:18,height:18,color:"green",className:Ge})]})]}),(0,p.jsxs)("div",{className:Oe,children:[(0,p.jsxs)("dt",{className:Le,children:[(0,p.jsx)(j.Z,{name:"handshake-outlined",width:20,height:20,className:Me}),"Delegated to me"]}),(0,p.jsxs)("dd",{className:qe,children:[(0,k.nx)(s),(0,p.jsx)(j.Z,{name:"circle-plus-outlined",width:18,height:18,color:"green",className:Ge})]})]}),(0,p.jsx)("div",{className:Ue}),(0,p.jsxs)("div",{className:Oe,children:[(0,p.jsxs)("dt",{className:Le,children:[(0,p.jsx)(j.Z,{name:"stamp-outlined",width:20,height:20,className:Me}),"Vote power"]}),(0,p.jsx)(_e.x,{type:"h3",weight:"bold",tag:"dd",className:qe,children:(0,k.nx)(h.leftTotalVotingPower)})]})]})}))},ze="s_component__OveIs",Qe="s_items__+TcGV",He="s_ratio__84eJu",Ke={claiming_legacy:!1,claiming:!1,claimingNode:!1,claimingSbBTC:!1,showDetailedView:!1},Xe=function(){var e,t,n,a,i,s=xe(),l=(0,U.Os)(),c=(0,De.rU)().getAmountInUSD,u=(0,O.cE)().projectToken,h=(0,L.Z)(Ke),m=(0,o.Z)(h,2),x=m[0],f=m[1],j=s.daoRewardLegacy.toClaim,w=s.daoReward.toClaim,b=s.nodeReward.toClaim,y=s.sbBTCPool.toClaim,Z=(null===(e=u.contract.balance)||void 0===e||e.unscaleBy(u.decimals),s.daoBarn),N=Z.votingPower,A=Z.userLockedUntil,C=Z.balance,_=(0,r.useState)(1),S=(0,o.Z)(_,2),T=S[0],P=S[1];(0,r.useEffect)((function(){l.account&&s.daoBarn.getMultiplierAtTs(l.account,(0,Ie.sP)()).then((function(e){return P(e.toNumber())}))}),[l.account]);var E=(null!==A&&void 0!==A?A:Date.now())-Date.now();return(0,p.jsxs)("div",{className:d()(ze,"pv-24 ph-64 sm-ph-32"),children:[(0,p.jsx)(_e.x,{type:"lb2",weight:"semibold",color:"blue",className:"mb-16",children:"My Account"}),(0,p.jsxs)(g.Z,{flow:"col",gap:16,className:Qe,children:[(0,p.jsxs)(g.Z,{flow:"row",gap:4,children:[(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"Staked"}),(0,p.jsx)(g.Z,{flow:"col",gap:16,align:"center",children:(0,p.jsx)(Ae,{loading:void 0===C,children:(0,p.jsx)(_e.x,{type:"h3",weight:"bold",color:"primary",children:(0,k.nx)(C)})})})]}),(0,p.jsx)(ye,{type:"vertical"}),(0,p.jsxs)(g.Z,{flow:"row",gap:4,children:[(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"Reward (legacy)"}),(0,p.jsxs)(g.Z,{flow:"col",gap:4,align:"center",children:[(0,p.jsx)(Ce.Z,{title:(0,k.nx)(null!==j&&void 0!==j?j:0,{compact:!0,decimals:u.decimals})+" ("+(null!==(t=(0,k.ZP)(c(j,u.symbol)))&&void 0!==t?t:"")+")",children:(0,p.jsx)(_e.x,{type:"h3",weight:"bold",color:"primary",children:(0,k.nx)(null!==j&&void 0!==j?j:0,{hasLess:!0})})}),(0,p.jsx)(ge.Z,{type:"light",disabled:(null===j||void 0===j?void 0:j.isZero())||void 0===j,onClick:function(){f({claiming_legacy:!0}),s.daoRewardLegacy.claim().catch(Error).then((function(){u.contract.loadBalance().catch(Error),f({claiming_legacy:!1})}))},children:x.claiming_legacy?(0,p.jsx)(ve.Z,{spinning:!0}):"Claim"})]})]}),(0,p.jsxs)(g.Z,{flow:"row",gap:4,children:[(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"Reward"}),(0,p.jsxs)(g.Z,{flow:"col",gap:4,align:"center",children:[(0,p.jsx)(Ce.Z,{title:(0,k.nx)(null!==w&&void 0!==w?w:0,{compact:!0,decimals:u.decimals})+" ("+(null!==(n=(0,k.ZP)(c(w,u.symbol)))&&void 0!==n?n:"")+")",children:(0,p.jsx)(_e.x,{type:"h3",weight:"bold",color:"primary",children:(0,k.nx)(null!==w&&void 0!==w?w:0,{hasLess:!0})})}),(0,p.jsx)(ge.Z,{type:"light",disabled:(null===w||void 0===w?void 0:w.isZero())||void 0===w,onClick:function(){f({claiming:!0}),s.daoReward.claim().catch(Error).then((function(){u.contract.loadBalance().catch(Error),f({claiming:!1})}))},children:x.claiming?(0,p.jsx)(ve.Z,{spinning:!0}):"Claim"})]})]}),(0,p.jsxs)(g.Z,{flow:"row",gap:4,children:[(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"Node bonus"}),(0,p.jsxs)(g.Z,{flow:"col",gap:4,align:"center",children:[(0,p.jsx)(Ce.Z,{title:(0,k.nx)(null!==b&&void 0!==b?b:0,{compact:!0,decimals:u.decimals})+" ("+(null!==(a=(0,k.ZP)(c(b,u.symbol)))&&void 0!==a?a:"")+")",children:(0,p.jsxs)(_e.x,{type:"h3",weight:"bold",color:"primary",children:[b?"+":"",(0,k.nx)(null!==b&&void 0!==b?b:0,{hasLess:!0})]})}),(0,p.jsx)(ge.Z,{type:"light",disabled:(null===w||void 0===w?void 0:w.isZero())||void 0===b,onClick:function(){f({claimingNode:!0}),s.nodeReward.claim().catch(Error).then((function(){u.contract.loadBalance().catch(Error),f({claimingNode:!1})}))},children:x.claimingNode?(0,p.jsx)(ve.Z,{spinning:!0}):"Claim"})]})]}),(0,p.jsx)(ye,{type:"vertical"}),(0,p.jsxs)(g.Z,{flow:"row",gap:4,children:[(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"sbBTC Reward"}),(0,p.jsxs)(g.Z,{flow:"col",gap:4,align:"center",children:[(0,p.jsx)(Ce.Z,{title:(null===y||void 0===y?void 0:y.toNumber())+" ("+(null!==(i=(0,k.ZP)(c(y,"WBTC")))&&void 0!==i?i:"")+")",children:(0,p.jsx)(_e.x,{type:"h3",weight:"bold",color:"primary",children:y?y.toNumber():0})}),(0,p.jsx)(ge.Z,{type:"light",disabled:(null===y||void 0===y?void 0:y.isZero())||void 0===y,onClick:function(){f({claimingSbBTC:!0}),s.sbBTCPool.claim().catch(Error).then((function(){u.contract.loadBalance().catch(Error),f({claimingSbBTC:!1})}))},children:x.claimingSbBTC?(0,p.jsx)(ve.Z,{spinning:!0}):"Claim"})]})]}),(0,p.jsx)(ye,{type:"vertical"}),(0,p.jsxs)(g.Z,{flow:"row",gap:4,children:[(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"Total voting power"}),(0,p.jsxs)(g.Z,{flow:"col",gap:4,align:"center",children:[(0,p.jsx)(Ae,{loading:void 0===N,children:(0,p.jsx)(_e.x,{type:"h3",weight:"bold",color:"primary",children:(0,k.nx)(N)})}),(0,p.jsx)(ge.Z,{type:"light",onClick:function(){return f({showDetailedView:!0})},children:"Detailed view"}),x.showDetailedView&&(0,p.jsx)(Ye,{onCancel:function(){return f({showDetailedView:!1})}})]})]}),(0,p.jsx)(Ve,{end:null!==A&&void 0!==A?A:0,delay:1e3,onEnd:function(){},children:function(e){var t=e/E*(T-1)+1;return t>1?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(ye,{type:"vertical"}),(0,p.jsxs)(g.Z,{flow:"row",gap:4,children:[(0,p.jsx)(_e.k,{text:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(_e.x,{type:"p2",children:"The multiplier mechanic allows users to lock $SWINGBY for a period up to 1 year and get a bonus of up to 2x SWINGBY. The bonus is linear, as per the following example:"}),(0,p.jsxs)("ul",{children:[(0,p.jsx)("li",{children:(0,p.jsx)(_e.x,{type:"p2",children:"lock 1000 $SWINGBY for 1 year \u2192 get back 2000 vSWINGBY"})}),(0,p.jsx)("li",{children:(0,p.jsx)(_e.x,{type:"p2",children:"lock 1000 $SWINGBY for 6 months \u2192 get back 1500 vSWINGBY"})})]}),(0,p.jsx)(v.dL,{href:"https://docs.barnbridge.com/governance/barnbridge-dao/multiplier-and-voting-power",variation:"link",children:"Learn more"})]}),children:(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"Multiplier & Lock timer"})}),(0,p.jsxs)(g.Z,{flow:"col",gap:8,align:"center",children:[(0,p.jsx)(Ce.Z,{title:"x".concat(t),children:(0,p.jsxs)(_e.x,{type:"lb1",weight:"bold",color:"blue",className:He,children:[(0,Ie.Z2)(T,1,1.01)?">":""," ",(0,k.Ib)(t,2,"-",2),"x"]})}),(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"for"}),(0,p.jsx)(_e.x,{type:"h3",weight:"bold",color:"primary",children:(0,Ie.Ud)(0,A)})]})]})]}):void 0}})]})]})},Je=n(12740),$e="s_component__SbAbN",et="s_acceptance__L-at5",tt="s_fulfilled__vwpZr",nt=["className","acceptance"],ot=function(e){var t=e.className,n=e.acceptance,o=(0,s.Z)(e,nt),r=void 0!==n,a=Number(n)<=Number(e.percent);return(0,p.jsx)(Je.Z,(0,i.Z)({className:d()($e,r&&et,a&&tt,t),showInfo:!1,success:r?{percent:n,strokeColor:a?String(e.strokeColor):e.trailColor}:void 0},o))},rt=function(e){var t,n,a=(0,O.cE)().projectToken,i=(0,N.z)(),s=xe(),l=r.useState(!1),c=(0,o.Z)(l,2),u=c[0],h=c[1];return(0,p.jsx)("div",{className:d()("card p-24",e.className),children:(0,p.jsxs)(g.Z,{flow:"row",gap:24,align:"start",children:[(0,p.jsx)(_e.k,{text:(0,p.jsxs)(_e.x,{type:"p2",children:["For the DAO to be activated, a threshold of ",(0,k.nx)(null===(t=i.dao)||void 0===t?void 0:t.activationThreshold)," $",a.symbol," tokens staked has to be met."]}),children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Activation threshold"})}),(0,p.jsxs)(g.Z,{gap:12,colsTemplate:"auto 24px",width:"100%",children:[(0,p.jsx)(ot,{percent:s.activationRate,trailColor:"var(--theme-border-color)",strokeWidth:24,strokeColor:{"0%":"var(--theme-blue-color)","100%":"var(--theme-green-color)"}}),(0,p.jsx)(j.Z,{name:"ribbon-outlined"})]}),(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsx)(w.T,{name:a.icon}),(0,p.jsx)(_e.x,{type:"p1",weight:"bold",color:"primary",children:(0,k.nx)(s.bondStaked)}),(0,p.jsxs)(_e.x,{type:"p1",weight:"semibold",color:"secondary",children:["/ ",(0,k.nx)(null===(n=i.dao)||void 0===n?void 0:n.activationThreshold)," already staked."]})]}),100===s.activationRate&&!s.isActive&&(0,p.jsx)(ge.Z,{type:"primary",loading:u,onClick:function(){h(!0),s.actions.activate().catch(Error).then((function(){h(!1)}))},children:"Activate"})]})})},at=n(50399),it="s_component__SuMJ0",st=["className","pagination"],lt=function(e){var t=e.className,n=e.pagination,o=(0,s.Z)(e,st);return(0,p.jsx)(at.Z,(0,i.Z)({className:d()(it,t),bordered:!1,showSorterTooltip:!1,pagination:!!n&&(0,i.Z)({showSizeChanger:!1},n)},o))},ct=n(13888),dt=[{title:"Address",dataIndex:"address",render:function(e){return(0,p.jsxs)("div",{className:"flex col-gap-16 align-center",children:[(0,p.jsx)(ct.Z,{address:e,width:32,height:32}),(0,p.jsxs)(v.S,{address:e,variation:"link",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",ellipsis:!0,className:"hidden-mobile hidden-tablet",children:e}),(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",wrap:!1,className:"hidden-desktop",children:(0,k.eI)(e)})]})]})}},{title:"Staked Balance",dataIndex:"bondStaked",width:200,align:"right",render:function(e){return(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",className:"ml-auto",children:(0,k.Ib)(e,2,"-",2)})}},{title:"Voting Power",dataIndex:"votingPower",width:200,align:"right",render:function(e){return(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",className:"ml-auto",children:(0,k.Ib)(e,2,"-",2)})}},{title:"Votes",dataIndex:"votes",width:150,align:"right",render:function(e){return(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",className:"ml-auto",children:e})}},{title:"Proposals",dataIndex:"proposals",width:150,align:"right",render:function(e){return(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",className:"ml-auto",children:e})}}],ut=function(e){var t=e.className,n=I(),a=r.useState(!1),i=(0,o.Z)(a,2),s=i[0],l=i[1],c=r.useState([]),u=(0,o.Z)(c,2),h=u[0],m=u[1],x=r.useState(0),f=(0,o.Z)(x,2),v=f[0],g=f[1],j=r.useState(1),w=(0,o.Z)(j,2),b=w[0],y=w[1];return r.useEffect((function(){l(!0),n.fetchVoters(b,10).then((function(e){m(e.data),g(e.meta.count),l(!1)})).catch((function(){l(!1)}))}),[b,10]),(0,p.jsxs)("div",{className:d()("card",t),children:[(0,p.jsx)("div",{className:"card-header",children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Stakers"})}),(0,p.jsx)(lt,{columns:dt,dataSource:h,rowKey:"address",loading:s,bordered:!1,pagination:{total:v,pageSize:10,showTitle:!1,responsive:!0,current:b,position:["topLeft","bottomLeft"],showTotal:function(e,t){var n=(0,o.Z)(t,2),r=n[0],a=n[1];return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(_e.x,{type:"small",weight:"semibold",color:"secondary",className:"",children:["Rank ",r,"..",a," of ",e]})})},onChange:y},scroll:{x:!0}})]})},pt="s_cards__8npRE",ht=function(e){var t,n,a=e.className,i=I(),s=xe(),l=(0,De.rU)().getAmountInUSD,c=(0,O.cE)().projectToken,u=r.useState(),h=(0,o.Z)(u,2),m=h[0],x=h[1],f=s.daoReward.apr&&s.nodeReward.apr?s.daoReward.apr+s.nodeReward.apr:0;return r.useEffect((function(){i.fetchOverviewData().then(x)}),[]),(0,p.jsxs)("div",{className:d()(pt,a),children:[(0,p.jsx)("div",{className:"card p-24",children:(0,p.jsxs)(g.Z,{flow:"row",gap:48,children:[(0,p.jsx)(_e.k,{text:(0,p.jsx)(_e.x,{type:"p2",children:"This number shows the amount of $SWINGBY (and their USD value) currently staked in the DAO."}),children:(0,p.jsx)(_e.x,{type:"lb2",weight:"semibold",color:"blue",children:"Total Staked"})}),(0,p.jsxs)(g.Z,{flow:"row",gap:4,children:[(0,p.jsxs)(g.Z,{flow:"col",gap:4,align:"end",children:[(0,p.jsx)(_e.x,{type:"h2",weight:"bold",color:"primary",children:(0,k.nx)(s.daoBarn.bondStaked)}),(0,p.jsx)(v.dL,{variation:"text-alt",href:"https://coinmarketcap.com/currencies/swingby/",children:(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["$"+c.symbol+" ",(0,p.jsx)(w.T,{size:"18px",name:c.icon})]})})]}),(0,p.jsx)(_e.x,{type:"p1",color:"secondary",children:(0,k.ZP)(l(s.bondStaked,c.symbol))})]})]})}),(0,p.jsx)("div",{className:"card p-24",children:(0,p.jsxs)(g.Z,{flow:"row",gap:48,children:[(0,p.jsx)(_e.x,{type:"lb2",weight:"semibold",color:"blue",children:"Staking APR (Node bonus)"}),(0,p.jsxs)(g.Z,{flow:"row",gap:4,children:[(0,p.jsx)(Ve,{end:1e3*(null!==(t=null===(n=s.daoRewardLegacy.pullFeature)||void 0===n?void 0:n.endTs)&&void 0!==t?t:0),delay:5e3,children:function(){return(0,p.jsxs)(_e.x,{type:"h2",weight:"bold",color:"primary",children:[(0,k.nx)(s.daoReward.apr),"% ( +",(0,k.nx)(s.nodeReward.apr),"% )"]})}}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["Total APR for Node = ",(0,k.nx)(f),"%"]})]})]})}),(0,p.jsx)("div",{className:"card p-24",children:(0,p.jsxs)(g.Z,{flow:"row",gap:48,children:[(0,p.jsx)(_e.k,{text:(0,p.jsxs)(g.Z,{flow:"row",gap:8,align:"start",children:[(0,p.jsx)(_e.x,{type:"p2",children:"This number shows the amount of vSWINGBY currently minted. This number may differ from the amount of $SWINGBY staked because of the multiplier mechanic"}),(0,p.jsx)(v.dL,{href:"https://integrations.barnbridge.com/specs/dao-specifications#multiplier-and-voting-power",className:"link-blue",style:{fontWeight:600},children:"Learn more"})]}),children:(0,p.jsx)(_e.x,{type:"lb2",weight:"semibold",color:"blue",children:"vSWINGBY"})}),(0,p.jsx)(g.Z,{flow:"row",gap:4,children:(0,p.jsx)(_e.x,{type:"h2",weight:"bold",color:"primary",children:(0,k.nx)(null===m||void 0===m?void 0:m.totalVbond)})})]})}),(0,p.jsx)("div",{className:"card p-24",children:(0,p.jsxs)(g.Z,{flow:"row",gap:48,children:[(0,p.jsx)(_e.k,{text:(0,p.jsxs)(g.Z,{flow:"row",gap:8,align:"start",children:[(0,p.jsx)(_e.x,{type:"p2",children:"This counter shows the average amount of time $SWINGBY stakers locked their deposits in order to take advantage of the voting power bonus."}),(0,p.jsx)(v.dL,{href:"https://integrations.barnbridge.com/specs/dao-specifications#users-can-lock-bond-for-vbond",className:"link-blue",style:{fontWeight:600},children:"Learn more"})]}),children:(0,p.jsx)(_e.x,{type:"lb2",weight:"semibold",color:"blue",children:"Avg. Lock Time"})}),(0,p.jsxs)(g.Z,{flow:"row",gap:4,children:[(0,p.jsx)(_e.x,{type:"h2",weight:"bold",color:"primary",children:null!==m&&void 0!==m&&m.avgLockTimeSeconds?(0,Ie.Ud)(null===m||void 0===m?void 0:m.avgLockTimeSeconds):"-"}),(0,p.jsx)(_e.x,{type:"p1",color:"secondary",children:"average time"})]})]})}),(0,p.jsx)("div",{className:"card p-24",children:(0,p.jsxs)(g.Z,{flow:"row",gap:48,children:[(0,p.jsx)(_e.k,{text:(0,p.jsxs)(g.Z,{flow:"row",gap:8,align:"start",children:[(0,p.jsx)(_e.x,{type:"p2",children:"This number shows the amount of vSWINGBY that is delegated to other addresses."}),(0,p.jsx)(v.dL,{href:"https://integrations.barnbridge.com/specs/dao-specifications#users-can-delegate-vbond-to-other-users",className:"link-blue",style:{fontWeight:600},children:"Learn more"})]}),children:(0,p.jsx)(_e.x,{type:"lb2",weight:"semibold",color:"blue",children:"Delegated"})}),(0,p.jsxs)(g.Z,{flow:"row",gap:4,children:[(0,p.jsx)(_e.x,{type:"h2",weight:"bold",color:"primary",children:(0,k.nx)(null===m||void 0===m?void 0:m.totalDelegatedPower)}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["out of"," ",(0,k.nx)(null===m||void 0===m?void 0:m.totalVbond)]})]})]})}),(0,p.jsx)("div",{className:"card p-24",children:(0,p.jsxs)(g.Z,{flow:"row",gap:48,children:[(0,p.jsx)(_e.x,{type:"lb2",weight:"semibold",color:"blue",children:"Info"}),(0,p.jsxs)(g.Z,{flow:"row",gap:4,children:[(0,p.jsxs)(g.Z,{flow:"col",gap:4,align:"end",children:[(0,p.jsx)(_e.x,{type:"h2",weight:"bold",color:"primary",children:null===m||void 0===m?void 0:m.barnUsers}),(0,p.jsx)(_e.x,{type:"p1",color:"secondary",children:"stakers"}),(0,p.jsx)(_e.x,{type:"h2",weight:"bold",color:"primary",children:null===m||void 0===m?void 0:m.voters}),(0,p.jsx)(_e.x,{type:"p1",color:"secondary",children:"voters"})]}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["Quorum = ",s.daoGovernance.minQuorum,"%"]}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["Acceptance = ",s.daoGovernance.acceptanceThreshold,"%"]})]})]})})]})},mt=function(){var e=xe();return(0,p.jsxs)(p.Fragment,{children:[!1===e.isActive&&(0,p.jsx)(rt,{className:"full-width mb-32"}),(0,p.jsx)(ht,{className:"mb-32"}),(0,p.jsx)(ut,{})]})},xt=n(4942),ft=n(28303),vt="s_tabs__x6VAF",gt="s_shadows__2eYWY",jt="s_tab__WOvdW",wt="s_active__bShMa",bt="s_elasticTabs__vihYR",yt="s_small__DlpVC",Zt=["className","children"],kt=["id","className","onClick"],Nt=function(e){var t=e.className,n=e.tabs,o=e.shadows,r=void 0!==o&&o;return(0,p.jsx)("div",{className:d()(vt,t,(0,xt.Z)({},gt,r)),style:{"--tabs-bg":"var(".concat("string"===typeof r?r:"--theme-body-color",")")},children:n.map((function(e,t){var n=e.className,o=e.children,r=(0,s.Z)(e,Zt);return r.to?(0,p.jsx)(ft.OL,(0,i.Z)((0,i.Z)({className:d()(jt,n),activeClassName:wt},r),{},{children:o}),t):(0,p.jsx)("a",(0,i.Z)((0,i.Z)({className:d()(jt,n),rel:"noopener noreferrer",target:"_blank"},r),{},{children:o}),t)}))})},At=function(e){var t,n=e.variation,o=void 0===n?"normal":n,r=e.tabs,a=e.activeKey,l=e.size,c=e.className,u=e.style;return(0,p.jsx)("div",{className:d()(c,(t={},(0,xt.Z)(t,vt,"normal"===o),(0,xt.Z)(t,bt,"elastic"===o),t)),style:u,children:r.map((function(t){var n,o=t.id,r=t.className,c=t.onClick,u=(0,s.Z)(t,kt);return(0,p.jsx)("button",(0,i.Z)({className:d()(jt,r,(n={},(0,xt.Z)(n,wt,o===a),(0,xt.Z)(n,yt,"small"===l),n)),type:"button",onClick:function(){var t;null===(t=e.onClick)||void 0===t||t.call(e,o),null===c||void 0===c||c(o)}},u),o)}))})},Ct=function(e){return e.day="24h",e.week="1w",e.month="30d",e}({}),_t=(Ct.day,Ct.week,Ct.month,function(e){return e.week="1w",e.month="30d",e}({})),St=(_t.week,_t.month,n(64797)),Tt=n(75163),Pt=n(62984),Et="s_form__7Wnsw",Vt="s_item__aYJob",Dt=["children"],Ft=["className","label","hint","extra","children"],It=["className","children"],Rt=function(e){var t=e.className,n=e.children,o=(0,s.Z)(e,It);return(0,p.jsx)(Tt.Z,(0,i.Z)((0,i.Z)({className:d()(Et,t),layout:"vertical",requiredMark:!1},o),{},{children:n}))};Rt.Item=function(e){var t=e.className,n=e.label,o=e.hint,r=e.extra,a=e.children,l=(0,s.Z)(e,Ft);return(0,p.jsx)(Tt.Z.Item,(0,i.Z)((0,i.Z)({className:d()(Vt,t)},l),{},{label:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(g.Z,{flow:"col",gap:4,align:"center",children:[n,o&&(0,p.jsx)(Ce.Z,{title:o,children:(0,p.jsx)("span",{children:(0,p.jsx)(Pt.J,{name:"info",size:15})})})]}),r]}),children:a}))},Rt.List=function(e){var t=e.children,n=(0,s.Z)(e,Dt);return(0,p.jsx)(Tt.Z.List,(0,i.Z)((0,i.Z)({},n),{},{children:t}))};var Ut=Rt,Bt=n(36411),Ot=n(28216),Lt="s_component__CFTj5",Mt=["label","hint","className"],qt=function(e){var t=e.label,n=e.hint,o=e.className,r=(0,s.Z)(e,Mt);return(0,p.jsx)(Bt.default,(0,i.Z)((0,i.Z)({className:d()(Lt,o)},r),{},{children:(0,p.jsxs)(g.Z,{flow:"row",gap:4,children:[t,n]})}))},Gt=n(69119),Wt="s_list__73w-S",Yt=["className","value","onChange"],zt=function(e){var t=e.className,n=e.value,a=(e.onChange,(0,s.Z)(e,Yt)),l=(0,Gt.L)().activeNetwork,c=(0,L.Z)({options:[],loading:!1,selected:void 0}),d=(0,o.Z)(c,2),u=d[0],h=d[1];return r.useEffect((function(){h({loading:!0});var e="".concat(l.explorer.apiUrl,"/api?module=gastracker&action=gasoracle&apikey=").concat(l.explorer.key);fetch(e).then((function(e){return e.json()})).then((function(e){return e.result})).then((function(e){return{veryFast:Number(e.FastGasPrice),fast:Number(e.ProposeGasPrice),average:Math.round((Number(e.ProposeGasPrice)+Number(e.SafeGasPrice))/2),safeLow:Number(e.SafeGasPrice)}})).then((function(e){var t=[{key:"fastest",name:"Very fast",value:e.veryFast},{key:"fast",name:"Fast",value:e.fast},{key:"average",name:"Standard",value:e.average},{key:"safeLow",name:"Slow",value:e.safeLow}];h({loading:!1,options:t})})).catch((function(){h({loading:!1})}))}),[]),r.useEffect((function(){var t;void 0===n&&u.options.length>2&&(null===(t=e.onChange)||void 0===t||t.call(e,u.options[2]))}),[n,u.options]),r.useEffect((function(){h({selected:n})}),[n]),(0,p.jsx)(Bt.default.Group,(0,i.Z)((0,i.Z)({className:t,style:{width:"100%"}},a),{},{value:u.selected,onChange:function(t){var n;null===(n=e.onChange)||void 0===n||n.call(e,t.target.value)},children:u.loading?(0,p.jsx)(Ot.default,{}):(0,p.jsx)("div",{className:Wt,children:u.options.map((function(e){return(0,p.jsx)(qt,{label:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:e.name}),hint:(0,p.jsxs)(g.Z,{flow:"col",gap:4,children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:e.value}),(0,p.jsx)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:"Gwei"})]}),value:e},e.key)}))})}))};var Qt="s_divider__CtKqT",Ht=["header","submitText","children","onConfirm"],Kt=function(e){var t=e.header,n=e.submitText,a=e.children,l=e.onConfirm,c=(0,s.Z)(e,Ht),d=(0,Gt.L)().activeNetwork,u=St.Z.useForm(),h=(0,o.Z)(u,1)[0],m=r.useState(!1),x=(0,o.Z)(m,2),f=x[0],v=x[1],j=function(){var e=(0,r.useRef)(!1);return(0,r.useEffect)((function(){return function(){e.current=!0}}),[]),e}();function w(){return(w=(0,q.Z)((0,M.Z)().mark((function t(n){var o,r;return(0,M.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.gasPrice,v(!0),t.prev=2,t.next=5,l((0,i.Z)((0,i.Z)({},n),{},{gasPrice:null===o||void 0===o?void 0:o.value}));case 5:null===(r=e.onCancel)||void 0===r||r.call(e),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(2);case 10:j.current||v(!1);case 11:case"end":return t.stop()}}),t,null,[[2,8]])})))).apply(this,arguments)}return(0,p.jsx)(Fe.Z,(0,i.Z)((0,i.Z)({width:560},c),{},{children:(0,p.jsxs)(Ut,{form:h,validateTrigger:["onSubmit"],onFinish:function(e){return w.apply(this,arguments)},children:[t&&(0,p.jsxs)(p.Fragment,{children:[t,(0,p.jsx)(ye,{className:Qt})]}),(0,p.jsxs)(g.Z,{flow:"row",gap:32,children:[null===a||void 0===a?void 0:a({form:h,submitting:f}),d.config.features.gasFees&&(0,p.jsx)(Ut.Item,{name:"gasPrice",label:"Gas Fee (Gwei)",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(zt,{disabled:f})}),(0,p.jsx)(ge.Z,{htmlType:"submit",type:"primary",loading:f,children:n})]})]})}))},Xt=n(20375),Jt="s_component__FZyui",$t=["className","type"],en=function(e){var t=e.className,n=e.type,o=void 0===n?"info":n,a=(0,s.Z)(e,$t),l=r.useMemo((function(){if("info"===o)return(0,p.jsx)(Pt.J,{name:"info"})}),[o]);return(0,p.jsx)(Xt.default,(0,i.Z)({className:d()(Jt,t),type:o,showIcon:!0,icon:l},a))},tn=n(43270),nn=n(59495),on="s_form__uGi47",rn="s_disabled__jtSdj",an=function(e){var t=e.condition,n=e.wrapper,o=e.children;return t?n(o):o},sn=(0,r.createContext)((0,A.L)("Form"));function ln(e){return{values:e,errors:{}}}function cn(e,t){return dn.apply(this,arguments)}function dn(){return dn=(0,q.Z)((0,M.Z)().mark((function e(t,n){var o,r;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,nn.validate)(null===n||void 0===n?void 0:n.scheme,t);case 2:return o=e.sent,r=o.getErrors(),e.abrupt("return",{values:t,errors:Object.keys(r).reduce((function(e,t){var n=Object.keys(r[t])[0];return n&&(e[t]={type:n,message:r[t][n]}),e}),{})});case 5:case"end":return e.stop()}}),e)}))),dn.apply(this,arguments)}function un(e){var t=e.validationScheme,n=e.defaultValues,o=e.onSubmit,r=t?cn:ln,a=(0,tn.cI)({mode:"all",resolver:r,context:{scheme:t},defaultValues:n,shouldUnregister:!0}),i=a.handleSubmit(o);return Object.assign(a,{updateValue:function(e,t){a.setValue(e,t,{shouldDirty:!0,shouldValidate:!0})},submit:i})}function pn(e){var t=e.children,n=e.className,o=e.form,a=e.disabled,i=void 0!==a&&a,s=(0,r.useCallback)((function(e){e.preventDefault(),o.submit()}),[o.submit]),l={form:o};return(0,p.jsx)(sn.Provider,{value:l,children:(0,p.jsx)("form",{className:d()(on,n,i&&rn),onSubmit:s,children:t})})}function hn(e){var t=e.children,n=e.className,o=e.label,r=e.hint,a=e.extra;return(0,p.jsxs)("div",{className:d()("flex flow-row row-gap-8",n),children:[(0,p.jsxs)("div",{className:"flex flow-col col-gap-4 justify-space-between",children:[(0,p.jsx)("div",{className:"flex flow-col col-gap-4 align-center",children:(0,p.jsx)(_e.k,{text:r,children:"string"===typeof o?(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:o}):o})}),a]}),t]})}function mn(e){var t,n=e.children,o=e.name,a=(0,r.useContext)(sn).form.formState.errors[o];return a?(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"red",children:null!==(t=a.message)&&void 0!==t?t:n}):null}function xn(e){var t=e.children,n=e.name,o=e.label,a=e.labelProps,s=void 0===a?{}:a,l=e.showError,c=void 0===l||l,d=e.className,u=(0,r.useContext)(sn).form;return(0,p.jsxs)(an,{condition:!!o,wrapper:function(e){return(0,p.jsx)(hn,(0,i.Z)((0,i.Z)({label:o,className:d},s),{},{children:e}))},children:[(0,p.jsx)(tn.Qr,{name:n,control:u.control,render:t,shouldUnregister:!0}),c&&(0,p.jsx)(mn,{name:n})]})}var fn="s_spinner__emiMx",vn="s_container__-T05u",gn="s_children__F8u20",jn=["className","children","spinning"],wn=function(e){var t=e.className,n=e.children,o=e.spinning,r=(0,s.Z)(e,jn);return n?o?(0,p.jsxs)("div",{className:vn,children:[(0,p.jsx)("div",{className:gn,children:n}),(0,p.jsx)(Pt.J,(0,i.Z)({name:"loader",className:d()(fn,t)},r))]}):(0,p.jsx)(p.Fragment,{children:n}):(0,p.jsx)(Pt.J,(0,i.Z)({name:"loader",className:d()(fn,t)},r))},bn={statusTag:"s_statusTag__2mUIF",red:"s_red__K0gXV",green:"s_green__I4vJk",blue:"s_blue__-kBpr"},yn=function(e){var t=e.text,n=e.color,o=e.className,r=e.style;return(0,p.jsx)("div",{className:d()(bn.statusTag,o,bn[n]),style:r,children:(0,p.jsx)(_e.x,{type:"lb2",tag:"label",weight:"bold",children:t})})},Zn=n(34820),kn=n(30137),Nn="s_component__zwkKk",An="s_disabled__sLCGG",Cn=["className","disabled"],_n=function(e){var t=e.className,n=e.disabled,o=(0,s.Z)(e,Cn);return(0,p.jsx)(kn.Z,(0,i.Z)({className:d()(Nn,t,n&&An),disabled:n,autoComplete:"off"},o))},Sn="s_component__RFxkB",Tn=["className","value"],Pn=(0,r.forwardRef)((function(e){var t=e.className,n=e.value,o=(0,s.Z)(e,Tn),a=r.useMemo((function(){return(0,Zn.isAddress)(String(n))?(0,p.jsx)(ct.Z,{address:String(n),width:24,height:24}):(0,p.jsx)("div",{})}),[n]);return(0,p.jsx)(_n,(0,i.Z)({className:d()(Sn,t),size:"large",addonBefore:a,value:n},o))})),En="s_card__HEDMi",Vn="s_selected__IkNM-",Dn=["children","selected"],Fn=function(e){var t=e.children,n=e.selected,o=void 0!==n&&n,r=(0,s.Z)(e,Dn);return(0,p.jsx)("button",(0,i.Z)((0,i.Z)({type:"button",className:d()(En,(0,xt.Z)({},Vn,o))},r),{},{children:t}))},In="manual",Rn="delegated",Un=function(){var e,t,n=(0,O.cE)().projectToken,a=(0,U.Os)(),s=xe(),l=(0,r.useState)(!1),c=(0,o.Z)(l,2),d=c[0],u=c[1],h=(0,r.useState)(!1),m=(0,o.Z)(h,2),x=m[0],f=m[1],g=(0,r.useState)(!1),j=(0,o.Z)(g,2),b=j[0],Z=j[1],N=s.daoBarn,A=N.balance,C=void 0===A?y().ZERO:A,_=N.userLockedUntil,S=void 0===_?0:_,T=N.userDelegatedTo,P=(null===(e=n.contract.balance)||void 0===e||e.unscaleBy(n.decimals),S>Date.now()),E=(0,Ie.At)(T),V=un({validationScheme:{delegateAddress:{rules:{required:function(e,t,n){return n.votingType!==Rn||Boolean(e)},isAddress:function(e,t,n){return n.votingType!==Rn||(0,Ie.At)(e)},isSelf:function(e,t,n){var o;return n.votingType!==Rn||(null===(o=a.account)||void 0===o?void 0:o.toLowerCase())!==(null===e||void 0===e?void 0:e.toLowerCase())},isSame:function(e,t,n){return n.votingType!==Rn||(null===T||void 0===T?void 0:T.toLowerCase())!==(null===e||void 0===e?void 0:e.toLowerCase())}},messages:{required:"Required",isAddress:"Invalid address",isSelf:"Can't delegate to self",isSame:"Your voting power is already delegated to this address"}}},onSubmit:function(){Z(!0)}});function D(){return F.apply(this,arguments)}function F(){return(F=(0,q.Z)((0,M.Z)().mark((function e(){var t,n,o;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,s.daoBarn.loadUserData();case 4:t=s.daoBarn.userDelegatedTo,n=void 0===t?"":t,o=(0,Ie.At)(n),V.reset({votingType:o?Rn:In,delegateAddress:o?n:""}),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(1);case 11:u(!1);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}(0,r.useEffect)((function(){D().catch(Error)}),[]);var I=V.formState,R=(0,V.watch)(["votingType","delegateAddress"]),B=(0,o.Z)(R,2),L=B[0],G=B[1],W=I.isDirty&&!x&&C.gt(y().ZERO);function Y(e,t,n){return z.apply(this,arguments)}function z(){return(z=(0,q.Z)((0,M.Z)().mark((function e(t,n,o){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f(!0),e.prev=1,t!==In){e.next=7;break}return e.next=5,s.daoBarn.stopDelegate(o);case 5:e.next=10;break;case 7:if(t!==Rn){e.next=10;break}return e.next=10,s.daoBarn.delegate(n,o);case 10:return e.next=12,D();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.error(e.t0);case 17:f(!1);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})))).apply(this,arguments)}function Q(){return(Q=(0,q.Z)((0,M.Z)().mark((function e(t){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!1),e.next=3,Y(L,G,t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return d?(0,p.jsx)("div",{className:"flex justify-center p-24",style:{minHeight:"732px"},children:(0,p.jsx)(wn,{})}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(pn,{form:V,className:"flex flow-row row-gap-32 p-24",disabled:x,children:[(0,p.jsxs)("div",{className:"container-box flex flow-col col-gap-44",children:[(0,p.jsxs)("div",{className:"flex flow-row row-gap-4",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Current voting type"}),(0,p.jsx)("div",{className:"flex flow-col col-gap-8 align-center",children:(0,p.jsx)(_e.x,{type:"p1",weight:"bold",color:"primary",children:E?"Delegate voting":"Manual voting"})})]}),E&&(0,p.jsxs)("div",{className:"flex flow-row row-gap-4",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Delegated address"}),(0,p.jsx)("div",{className:"flex flow-col col-gap-8 align-center",children:(0,p.jsx)(v.S,{address:T,children:(0,p.jsx)(_e.x,{type:"p1",weight:"bold",color:"primary",children:(0,k.eI)(T)})})})]})]}),(0,p.jsx)(xn,{name:"votingType",label:"Voting type",children:function(e){var t=e.field;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Fn,{selected:t.value===In,onClick:function(){return V.updateValue("votingType",In)},children:(0,p.jsxs)("div",{className:"flex flow-col col-gap-40 align-center",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Manual voting"}),t.value===In&&(0,p.jsx)(yn,{text:"ACTIVE",color:"green"})]})}),(0,p.jsx)(Fn,{selected:t.value===Rn,onClick:function(){return V.updateValue("votingType",Rn)},children:(0,p.jsxs)("div",{className:"flex flow-col col-gap-40 align-center",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Delegate voting"}),t.value===Rn&&(0,p.jsx)(yn,{text:"ACTIVE",color:"green"})]})})]})}}),L===Rn&&(0,p.jsx)(xn,{name:"delegateAddress",label:"Address",children:function(e){var t=e.field;return(0,p.jsx)(Pn,(0,i.Z)({},t))}}),(0,p.jsx)(en,{message:"Delegating your voting power to this address means that they will be able to vote in your place. You can\u2019t delegate the voting bonus, only the staked balance."}),P&&(0,p.jsx)(en,{message:"Switching back to manual voting while a lock is active will put the amount back under lock. Delegation does not stop the lock timer."}),(0,p.jsx)("div",{className:"flex flow-col col-gap-12 align-center justify-end",children:(0,p.jsxs)("button",{type:"submit",className:"button-primary",disabled:!W,children:[x&&(0,p.jsx)(wn,{className:"mr-4"}),L===Rn?"Delegate":"Stop Delegate"]})})]}),b&&(0,p.jsx)(Kt,{title:L===Rn?"Delegate your voting power":"Stop delegating voting power",header:L===Rn?(0,p.jsxs)("div",{className:"container-box flex flow-col col-gap-40",children:[(0,p.jsxs)("div",{className:"flow flow-row row-gap-4",children:[(0,p.jsxs)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:["Delegate ",n.symbol," amount"]}),(0,p.jsxs)("div",{className:"flex flow-col col-gap-8 align-center",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"bold",color:"primary",children:null!==(t=(0,k.nx)(C))&&void 0!==t?t:"-"}),(0,p.jsx)(w.T,{name:n.icon})]})]}),(0,p.jsxs)("div",{className:"flow flow-row row-gap-4",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Delegate address"}),(0,p.jsxs)("div",{className:"flex flow-col col-gap-8 align-center",children:[(0,p.jsx)(ct.Z,{address:G}),(0,p.jsx)(_e.x,{type:"p1",weight:"bold",color:"primary",children:(0,k.eI)(G)})]})]})]}):null,submitText:L===Rn?"Delegate voting power":"Stop delegate",onCancel:function(){Z(!1)},onConfirm:function(e){return function(e){return Q.apply(this,arguments)}(e.gasPrice)}})]})},Bn=n(84141),On=(n(1168),n(40982),"s_input__QGxRy"),Ln=["className","value"],Mn=function(e){var t=e.className,n=e.value,o=(0,s.Z)(e,Ln),r=Number(o.max)||0,a=Math.floor(1e6*r)/1e6,l=Math.floor(1e6*Number(n))/1e6/a*100||0,c=0===a;return(0,p.jsx)("input",(0,i.Z)((0,i.Z)({},o),{},{type:"range",className:d()(On,t),style:{"--track-fill":"".concat(c?0:l,"%")},max:c?1:a,disabled:c,value:c?"0":n||"0"}))},qn="s_tokenAmount__7xxVj",Gn="s_error__NVPne",Wn="s_tokenAmountBefore__AKxpv",Yn="s_tokenAmountValues__3FM-1",zn="s_tokenAmountValue__FEmdm",Qn="s_tokenAmountHint__AHUK0",Hn="s_tokenAmountSlider__rBLSy",Kn=["onChange","before","secondary","className","classNameBefore","slider","value","errors","decimals","max"],Xn=(0,r.forwardRef)((function(e,t){var n,o=e.onChange,r=e.before,a=e.secondary,l=e.className,c=e.classNameBefore,u=e.slider,h=e.value,m=e.errors,x=void 0===m?[]:m,f=e.decimals,v=void 0===f?6:f,g=e.max,j=(0,s.Z)(e,Kn),w=null!==(n=y().from(g))&&void 0!==n?n:y().ZERO;return(0,p.jsxs)("div",{className:l,children:[(0,p.jsxs)("div",{className:d()(qn,(0,xt.Z)({},Gn,x.length)),children:[r&&(0,p.jsx)("div",{className:d()(Wn,c),children:r}),(0,p.jsxs)("div",{className:Yn,children:[(0,p.jsx)("input",(0,i.Z)({ref:t,className:zn,type:"text",inputMode:"decimal",pattern:"[0-9]+([\\.,][0-9]+)?",onWheel:function(e){e.currentTarget.blur()},onChange:function(e){o(e.target.value)},value:h||""},j)),(0,p.jsx)("div",{className:Qn,children:a})]}),!w.isZero()&&(0,p.jsx)("button",{type:"button",className:"button-ghost",style:{alignSelf:"center"},disabled:j.disabled||w.isZero(),onClick:function(){return o(w.toString())},children:"MAX"})]}),!!x.length&&x.map((function(e,t){return(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"red",style:{marginTop:"8px"},children:e},t)})),u&&!w.isZero()?(0,p.jsx)(Mn,{type:"range",className:Hn,min:"0",max:w.toString(),step:1/Math.pow(10,Math.min(v,6)),value:null!==h&&void 0!==h?h:0,disabled:j.disabled||w.isZero(),onChange:function(e){o(e.target.value)}}):null]})})),Jn=["deposit","lockDuration"],$n=function(e){var t=e.deposit,n=e.lockDuration,o=(0,s.Z)(e,Jn),r=(0,O.cE)().projectToken;return(0,p.jsx)(Fe.Z,(0,i.Z)((0,i.Z)({width:560},o),{},{children:(0,p.jsxs)(g.Z,{flow:"row",gap:32,children:[(0,p.jsxs)(g.Z,{flow:"row",gap:16,children:[(0,p.jsx)(j.Z,{name:"warning-outlined",width:40,height:40,color:"red"}),(0,p.jsxs)(g.Z,{flow:"row",gap:8,children:[(0,p.jsx)(_e.x,{type:"h3",weight:"semibold",color:"primary",children:"Are you sure you want to deposit?"}),(0,p.jsxs)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:["You are about to deposit ",(0,k.nx)(t)," $",r.symbol,".",(0,p.jsx)("br",{}),"You have an active lock for ",(0,Ie.Ud)(0,n),"."]}),(0,p.jsx)(_e.x,{type:"p2",weight:"bold",color:"primary",children:"All deposits you make until the lock timer ends will be locked for the same duration."})]})]}),(0,p.jsxs)(g.Z,{flow:"col",justify:"space-between",children:[(0,p.jsx)(ge.Z,{type:"default",onClick:o.onCancel,children:"Cancel"}),(0,p.jsx)(ge.Z,{type:"primary",onClick:o.onOk,children:"Deposit"})]})]})}))},eo=function(){var e,t,n,a,s=(0,N.z)(),l=(0,O.cE)().projectToken,c=xe(),d=(0,r.useState)(!1),u=(0,o.Z)(d,2),h=u[0],m=u[1],x=(0,r.useState)(!1),f=(0,o.Z)(x,2),v=f[0],g=f[1],b=(0,r.useState)(!1),Z=(0,o.Z)(b,2),A=Z[0],C=Z[1],_=(0,r.useState)(!1),S=(0,o.Z)(_,2),T=S[0],P=S[1],E=(0,r.useState)(!1),V=(0,o.Z)(E,2),D=V[0],F=V[1],I=c.daoBarn,R=I.balance,U=I.userLockedUntil,B=l.contract,L=null===(e=B.balance)||void 0===e?void 0:e.unscaleBy(l.decimals),G=B.getAllowanceOf(null===(t=s.contracts.dao)||void 0===t?void 0:t.barn),W=(null!==U&&void 0!==U?U:0)>Date.now(),Y=un({validationScheme:{amount:{rules:{required:!0,min:.01,max:null===L||void 0===L?void 0:L.toNumber()},messages:{required:"Value is required.",min:"min top up amount must be >= 0.01",max:"Balance insufficent"}}},onSubmit:function(){W?F(!0):P(!0)}});function z(){return Q.apply(this,arguments)}function Q(){return(Q=(0,q.Z)((0,M.Z)().mark((function e(){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,B.loadBalance();case 4:return e.next=6,c.daoBarn.loadUserData();case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:m(!1);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}(0,r.useEffect)((function(){z().catch(Error)}),[]);var H=Y.formState,K=(0,Y.watch)("amount"),X=y().from(K),J=(0,r.useMemo)((function(){var e;return null!==(e=null===G||void 0===G?void 0:G.gt(y().ZERO))&&void 0!==e&&e}),[G]),$=J&&H.isDirty&&H.isValid&&!A;function ee(){return(ee=(0,q.Z)((0,M.Z)().mark((function e(){var t,n;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null===(t=s.contracts.dao)||void 0===t?void 0:t.barn){e.next=3;break}return e.abrupt("return");case 3:return g(!0),e.prev=4,e.next=7,B.approve(n,!0);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error(e.t0);case 12:g(!1);case 13:case"end":return e.stop()}}),e,null,[[4,9]])})))).apply(this,arguments)}function te(e,t){return ne.apply(this,arguments)}function ne(){return ne=(0,q.Z)((0,M.Z)().mark((function e(t,n){var o,r;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C(!0),e.prev=1,o=t.scaleBy(l.decimals),r=new Bn.BigNumber(o.toFixed(0)),!o){e.next=9;break}return e.next=7,c.daoBarn.deposit(r,n);case 7:return e.next=9,z();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:C(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])}))),ne.apply(this,arguments)}function oe(){return(oe=(0,q.Z)((0,M.Z)().mark((function e(t){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(X){e.next=2;break}return e.abrupt("return");case 2:return P(!1),e.next=5,te(X,t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return h?(0,p.jsx)("div",{className:"flex justify-center p-24",style:{minHeight:"518px"},children:(0,p.jsx)(wn,{})}):(0,p.jsxs)(p.Fragment,{children:[s.features.faucets&&(0,p.jsx)(ft.rU,{to:"/faucets",className:"button-ghost ml-auto",children:"Faucets"}),(0,p.jsxs)(pn,{form:Y,className:"flex flow-row row-gap-32 p-24",disabled:A,children:[(0,p.jsxs)("div",{className:"container-box wrap flex flow-col col-gap-64",children:[(0,p.jsxs)("div",{className:"flex flow-row row-gap-8",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Staked Balance"}),(0,p.jsxs)("div",{className:"flex flow-col col-gap-8 align-center",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"bold",color:"primary",children:null!==(n=(0,k.nx)(R))&&void 0!==n?n:"-"}),(0,p.jsx)(w.T,{name:l.icon})]})]}),(0,p.jsxs)("div",{className:"flex flow-row row-gap-8",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Wallet balance"}),(0,p.jsxs)("div",{className:"flex flow-col col-gap-8 align-center",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"bold",color:"primary",children:null!==(a=(0,k.nx)(L))&&void 0!==a?a:"-"}),(0,p.jsx)(w.T,{name:l.icon})]})]})]}),(0,p.jsx)(xn,{name:"amount",label:"Amount (top up)",children:function(e){var t=e.field;return(0,p.jsx)(Xn,(0,i.Z)({before:(0,p.jsx)(w.T,{name:l.icon}),max:L,disabled:A,decimals:l.decimals,slider:!0},t))}}),(0,p.jsx)(en,{message:"Deposits made after you have an ongoing lock will be added to the locked balance and will be subjected to the same lock timer."}),(0,p.jsxs)("div",{className:"flex flow-col col-gap-12 align-center justify-end",children:[!J&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("button",{type:"button",className:"button-primary align-self-start",onClick:function(){return ee.apply(this,arguments)},children:[v&&(0,p.jsx)(wn,{className:"mr-4"}),"Enable ",l.symbol]}),(0,p.jsx)(j.Z,{name:"arrow-forward"})]}),(0,p.jsxs)("button",{type:"submit",className:"button-primary align-self-start",disabled:!$,children:[A&&(0,p.jsx)(wn,{className:"mr-4"}),"Deposit"]})]})]}),D&&(0,p.jsx)($n,{deposit:X,lockDuration:U,onCancel:function(){return F(!1)},onOk:function(){F(!1)}}),T&&(0,p.jsx)(Kt,{title:"Confirm deposit",header:(0,p.jsxs)("div",{className:"container-box flex flow-row row-gap-4",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Deposit amount"}),(0,p.jsxs)("div",{className:"flex flow-col col-gap-8 align-center",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"bold",color:"primary",children:(0,k.nx)(X,{decimals:l.decimals})}),(0,p.jsx)(w.T,{name:l.icon})]})]}),submitText:"Confirm your deposit",onCancel:function(){P(!1)},onConfirm:function(e){return function(e){return oe.apply(this,arguments)}(e.gasPrice)}})]})},to=n(99004),no=n(91469),oo=n(79254),ro=n(83618),ao=n(43406),io=n(19227),so=n(24447),lo="s_component__3L5jU",co="s_dropdown__ApNOe",uo=["className"],po=(0,io.default)(so.Z),ho=function(e){var t=e.className,n=(0,s.Z)(e,uo);return(0,p.jsx)(po,(0,i.Z)({className:d()(lo,t),dropdownClassName:co},n))},mo=["ref"],xo="1 mo",fo="3 mo",vo="6 mo",go=["1 w",xo,fo,vo,"1 y"];function jo(e,t){switch(t){case"1 w":return(0,to.Z)(e,7);case xo:return(0,oo.Z)(e,1);case fo:return(0,oo.Z)(e,3);case vo:return(0,oo.Z)(e,6);case"1 y":return(0,to.Z)(e,365);default:return}}function wo(e){return e?Math.floor(e.getTime()/1e4):0}function bo(e,t){var n=(t?t.getTime()-Date.now():0)/1e3/31536e3;return n>100?e?e.multipliedBy(2).toNumber():0:e?e.plus(e.multipliedBy(n)).toNumber():0}var yo=function(){var e,t,n,a=(0,O.cE)().projectToken,l=xe(),c=(0,r.useState)(!1),u=(0,o.Z)(c,2),h=u[0],m=u[1],x=(0,r.useState)(!1),f=(0,o.Z)(x,2),v=f[0],g=f[1],j=(0,r.useState)(!1),b=(0,o.Z)(j,2),y=b[0],Z=b[1],N=l.daoBarn,A=N.balance,C=N.userLockedUntil,_=1e3*(null!==C&&void 0!==C?C:0)>Date.now()&&C?new Date(1e3*C+6e4):(0,no.Z)(Date.now(),1),S=un({validationScheme:{lockEndDate:{rules:{required:!0,min:function(e){var t;return _.valueOf()<(null!==(t=null===e||void 0===e?void 0:e.valueOf())&&void 0!==t?t:0)},max:function(e){var t;return(0,ro.Z)(Date.now(),1).valueOf()>(null!==(t=null===e||void 0===e?void 0:e.valueOf())&&void 0!==t?t:0)}},messages:{required:"Required",min:"Should be more than 1 minute from current timelock date",max:"Should be less than 1 year"}}},onSubmit:function(){Z(!0)}});function T(){return P.apply(this,arguments)}function P(){return(P=(0,q.Z)((0,M.Z)().mark((function e(){var t,n;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,l.daoBarn.loadUserData();case 4:t=l.daoBarn.userLockedUntil,(n=t?new Date(1e3*t+61e3):void 0)&&n.valueOf()<=Date.now()&&(n=void 0),S.reset({lockEndDate:n}),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:m(!1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}(0,r.useEffect)((function(){T().catch(Error)}),[]);var E=S.formState.isValid&&!v;function V(e,t){return D.apply(this,arguments)}function D(){return(D=(0,q.Z)((0,M.Z)().mark((function e(t,n){var o;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g(!0),e.prev=1,!t){e.next=9;break}if(!((o=(0,ao.Z)(t))&&o>0)){e.next=9;break}return e.next=7,l.daoBarn.lock(o,n);case 7:return e.next=9,T();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:g(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])})))).apply(this,arguments)}function F(){return(F=(0,q.Z)((0,M.Z)().mark((function e(t){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z(!1),e.next=3,V(S.getValues("lockEndDate"),t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return h?(0,p.jsx)("div",{className:"flex justify-center p-24",style:{minHeight:"518px"},children:(0,p.jsx)(wn,{})}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(pn,{form:S,className:"flex flow-row row-gap-32 p-24",disabled:v,children:[(0,p.jsxs)("div",{className:"container-box wrap flex flow-col col-gap-64",children:[(0,p.jsxs)("div",{className:"flex flow-row row-gap-8",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Staked balance"}),(0,p.jsxs)("div",{className:"flex flow-col col-gap-8 align-center",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"bold",color:"primary",children:null!==(e=(0,k.nx)(A))&&void 0!==e?e:"-"}),(0,p.jsx)(w.T,{name:a.icon})]})]}),(0,p.jsxs)("div",{className:"flex flow-row row-gap-8",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Lock duration"}),(0,p.jsx)("div",{className:"flex flow-col col-gap-8 align-center",children:(0,p.jsx)(Ve,{end:1e3*(null!==C&&void 0!==C?C:(0,ao.Z)(new Date)),delay:1e3,children:function(e){var t;return(0,p.jsx)(_e.x,{type:"p1",weight:"bold",color:"primary",children:(null===(t=(0,Ie.Ud)(e/1e3))||void 0===t?void 0:t.trim())||"0s"})}})})]})]}),(0,p.jsx)(xn,{name:"lockEndDate",label:"Lock end date",children:function(e){var t=e.field,n=(t.ref,(0,s.Z)(t,mo));return(0,p.jsxs)("div",{className:"flex flow-row row-gap-16",children:[(0,p.jsx)(ho,(0,i.Z)({showTime:!0,showNow:!1,format:"DD/MM/YYYY HH:mm",size:"large"},n)),(0,p.jsx)("div",{className:"flexbox-grid",style:{"--gap":"8px"},children:go.map((function(e){return(0,p.jsx)("button",{type:"button",className:d()("flex justify-center ph-24 pv-16",wo(n.value)===wo(jo(new Date,e))?"button-ghost-monochrome selected":"button-ghost-monochrome"),onClick:function(){S.updateValue("lockEndDate",jo(new Date,e))},children:e},e)}))})]})}}),(0,p.jsx)(en,{message:"All locked balances will be unavailable for withdrawal until the lock timer ends. All future deposits will be locked for the same time."}),(0,p.jsx)("div",{className:"flex flow-col col-gap-12 align-center justify-end",children:(0,p.jsxs)("button",{type:"submit",className:"button-primary align-self-start",disabled:!E,children:[v&&(0,p.jsx)(wn,{className:"mr-4"}),"Lock"]})})]}),y&&(0,p.jsx)(Kt,{title:"Are you sure you want to lock your balance?",header:(0,p.jsxs)("div",{className:"flex flow-row row-gap-16",children:[(0,p.jsxs)(_e.x,{type:"p2",weight:"bold",color:"secondary",children:["You are about to lock"," ",(0,p.jsxs)("span",{className:"primary-color",children:[(0,k.nx)(A)," ",a.symbol]})," ","and "," ",(0,p.jsxs)("span",{className:"primary-color",children:["VotePower ",(0,k.nx)(bo(A,S.getValues("lockEndDate")))]})," ","for"," ",(0,p.jsx)("span",{className:"primary-color",children:(0,Ie.Ud)(Date.now(),null!==(t=null===(n=S.getValues("lockEndDate"))||void 0===n?void 0:n.valueOf())&&void 0!==t?t:0)}),". You cannot undo this or partially lock your balance. Locked tokens will be unavailable for withdrawal until the lock timer ends. All future deposits you make will be locked for the same time."]}),(0,p.jsx)(_e.x,{type:"p2",weight:"bold",color:"primary",children:"The multiplier you get for locking tokens only applies to your voting power, it does not earn more rewards."})]}),submitText:"Lock balance",onCancel:function(){Z(!1)},onConfirm:function(e){return function(e){return F.apply(this,arguments)}(e.gasPrice)}})]})},Zo=n(91907),ko={inputWrapper:"s_inputWrapper__QK5Cw",input:"s_input__+iBd0",large:"s_large__QqUTp",inputSearch:"s_inputSearch__4Gd5l",before:"s_before__OwRQb",searchIcon:"s_searchIcon__Eq1Dn"},No=["id","before","className","dimension"],Ao=function(e){var t=e.id,n=e.before,o=e.className,a=e.dimension,l=void 0===a?"normal":a,c=(0,s.Z)(e,No),u=(0,r.useMemo)((function(){return null!==t&&void 0!==t?t:(0,Zo.x0)()}),[t]),h="search"===c.type;return(0,p.jsxs)("label",{htmlFor:u,className:d()(ko.inputWrapper,o),children:[n&&(0,p.jsx)("div",{className:d()(ko.before,ko[l]),children:n}),h&&(0,p.jsx)(Pt.J,{name:"search",size:16,className:ko.searchIcon,color:"icon"}),(0,p.jsx)("input",(0,i.Z)({type:"text",id:u,className:d()(ko.input,ko[l],(0,xt.Z)({},ko.inputSearch,h))},c))]})},Co=["ref"],_o="1 mo",So="3 mo",To="6 mo",Po=["1 w",_o,So,To,"1 y"],Eo=["BTC_ETH","BTC_BSC"];function Vo(e){return"BTC_ETH"===e?1:"BTC_BSC"===e?2:0}function Do(e,t){switch(t){case"1 w":return(0,to.Z)(e,7);case _o:return(0,oo.Z)(e,1);case So:return(0,oo.Z)(e,3);case To:return(0,oo.Z)(e,6);case"1 y":return(0,to.Z)(e,365);default:return}}function Fo(e){return e?Math.floor(e.getTime()/1e4):0}var Io=function(){var e,t,n,a,l,c,u=(0,N.z)(),h=(0,O.cE)().projectToken,m=xe(),x=(0,U.Os)(),f=(0,r.useState)(!1),v=(0,o.Z)(f,2),g=v[0],b=v[1],Z=(0,r.useState)(!1),A=(0,o.Z)(Z,2),C=A[0],_=A[1],S=(0,r.useState)(!1),T=(0,o.Z)(S,2),P=T[0],E=T[1],V=(0,r.useState)(!1),D=(0,o.Z)(V,2),F=D[0],I=D[1],R=m.daoBarn,B=R.balance,L=R.userLockedUntil,G=h.contract,W=null===(e=G.balance)||void 0===e?void 0:e.unscaleBy(h.decimals),Y=G.getAllowanceOf(null===(t=u.contracts.dao)||void 0===t?void 0:t.barn),z=1e3*(null!==L&&void 0!==L?L:0)>Date.now()&&L?new Date(1e3*L+6e4):(0,no.Z)(Date.now(),1),Q=B&&B.isLessThan(175e3),H=B&&Q?175e3-B.toNumber():.01,K=un({validationScheme:{lockEndDate:{rules:{required:!0,min:function(e){var t;return z.valueOf()<(null!==(t=null===e||void 0===e?void 0:e.valueOf())&&void 0!==t?t:0)},max:function(e){var t;return(0,ro.Z)(Date.now(),1).valueOf()>(null!==(t=null===e||void 0===e?void 0:e.valueOf())&&void 0!==t?t:0)}},messages:{required:"Required",min:"Should be more than 1 minute from current timelock date",max:"Should be less than 1 year"}},amount:{rules:{required:!0,min:H,max:null===W||void 0===W?void 0:W.toNumber()},messages:{required:"Value is required.",min:H>.01?"Node stake amount must be >= 175000":"min top up amount must be >= 0.01",max:"Balance insufficent"}},dataType:{rules:{required:!0},messages:{required:"Value is required."}},p2pKey:{rules:{required:!0},messages:{}}},onSubmit:function(){I(!0)}});function X(){return(X=(0,q.Z)((0,M.Z)().mark((function e(t){var n;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x.account){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,m.daoBarn.checkTimeLock(x.account,t);case 4:n=e.sent,K.updateValue("dataType",t),K.updateValue("p2pKey",n.data.slice(2));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return $.apply(this,arguments)}function $(){return($=(0,q.Z)((0,M.Z)().mark((function e(){var t,n;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.prev=1,e.next=4,G.loadBalance();case 4:return e.next=6,m.daoBarn.loadUserData();case 6:t=m.daoBarn.userLockedUntil,(n=t?new Date(1e3*t+61e3):void 0)&&n.valueOf()<=Date.now()&&(n=void 0),K.reset({lockEndDate:n,p2pKey:"",dataType:0}),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(1);case 14:b(!1);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))).apply(this,arguments)}(0,r.useEffect)((function(){J().catch(Error)}),[]);var ee=K.formState,te=(0,K.watch)("amount"),ne=y().from(te),oe=null===B||void 0===B?void 0:B.plus(te),re=(0,r.useMemo)((function(){var e;return null!==(e=null===Y||void 0===Y?void 0:Y.gt(y().ZERO))&&void 0!==e&&e}),[Y]),ae=re&&ee.isDirty&&ee.isValid&&!P;function ie(){return(ie=(0,q.Z)((0,M.Z)().mark((function e(){var t,n;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null===(t=u.contracts.dao)||void 0===t?void 0:t.barn){e.next=3;break}return e.abrupt("return");case 3:return _(!0),e.prev=4,e.next=7,G.approve(n,!0);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),console.error(e.t0);case 12:_(!1);case 13:case"end":return e.stop()}}),e,null,[[4,9]])})))).apply(this,arguments)}function se(e,t,n,o,r){return le.apply(this,arguments)}function le(){return le=(0,q.Z)((0,M.Z)().mark((function e(t,n,o,r,a){var i,s,l;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E(!0),e.prev=1,i=t.scaleBy(h.decimals),s=new Bn.BigNumber(i.toFixed(0)),!i||!n){e.next=11;break}if(!((l=(0,ao.Z)(n))&&l>0)){e.next=11;break}return e.next=9,m.daoBarn.addOrAdjusttimelock(s,l,o,"0x"+r,a);case 9:return e.next=11,J();case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),console.error(e.t0);case 16:E(!1);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),le.apply(this,arguments)}function ce(){return(ce=(0,q.Z)((0,M.Z)().mark((function e(t){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ne){e.next=2;break}return e.abrupt("return");case 2:return I(!1),e.next=5,se(ne,K.getValues("lockEndDate"),K.getValues("dataType"),K.getValues("p2pKey"),t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return g?(0,p.jsx)("div",{className:"flex justify-center p-24",style:{minHeight:"518px"},children:(0,p.jsx)(wn,{})}):(0,p.jsxs)(p.Fragment,{children:[u.features.faucets&&(0,p.jsx)(ft.rU,{to:"/faucets",className:"button-ghost ml-auto",children:"Faucets"}),(0,p.jsxs)(pn,{form:K,className:"flex flow-row row-gap-32 p-24",disabled:P,children:[(0,p.jsxs)("div",{className:"container-box wrap flex flow-col col-gap-64",children:[(0,p.jsxs)("div",{className:"flex flow-row row-gap-8",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Staked balance"}),(0,p.jsxs)("div",{className:"flex flow-col col-gap-8 align-center",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"bold",color:"primary",children:null!==(n=(0,k.nx)(B))&&void 0!==n?n:"-"}),(0,p.jsx)(w.T,{name:h.icon})]})]}),(0,p.jsxs)("div",{className:"flex flow-row row-gap-8",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Wallet balance"}),(0,p.jsxs)("div",{className:"flex flow-col col-gap-8 align-center",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"bold",color:"primary",children:null!==(a=(0,k.nx)(W))&&void 0!==a?a:"-"}),(0,p.jsx)(w.T,{name:h.icon})]})]}),(0,p.jsxs)("div",{className:"flex flow-row row-gap-8",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Lock duration"}),(0,p.jsx)("div",{className:"flex flow-col col-gap-8 align-center",children:(0,p.jsx)(Ve,{end:1e3*(null!==L&&void 0!==L?L:(0,ao.Z)(new Date)),delay:1e3,children:function(e){var t;return(0,p.jsx)(_e.x,{type:"p1",weight:"bold",color:"primary",children:(null===(t=(0,Ie.Ud)(e/1e3))||void 0===t?void 0:t.trim())||"0s"})}})})]})]}),(0,p.jsx)(xn,{name:"amount",label:"Amount (top up)",children:function(e){var t=e.field;return(0,p.jsx)(Xn,(0,i.Z)({before:(0,p.jsx)(w.T,{name:h.icon}),max:W,disabled:P,decimals:h.decimals,slider:!0},t))}}),(0,p.jsx)(xn,{name:"lockEndDate",label:"Lock end date",children:function(e){var t=e.field,n=(t.ref,(0,s.Z)(t,Co));return(0,p.jsxs)("div",{className:"flex flow-row row-gap-16",children:[(0,p.jsx)(ho,(0,i.Z)({showTime:!0,showNow:!1,format:"DD/MM/YYYY HH:mm",size:"large"},n)),(0,p.jsx)("div",{className:"flexbox-grid",style:{"--gap":"8px"},children:Po.map((function(e){return(0,p.jsx)("button",{type:"button",className:d()("flex justify-center ph-24 pv-16",Fo(n.value)===Fo(Do(new Date,e))?"button-ghost-monochrome selected":"button-ghost-monochrome"),onClick:function(){K.updateValue("lockEndDate",Do(new Date,e))},children:e},e)}))})]})}}),(0,p.jsx)(xn,{name:"dataType",label:"DataType",labelProps:{hint:"What DataType for your node. 1 => BTC_ETH network, 2 => BTC_BSC network"},className:"flex-grow",children:function(e){var t=e.field;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"flexbox-grid",style:{"--gap":"8px"},children:Eo.map((function(e){return(0,p.jsx)("button",{type:"button",disabled:"BTC_BSC"==e,className:d()("flex justify-center ph-24 pv-16",Vo(e)===t.value?"button-ghost-monochrome selected":"button-ghost-monochrome"),onClick:function(){!function(e){X.apply(this,arguments)}(Vo(e))},children:"BTC_BSC"==e?"BTC_BSC (disabled)":e},e)}))}),(0,p.jsx)(Ao,{placeholder:"0",dimension:"large",className:"flex-grow",disabled:P,value:t.value,onChange:function(e){K.updateValue("dataType",e.target.value)}})]})}}),(0,p.jsx)(xn,{name:"p2pKey",label:"Node P2Pkey",labelProps:{hint:"Node p2p key (32bytes hexstring) is on your node"},className:"flex-grow",children:function(e){var t=e.field;return(0,p.jsx)(Ao,{placeholder:"18c9c5...",dimension:"large",className:"flex-grow",disabled:P,value:t.value,onChange:function(e){K.updateValue("p2pKey",e.target.value)}})}}),(0,p.jsx)(en,{message:"Deposits made after you have an ongoing lock will be added to the locked balance and will be subjected to the same lock timer."}),(0,p.jsxs)("div",{className:"flex flow-col col-gap-12 align-center justify-end",children:[!re&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("button",{type:"button",className:"button-primary align-self-start",onClick:function(){return ie.apply(this,arguments)},children:[C&&(0,p.jsx)(wn,{className:"mr-4"}),"Enable ",h.symbol]}),(0,p.jsx)(j.Z,{name:"arrow-forward"})]}),(0,p.jsxs)("button",{type:"submit",className:"button-primary align-self-start",disabled:!ae,children:[P&&(0,p.jsx)(wn,{className:"mr-4"}),"Stake"]})]})]}),F&&(0,p.jsx)(Kt,{title:"Are you sure you want to lock your balance?",header:(0,p.jsxs)("div",{className:"flex flow-row row-gap-16",children:[(0,p.jsxs)(_e.x,{type:"p2",weight:"bold",color:"secondary",children:["You are about to lock"," ",(0,p.jsxs)("span",{className:"primary-color",children:[(0,k.nx)(oe)," ",h.symbol]})," ","for"," ",(0,p.jsx)("span",{className:"primary-color",children:(0,Ie.Ud)(Date.now(),null!==(l=null===(c=K.getValues("lockEndDate"))||void 0===c?void 0:c.valueOf())&&void 0!==l?l:0)}),". You cannot undo this or partially lock your balance. Locked tokens will be unavailable for withdrawal until the lock timer ends. All future deposits you make will be locked for the same time."]}),(0,p.jsx)(_e.x,{type:"p2",weight:"bold",color:"primary",children:"The multiplier you get for locking tokens only applies to your voting power, it does not earn more rewards. (pre-staking)"})]}),submitText:"Confirm",onCancel:function(){I(!1)},onConfirm:function(e){return function(e){return ce.apply(this,arguments)}(e.gasPrice)}})]})},Ro=function(){var e,t,n,a=(0,O.cE)().projectToken,s=xe(),l=(0,r.useState)(!1),c=(0,o.Z)(l,2),d=c[0],u=c[1],h=(0,r.useState)(!1),m=(0,o.Z)(h,2),x=m[0],f=m[1],v=(0,r.useState)(!1),g=(0,o.Z)(v,2),j=g[0],b=g[1],Z=s.daoBarn,N=Z.balance,A=Z.userLockedUntil,C=a.contract,_=null===(e=C.balance)||void 0===e?void 0:e.unscaleBy(a.decimals),S=1e3*(null!==A&&void 0!==A?A:0)>Date.now(),T=un({validationScheme:{amount:{rules:{required:!0,min:0},messages:{required:"Value is required.",min:"Should be a positive value."}}},onSubmit:function(){F&&b(!0)}});function P(){return E.apply(this,arguments)}function E(){return(E=(0,q.Z)((0,M.Z)().mark((function e(){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.prev=1,e.next=4,C.loadBalance();case 4:return e.next=6,s.daoBarn.loadUserData();case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:u(!1);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}(0,r.useEffect)((function(){P().catch(Error)}),[]);var V=T.formState,D=(0,T.watch)("amount"),F=y().from(D),I=V.isDirty&&!x&&!S;function R(e,t){return U.apply(this,arguments)}function U(){return U=(0,q.Z)((0,M.Z)().mark((function e(t,n){var o,r;return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f(!0),e.prev=1,o=t.scaleBy(a.decimals),r=new Bn.BigNumber(o.toFixed(0)),!o){e.next=9;break}return e.next=7,s.daoBarn.withdraw(r,n);case 7:return e.next=9,P();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:f(!1);case 15:case"end":return e.stop()}}),e,null,[[1,11]])}))),U.apply(this,arguments)}function B(){return(B=(0,q.Z)((0,M.Z)().mark((function e(t){return(0,M.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F){e.next=2;break}return e.abrupt("return");case 2:return b(!1),e.next=5,R(F,t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return d?(0,p.jsx)("div",{className:"flex justify-center p-24",style:{minHeight:"518px"},children:(0,p.jsx)(wn,{})}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(pn,{form:T,className:"flex flow-row row-gap-32 p-24",disabled:x,children:[(0,p.jsxs)("div",{className:"container-box wrap flex flow-col col-gap-64",children:[(0,p.jsxs)("div",{className:"flex flow-row row-gap-8",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Staked balance"}),(0,p.jsxs)("div",{className:"flex flow-col col-gap-8 align-center",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"bold",color:"primary",children:null!==(t=(0,k.nx)(N))&&void 0!==t?t:"-"}),(0,p.jsx)(w.T,{name:a.icon})]})]}),(0,p.jsxs)("div",{className:"flex flow-row row-gap-8",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Wallet balance"}),(0,p.jsxs)("div",{className:"flex flow-col col-gap-8 align-center",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"bold",color:"primary",children:null!==(n=(0,k.nx)(_))&&void 0!==n?n:"-"}),(0,p.jsx)(w.T,{name:a.icon})]})]}),(0,p.jsxs)("div",{className:"flex flow-row row-gap-8",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Lock duration"}),(0,p.jsx)("div",{className:"flex flow-col col-gap-8 align-center",children:(0,p.jsx)(Ve,{end:1e3*(null!==A&&void 0!==A?A:(0,ao.Z)(new Date)),delay:1e3,children:function(e){var t;return(0,p.jsx)(_e.x,{type:"p1",weight:"bold",color:"primary",children:(null===(t=(0,Ie.Ud)(e/1e3))||void 0===t?void 0:t.trim())||"0s"})}})})]})]}),(0,p.jsx)(xn,{name:"amount",label:"Amount",children:function(e){var t=e.field;return(0,p.jsx)(Xn,(0,i.Z)({before:(0,p.jsx)(w.T,{name:a.icon}),max:N,disabled:x,decimals:a.decimals,slider:!0},t))}}),(0,p.jsx)(en,{message:"Locked balances are not available for withdrawal until the timer ends. Withdrawal means you will stop earning staking rewards for the amount withdrawn."}),(0,p.jsx)("div",{className:"flex flow-col col-gap-12 align-center justify-end",children:(0,p.jsxs)("button",{type:"submit",className:"button-primary",disabled:!I,children:[x&&(0,p.jsx)(wn,{className:"mr-4"}),"Withdraw"]})})]}),j&&(0,p.jsx)(Kt,{title:"Confirm withdraw",header:(0,p.jsxs)("div",{className:"container-box flex flow-row row-gap-4",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Withdraw amount"}),(0,p.jsxs)("div",{className:"flex flow-col col-gap-8 align-center",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"bold",color:"primary",children:(0,k.nx)(F,{decimals:a.decimals})}),(0,p.jsx)(w.T,{name:a.icon})]})]}),submitText:"Confirm your withdraw",onCancel:function(){b(!1)},onConfirm:function(e){return function(e){return B.apply(this,arguments)}(e.gasPrice)}})]})},Uo=function(){var e=(0,U.Os)();return e.initialized?e.isActive?(0,p.jsxs)("div",{className:"container-fit",children:[(0,p.jsx)(_e.x,{type:"h1",weight:"bold",color:"primary",className:"mb-32",children:"Portfolio"}),(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("div",{className:"card-header pv-0",children:(0,p.jsx)(Nt,{tabs:[{id:"deposit",children:"Deposit",to:"/governance/portfolio/deposit"},{id:"lock",children:"Lock",to:"/governance/portfolio/lock"},{id:"stake",children:"Node Stake",to:"/governance/portfolio/stake"},{id:"delegate",children:"Delegate",to:"/governance/portfolio/delegate"},{id:"withdraw",children:"Withdraw",to:"/governance/portfolio/withdraw"}]})}),(0,p.jsxs)(a.rs,{children:[(0,p.jsx)(a.AW,{path:"/governance/portfolio/deposit",component:eo}),(0,p.jsx)(a.AW,{path:"/governance/portfolio/lock",component:yo}),(0,p.jsx)(a.AW,{path:"/governance/portfolio/stake",component:Io}),(0,p.jsx)(a.AW,{path:"/governance/portfolio/delegate",component:Un}),(0,p.jsx)(a.AW,{path:"/governance/portfolio/withdraw",component:Ro})]})]})]}):(0,p.jsx)(a.l_,{to:"/governance/overview"}):null},Bo=n(93818),Oo="s_component__gJFqt",Lo=["className"],Mo=function(e){var t=e.className,n=(0,s.Z)(e,Lo);return(0,p.jsx)(kn.Z.TextArea,(0,i.Z)({className:d()(Oo,t)},n))},qo=n(9902),Go=n(25573),Wo=n(11267),Yo=n(7550),zo=n(66637);function Qo(e){return e.map((function(e){if("string"===typeof e)try{var t=JSON.parse(e);if("object"===typeof t)return t}catch(n){}return e}))}var Ho=function(){function e(t){(0,G.Z)(this,e),this.abi=void 0,this.abi=new Wo.vU(t)}return(0,W.Z)(e,[{key:"writableFunctions",get:function(){return Object.values(this.abi.functions).filter((function(e){return!["view","pure"].includes(e.stateMutability)}))}},{key:"encodeFunctionData",value:function(e,t){return this.abi.encodeFunctionData(e,Qo(null!==t&&void 0!==t?t:[]))}}],[{key:"encodeFunctionData",value:function(e,t){try{var n="string"===typeof e?Yo.YW.fromString(e):e;return zo.$.encode(n.inputs,Qo(null!==t&&void 0!==t?t:[]))}catch(o){console.error("AbiInterface::encodeFunctionData",o.message)}}},{key:"decodeFunctionData",value:function(e,t){try{var n="string"===typeof e?Yo.YW.fromString(e):e,o=0!==t.indexOf("0x")?"0x".concat(t):t;return zo.$.decode(n.inputs,o)}catch(r){console.error("AbiInterface::decodeFunctionData",r.message)}}},{key:"getFunctionFragmentFrom",value:function(e){try{return Yo.YW.fromString(e)}catch(t){console.error("AbiInterface::getFunctionFragmentFrom",t.message)}}},{key:"stringifyParamValue",value:function(e){try{return Array.isArray(e)?JSON.stringify(e,null,2):"function"===typeof(null===e||void 0===e?void 0:e.toString)?e.toString():JSON.stringify(e,null,2)}catch(t){console.error("AbiInterface::stringifyParamValue",t.message)}}}]),e}(),Ko=n(18961),Xo="s_component__f9yMS",Jo="s_dropdown__pvz-z",$o="s_option__KUFLt",er=["className","label","loading","options","fixScroll"],tr=function(e){var t=e.className,n=e.label,o=e.loading,a=e.options,l=e.fixScroll,c=(0,s.Z)(e,er);return(0,p.jsx)(Ko.default,(0,i.Z)((0,i.Z)({className:d()(Xo,t),dropdownClassName:Jo,suffixIcon:o?(0,p.jsx)(Ot.default,{size:"small"}):(0,p.jsx)(Pt.J,{name:"dropdown"}),optionLabelProp:"label",getPopupContainer:l?function(e){return e.parentNode}:void 0},c),{},{children:a.map((function(e){return(0,r.createElement)(Ko.default.Option,(0,i.Z)((0,i.Z)({},e),{},{className:$o,key:e.value,label:(0,p.jsxs)(g.Z,{flow:"col",gap:12,children:[n&&(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:n}),(0,p.jsx)(_e.x,{type:"p2",weight:"semibold",color:"primary",children:e.label})]}),value:e.value}),e.label)}))}))},nr="s_component__5mKvj",or=["className"],rr=[{label:"Yes",value:!0},{label:"No",value:!1}],ar=function(e){var t=e.className,n=(0,s.Z)(e,or);return(0,p.jsx)(Bt.default.Group,(0,i.Z)({className:d()(nr,t),options:rr,optionType:"button",buttonStyle:"outline"},n))},ir=n(8164),sr=n(27378),lr=["max","onAdd"],cr=function(e){var t=e.max,n=e.onAdd,a=(0,s.Z)(e,lr),l=r.useState(!1),c=(0,o.Z)(l,2),d=c[0],u=c[1],h=r.useState(""),m=(0,o.Z)(h,2),x=m[0],f=m[1];var v=(0,p.jsxs)(g.Z,{flow:"row",gap:24,children:[(0,p.jsxs)(g.Z,{flow:"row",gap:8,children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Number of zeros"}),(0,p.jsxs)(g.Z,{flow:"col",gap:16,children:[(0,p.jsx)(ge.Z,{type:"ghost",onClick:function(){return f("6")},children:"6"}),(0,p.jsx)(ge.Z,{type:"ghost",onClick:function(){return f("8")},children:"8"}),(0,p.jsx)(ge.Z,{type:"ghost",onClick:function(){return f("18")},children:"18"}),(0,p.jsx)(_n,{type:"number",value:x,max:t,placeholder:"Max ".concat(t),onChange:function(e){f(e.target.value)}})]})]}),(0,p.jsx)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:"Use the options above to add trailing zeros to the input amount."}),(0,p.jsxs)(g.Z,{flow:"col",gap:16,justify:"space-between",children:[(0,p.jsx)(ge.Z,{type:"ghost",onClick:function(){u(!1),f("")},children:"Cancel"}),(0,p.jsx)(ge.Z,{type:"primary",onClick:function(){u(!1);var e=Number(x);Number.isNaN(e)||null===n||void 0===n||n(e),f("")},children:"Add zeros"})]})]});return(0,p.jsx)(sr.Z,(0,i.Z)((0,i.Z)({title:"Add zeros",placement:"bottomLeft",overlayStyle:{width:376},content:v,visible:d,onVisibleChange:u},a),{},{children:(0,p.jsx)(ge.Z,{type:"link",icon:(0,p.jsx)(j.Z,{name:"plus-square-outlined",width:16,height:16})})}))},dr=n(97683),ur=n(42576),pr=n(76008),hr="s_component__XGo0n",mr=["children","items","onClick"],xr=function(e){var t=e.children,n=e.items,o=(e.onClick,(0,s.Z)(e,mr)),a=r.useRef();return(0,p.jsx)(pr.Z,(0,i.Z)((0,i.Z)({ref:a,overlayClassName:hr,placement:"bottom",trigger:"click",content:(0,p.jsx)(ur.default,{onClick:function(t){var n,o;null===(n=e.onClick)||void 0===n||n.call(e,t.key),null===(o=a.current)||void 0===o||o.close()},children:null===n||void 0===n?void 0:n.map((function(e){return(0,p.jsxs)(ur.default.Item,{children:[e.icon,e.title]},e.key)}))})},o),{},{children:t}))},fr=n(8075),vr="s_component__QBFwz",gr="s_content__KcaPl",jr="s_footer__Tk7xm",wr=["className","children","footer"],br=function(e){var t=e.className,n=e.children,o=e.footer,r=(0,s.Z)(e,wr);return(0,p.jsxs)(fr.Z,(0,i.Z)((0,i.Z)({className:d()(vr,t)},r),{},{children:[(0,p.jsx)("div",{className:gr,children:n}),o&&(0,p.jsx)("div",{className:jr,children:o})]}))},yr="s_content__VG-rN",Zr="s_address__8kd0I",kr="s_paragraph__0zHcR",Nr="s_expanded__-Orh-",Ar=["className","title","target","signature","callData","showSettings","onDeleteAction","onEditAction","children"],Cr=function(e){var t=e.className,n=e.title,a=e.target,l=e.signature,c=e.callData,u=e.showSettings,h=e.onDeleteAction,m=e.onEditAction,x=(e.children,(0,s.Z)(e,Ar)),f=r.useState(!1),w=(0,o.Z)(f,2),b=w[0],y=w[1],Z=r.useState(!1),N=(0,o.Z)(Z,2),A=N[0],C=N[1],_=r.useState(!1),S=(0,o.Z)(_,2),T=S[0],P=S[1],E=r.useMemo((function(){return Ho.getFunctionFragmentFrom(l)}),[l]),V=r.useMemo((function(){var e;return E&&null!==(e=Ho.decodeFunctionData(E,c))&&void 0!==e?e:[]}),[E,c]),D=r.useMemo((function(){var e,t=null===V||void 0===V?void 0:V.map((function(e){return Ho.stringifyParamValue(e)}));return null!==(e=null===t||void 0===t?void 0:t.join(",\n"))&&void 0!==e?e:""}),[V]),F=[{key:"sig",icon:(0,p.jsx)(j.Z,{name:"chevron-right"}),title:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",children:T?"Show transaction":"Show function signature"})},{key:"edit",icon:(0,p.jsx)(j.Z,{name:"pencil-outlined"}),title:"Edit action"},{key:"delete",icon:(0,p.jsx)(j.Z,{name:"bin-outlined",color:"red"}),title:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"red",children:"Delete action"})}];function I(){P((function(e){return!e}))}return(0,p.jsx)(br,(0,i.Z)((0,i.Z)({className:t,title:(0,p.jsx)(_e.x,{type:"p2",weight:"semibold",color:"primary",children:n}),extra:u?(0,p.jsx)(xr,{items:F,placement:"bottomLeft",onClick:function(e){return function(e){"sig"===e?I():"edit"===e?null===m||void 0===m||m():"delete"===e&&(null===h||void 0===h||h())}(String(e))},children:(0,p.jsx)(ge.Z,{type:"link",icon:(0,p.jsx)(j.Z,{name:"gear"})})}):(0,p.jsx)(ge.Z,{type:"link",onClick:I,children:(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:T?"Show transaction":"Show function signature"})}),footer:b||A?(0,p.jsx)(g.Z,{flow:"col",align:"center",justify:"center",children:(0,p.jsx)(ge.Z,{type:"link",onClick:function(){C((function(e){return!e}))},children:(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:A?"Hide details":"Show more"})})}):null},x),{},{children:(0,p.jsxs)("div",{className:yr,children:[(0,p.jsx)(v.S,{address:a,query:"#writeContract",children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",className:Zr,color:"blue",children:(0,k.eI)(a)})}),l&&(0,p.jsxs)(dr.Z.Paragraph,{className:d()(kr,A&&Nr),style:{maxWidth:"514px",overflowWrap:"anywhere"},ellipsis:{rows:A?9999:2,expandable:!1,onEllipsis:function(e){y(e),e&&C(!e)}},children:[".",T?l:"".concat(null===E||void 0===E?void 0:E.name,"(").concat(D,")")]})]})}))},_r=["targetAddress","functionSignature","functionEncodedParams"],Sr=function(e){var t=e.targetAddress,n=e.functionSignature,o=e.functionEncodedParams,r=(0,s.Z)(e,_r);return(0,p.jsx)(Fe.Z,(0,i.Z)((0,i.Z)({width:560},r),{},{children:(0,p.jsxs)(g.Z,{flow:"row",gap:32,children:[(0,p.jsxs)(g.Z,{flow:"row",gap:24,children:[(0,p.jsx)(j.Z,{name:"warning-outlined",width:40,height:40,color:"red"}),(0,p.jsxs)(g.Z,{flow:"row",gap:8,children:[(0,p.jsx)(_e.x,{type:"h3",weight:"semibold",color:"primary",children:"Action could not be simulated"}),(0,p.jsx)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:"We run a simulation for every action before adding it to the proposal. The following action failed to simulate:"})]}),(0,p.jsx)(Cr,{title:"",style:{width:"496px"},target:t,signature:n,callData:o}),(0,p.jsx)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:"If you think this is a mistake, you can still add this action to the proposal."})]}),(0,p.jsxs)(g.Z,{flow:"col",justify:"space-between",children:[(0,p.jsx)(ge.Z,{type:"default",onClick:r.onOk,children:"Continue anyway"}),(0,p.jsx)(ge.Z,{type:"primary",onClick:r.onCancel,children:"Go back"})]})]})}))},Tr={component:"s_component__JrObe",wrap:"s_wrap__ktdGH",form:"s_form__9ySh-",textarea:"s_textarea__7I9eY",actions:"s_actions__hf6UP"},Pr={targetAddress:"",isProxyAddress:!1,implementationAddress:"",addValueAttribute:!1,actionValue:"",addFunctionCall:!1,abiLoading:!1,abiInterface:void 0,functionSignature:"",functionMeta:void 0,functionParams:{},functionStrParams:"",functionEncodedParams:""},Er={showSimulatedActionModal:!1,simulatedAction:void 0,simulationResolve:void 0,simulationReject:void 0,formDirty:!1,submitting:!1},Vr=function(e){var t=e.edit,n=void 0!==t&&t,a=e.initialValues,s=void 0===a?Pr:a,l=(0,Gt.L)().activeNetwork,c=(0,N.z)(),d=(0,ir.$6)(),u=Tt.Z.useForm(),h=(0,o.Z)(u,1)[0],m=(0,L.Z)(Er),x=(0,o.Z)(m,2),f=x[0],v=x[1];function j(e){h.setFieldsValue({abiLoading:!0});var t="".concat(l.explorer.apiUrl,"/api?module=contract&action=getabi&address=").concat(e,"&apikey=").concat(l.explorer.key);fetch(t).then((function(e){return e.json()})).then((function(e){var t=e.status,n=e.result;return"1"===t?JSON.parse(n):Promise.reject(n)})).then((function(e){h.setFieldsValue({abiInterface:new Ho(e)})})).catch(Error).then((function(){h.setFieldsValue({abiLoading:!1})}))}function w(){return(w=(0,q.Z)((0,M.Z)().mark((function t(n){var o,r,a,i,s,l;return(0,M.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.actions.some((function(e){return e!==n&&e.addFunctionCall&&e.targetAddress===n.targetAddress&&e.functionSignature===n.functionSignature&&e.functionEncodedParams===n.functionEncodedParams}))){t.next=4;break}return qo.default.error({message:"Duplicate actions are disallowed!"}),t.abrupt("return");case 4:return v({submitting:!0}),o=!1,t.prev=6,t.next=9,h.validateFields();case 9:if(!n.addFunctionCall){t.next=20;break}return i=null===(r=n.abiInterface)||void 0===r?void 0:r.encodeFunctionData(n.functionMeta,Object.values(null!==(a=n.functionParams)&&void 0!==a?a:{})),t.prev=11,t.next=14,d.tryCall(n.targetAddress,null===(s=c.contracts.dao)||void 0===s?void 0:s.governance,i,n.actionValue);case 14:t.next=20;break;case 16:return t.prev=16,t.t0=t.catch(11),t.next=20,new Promise((function(e,t){v({showSimulatedActionModal:!0,simulatedAction:n,simulationResolve:e,simulationReject:t})}));case 20:return t.next=22,e.onSubmit(n);case 22:h.resetFields(),o=!0,t.next=29;break;case 26:t.prev=26,t.t1=t.catch(6),null!==t.t1&&void 0!==t.t1&&t.t1.message&&qo.default.error({message:null===t.t1||void 0===t.t1?void 0:t.t1.message});case 29:v({submitting:!1}),o&&(null===(l=e.onCancel)||void 0===l||l.call(e));case 31:case"end":return t.stop()}}),t,null,[[6,26],[11,16]])})))).apply(this,arguments)}function b(e){var t,n;e?null===(t=f.simulationResolve)||void 0===t||t.call(f):null===(n=f.simulationReject)||void 0===n||n.call(f);v({showSimulatedActionModal:!1,simulationResolve:void 0,simulationReject:void 0})}return r.useEffect((function(){s!==Pr&&(h.resetFields(),h.setFieldsValue(s))}),[s]),(0,p.jsx)(Fe.Z,(0,i.Z)((0,i.Z)({className:Tr.component,confirmClose:f.formDirty,confirmText:"Are you sure you want to close this form?"},e),{},{children:(0,p.jsxs)("div",{className:Tr.wrap,children:[(0,p.jsx)(_e.x,{type:"h2",weight:"semibold",className:Tr.headerLabel,color:"primary",children:n?"Edit action":"Add new action"}),(0,p.jsxs)(Ut,{className:Tr.form,form:h,initialValues:{},validateTrigger:["onSubmit","onChange"],onValuesChange:function(e,t){var n=t.targetAddress,o=t.isProxyAddress,r=t.implementationAddress,a=t.addFunctionCall,i=t.abiInterface,s=t.functionSignature,l=t.functionMeta,c=t.functionParams;Object.keys(e).forEach((function(e){if("targetAddress"===e||"implementationAddress"===e){h.setFieldsValue({abiLoading:!1,abiInterface:void 0,functionSignature:"",functionMeta:void 0,functionParams:{},functionStrParams:"",functionEncodedParams:""});var t=r||n;!0===a&&t&&j(t)}else if("isProxyAddress"===e)!o&&r&&(h.setFieldsValue({abiLoading:!1,abiInterface:void 0,functionSignature:"",functionMeta:void 0,functionParams:{},functionStrParams:"",functionEncodedParams:""}),!0===a&&n&&j(n));else if("addValueAttribute"===e)h.setFieldsValue({actionValue:""});else if("addFunctionCall"===e){h.setFieldsValue({abiLoading:!1,abiInterface:void 0,functionSignature:"",functionMeta:void 0,functionParams:{},functionStrParams:"",functionEncodedParams:""});var d=r||n;!0===a&&d&&j(d)}else if("functionSignature"===e){var u,p=(null!==(u=null===i||void 0===i?void 0:i.writableFunctions)&&void 0!==u?u:[]).find((function(e){return e.format()===s})),m="";if(p){var x=p.inputs.map((function(e){return{name:e.name,type:e.type}})),f=JSON.stringify(x,null,2);m="Parameters:\n".concat(f)}h.setFieldsValue({functionMeta:p,functionParams:{},functionStrParams:m,functionEncodedParams:""})}else if("functionParams"===e&&l){var v=Object.values(c),g=Ho.encodeFunctionData(l,v);h.setFieldsValue({functionEncodedParams:g})}})),v({formDirty:h.isFieldsTouched()})},onFinish:function(e){return w.apply(this,arguments)},children:[(0,p.jsx)(Ut.Item,{name:"targetAddress",label:"Target address",hint:"This is the address to which the transaction will be sent.",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(_n,{disabled:f.submitting})}),(0,p.jsxs)(g.Z,{flow:"col",align:"center",justify:"space-between",children:[(0,p.jsx)(_e.k,{text:"In case you are using a proxy address as the target, please specify the address where the function implementation is found.",children:(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Is this a proxy address?"})}),(0,p.jsx)(Ut.Item,{name:"isProxyAddress",noStyle:!0,children:(0,p.jsx)(Go.Z,{disabled:f.submitting})})]}),(0,p.jsx)(Ut.Item,{dependencies:["isProxyAddress"],noStyle:!0,children:function(e){var t=(0,e.getFieldsValue)().isProxyAddress;return!0===t&&(0,p.jsx)(Ut.Item,{name:"implementationAddress",hidden:!t,preserve:!1,rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(_n,{placeholder:"Implementation address",disabled:f.submitting})})}}),(0,p.jsx)(Ut.Item,{name:"addValueAttribute",label:"Add a value attribute to your action?",hint:"This field allows you to send some ETH along with your transaction.",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(ar,{disabled:f.submitting})}),(0,p.jsx)(Ut.Item,{shouldUpdate:function(e){return!0===e.addValueAttribute},noStyle:!0,children:function(e){var t,n=e.getFieldsValue,o=n(),r=o.addValueAttribute,a=o.actionValue,i=78-(null!==(t=null===a||void 0===a?void 0:a.length)&&void 0!==t?t:0);return!0===r&&(0,p.jsx)(Ut.Item,{name:"actionValue",label:(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Action Value"}),(0,p.jsx)(cr,{max:i,onAdd:function(e){var t=n().actionValue;if(t){var o="0".repeat(e);h.setFieldsValue({actionValue:"".concat(t).concat(o)})}}})]}),preserve:!1,rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(_n,{disabled:f.submitting})})}}),(0,p.jsx)(Ut.Item,{name:"addFunctionCall",label:"Add a function call to your action?",hint:"This field allows you to call a function on a smart contract.",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(ar,{disabled:f.submitting})}),(0,p.jsx)(Ut.Item,{name:"abiLoading",preserve:!1,hidden:!0,noStyle:!0}),(0,p.jsx)(Ut.Item,{name:"abiInterface",preserve:!1,hidden:!0,noStyle:!0}),(0,p.jsx)(Ut.Item,{name:"functionMeta",preserve:!1,hidden:!0,noStyle:!0}),(0,p.jsx)(Ut.Item,{name:"functionStrParams",preserve:!1,hidden:!0,noStyle:!0}),(0,p.jsx)(Ut.Item,{name:"functionEncodedParams",preserve:!1,hidden:!0,noStyle:!0}),(0,p.jsx)(Ut.Item,{shouldUpdate:function(e){return!0===e.addFunctionCall},noStyle:!0,children:function(e){var t,n=(0,e.getFieldsValue)(),o=n.targetAddress,r=n.addFunctionCall,a=n.abiLoading,i=n.abiInterface,s=n.functionMeta,l=n.functionParams,c=n.functionStrParams,d=n.functionEncodedParams;if(!0!==r)return null;var u=null!==(t=null===i||void 0===i?void 0:i.writableFunctions.map((function(e){return{label:e.format(),value:e.format()}})))&&void 0!==t?t:[];return(0,p.jsxs)(g.Z,{flow:"row",gap:32,children:[(0,p.jsx)(Ut.Item,{name:"functionSignature",label:"Select function",preserve:!1,rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(tr,{loading:a,disabled:f.submitting,options:u,fixScroll:!0})}),s&&(0,p.jsxs)(g.Z,{flow:"row",gap:32,children:[s.inputs.map((function(e){return(0,p.jsx)(Ut.Item,{name:["functionParams",e.name],label:(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsxs)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:[e.name," (",e.type,")"]}),/(u?int\d+)/g.test(e.type)&&(0,p.jsx)(cr,{onAdd:function(t){var n=l[e.name];if(n){var o="0".repeat(t);l[e.name]="".concat(n).concat(o);var r=Object.values(l),a=Ho.encodeFunctionData(s,r);h.setFieldsValue({functionParams:l,functionEncodedParams:a})}}})]}),preserve:!1,rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(_n,{disabled:f.submitting,placeholder:"".concat(e.name," (").concat(e.type,")")})},"".concat(null===s||void 0===s?void 0:s.format(),":").concat(e.name))})),(0,p.jsx)(Ut.Item,{label:"Function type: ".concat(s.name),children:(0,p.jsx)(Mo,{className:Tr.textarea,rows:5,value:c,disabled:!0})}),(0,p.jsx)(Ut.Item,{label:"Hex data",children:(0,p.jsx)(Mo,{className:Tr.textarea,rows:5,placeholder:"Fill in the arguments above",value:d,disabled:!0})})]}),o&&r&&!a&&!i&&(0,p.jsx)(en,{type:"error",message:"The target address you entered is not a validated contract address. Please check the information you entered and try again"})]})}}),(0,p.jsx)(Ut.Item,{dependencies:["addValueAttribute","addFunctionCall"],noStyle:!0,children:function(e){var t=(0,e.getFieldsValue)(),n=t.addValueAttribute,o=t.addFunctionCall;return!1===n&&!1===o&&(0,p.jsx)(en,{type:"error",message:"You need to provide at least one: a value attribute or a function call to your action"})}}),(0,p.jsxs)("div",{className:Tr.actions,children:[(0,p.jsx)("button",{type:"button",disabled:f.submitting,onClick:e.onCancel,className:"button-ghost-monochrome",children:n?"Cancel Changes":"Cancel"}),(0,p.jsxs)("button",{className:"button-primary",type:"submit",children:[f.submitting&&(0,p.jsx)(Ot.default,{spinning:!0}),n?"Save Changes":"Add Action"]})]})]}),f.showSimulatedActionModal&&f.simulatedAction&&(0,p.jsx)(Sr,{targetAddress:f.simulatedAction.targetAddress,functionSignature:f.simulatedAction.functionSignature,functionEncodedParams:f.simulatedAction.functionEncodedParams,onOk:function(){return b(!0)},onCancel:function(){return b(!1)}})]})}))},Dr=n(36459),Fr=function(e){var t=Object.assign({},((0,Dr.Z)(e),e));return(0,p.jsx)(Fe.Z,(0,i.Z)((0,i.Z)({width:560},t),{},{children:(0,p.jsxs)("div",{className:"flex flow-row row-gap-32",children:[(0,p.jsxs)("div",{className:"flex col-gap-16 align-center",children:[(0,p.jsx)(j.Z,{name:"warning-outlined",width:40,height:40,color:"red"}),(0,p.jsx)(_e.x,{type:"h3",weight:"semibold",color:"primary",children:"Are you sure you want to delete the action?"})]}),(0,p.jsxs)("div",{className:"flex justify-space-between",children:[(0,p.jsx)(ge.Z,{type:"default",onClick:t.onCancel,children:"Cancel"}),(0,p.jsx)(ge.Z,{type:"primary",onClick:t.onOk,children:"Delete Action"})]})]})}))},Ir="s_addActionBtn__6eF1w",Rr="s_cardsContainer__IpoxJ",Ur={hasActiveProposal:void 0,showCreateActionModal:!1,showDeleteActionModal:!1,selectedAction:void 0,submitting:!1},Br=function(){var e=(0,a.k6)(),t=I(),n=xe(),s=(0,U.Os)(),l=(0,Gt.L)().activeNetwork,c=Tt.Z.useForm(),u=(0,o.Z)(c,1)[0],h=(0,L.Z)(Ur),m=(0,o.Z)(h,2),x=m[0],f=m[1];function v(){return(v=(0,q.Z)((0,M.Z)().mark((function o(r){var a,s,c,d;return(0,M.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return f({submitting:!0}),o.prev=1,o.next=4,u.validateFields();case 4:return a=(0,i.Z)({title:r.title,description:r.description},r.actions.reduce((function(e,t){return t.targetAddress?(e.targets.push(t.targetAddress),t.addFunctionCall?(e.signatures.push(t.functionSignature),e.calldatas.push(t.functionEncodedParams||"0x")):(e.signatures.push(""),e.calldatas.push("0x")),t.addValueAttribute?e.values.push(t.actionValue):e.values.push("0"),e):e}),{targets:[],signatures:[],calldatas:[],values:[]})),s="".concat(l.explorer.apiUrl,"/api?module=gastracker&action=gasoracle&apikey=").concat(l.explorer.key),o.next=8,fetch(s).then((function(e){return e.json()})).then((function(e){return e.result})).then((function(e){return{veryFast:Number(e.FastGasPrice),fast:Number(e.ProposeGasPrice),average:Math.round((Number(e.ProposeGasPrice)+Number(e.SafeGasPrice))/2),safeLow:Number(e.SafeGasPrice)}}));case 8:return c=o.sent,o.next=11,n.daoGovernance.propose(a.title,a.description,a.targets,a.values,a.signatures,a.calldatas,c.fast);case 11:return d=o.sent,o.next=14,(0,Bo.AE)((function(){return t.fetchProposal(d)}),{intervalBetweenAttempts:3e3,timeout:1/0});case 14:u.resetFields(),e.push("/governance/proposals/".concat(d)),o.next=21;break;case 18:o.prev=18,o.t0=o.catch(1),console.error(o.t0);case 21:f({submitting:!1});case 22:case"end":return o.stop()}}),o,null,[[1,18]])})))).apply(this,arguments)}if(r.useEffect((function(){n.actions.hasActiveProposal().then((function(e){f({hasActiveProposal:e})}))}),[s.account]),!s.initialized)return null;if(!s.isActive)return(0,p.jsx)(a.l_,{to:"/governance/proposals"});var g=void 0!==x.hasActiveProposal&&void 0!==n.actions.hasThreshold();if(void 0===n.isActive||!g)return null;var w=!1===x.hasActiveProposal&&!0===n.actions.hasThreshold();return n.isActive&&w?(0,p.jsxs)("div",{className:"container-limit",children:[(0,p.jsx)("div",{className:"mb-16",children:(0,p.jsxs)("button",{type:"button",onClick:function(){e.push("/governance/proposals")},className:"button-text",children:[(0,p.jsx)(j.Z,{name:"arrow-back",width:16,height:16,className:"mr-8",color:"inherit"}),"Proposals"]})}),(0,p.jsx)(_e.x,{type:"h1",weight:"bold",color:"primary",className:"mb-16",children:"Create Proposal"}),(0,p.jsxs)(Ut,{form:u,initialValues:{title:"",description:"",actions:[]},validateTrigger:["onSubmit","onChange"],onFinish:function(e){return v.apply(this,arguments)},children:[(0,p.jsxs)("div",{className:d()(Rr,"mb-40"),children:[(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("div",{className:"card-header",children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Proposal description"})}),(0,p.jsxs)("div",{className:"flex flow-row row-gap-24 p-24",children:[(0,p.jsx)(Ut.Item,{name:"title",label:"Title",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(_n,{placeholder:"Proposal title",disabled:x.submitting})}),(0,p.jsx)(Ut.Item,{name:"description",label:"Description",hint:"Be careful with the length of the description, this will eventually have to be stored on chain and the gas needed might make the proposal creation transaction more expensive.",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(Mo,{placeholder:"Please enter the goal of this proposal here",rows:6,disabled:x.submitting})})]})]}),(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("div",{className:"card-header",children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Actions"})}),(0,p.jsx)("div",{className:"p-24",children:(0,p.jsx)(Ut.List,{name:"actions",rules:[{validator:function(e,t){return 0===t.length?Promise.reject():Promise.resolve()},message:"At least one action is required!"},{validator:function(e,t){return t.length>10?Promise.reject():Promise.resolve()},message:"Maximum 10 actions are allowed!"}],children:function(e,t,n){var o=n.errors;return(0,p.jsxs)(p.Fragment,{children:[e.map((function(e,t){var n=u.getFieldValue(["actions",t]),o=n.targetAddress,r=n.functionSignature,a=n.functionEncodedParams;return(0,p.jsx)(Ut.Item,{noStyle:!0,children:(0,p.jsx)(Cr,{className:"mb-24",title:"Action ".concat(t+1),target:o,signature:r,callData:a,showSettings:!0,onDeleteAction:function(){f({showDeleteActionModal:!0,selectedAction:n})},onEditAction:function(){f({showCreateActionModal:!0,selectedAction:n})}})},e.key)})),e.length<10&&(0,p.jsx)(ge.Z,{type:"ghost",icon:(0,p.jsx)(j.Z,{name:"plus-circle-outlined",color:"inherit"}),disabled:x.submitting,className:Ir,onClick:function(){return f({showCreateActionModal:!0})},children:"Add new action"}),e.length>=10&&(0,p.jsx)(en,{type:"info",message:"Maximum 10 actions are allowed."}),(0,p.jsx)(Tt.Z.ErrorList,{errors:o})]})}})})]})]}),(0,p.jsx)("div",{children:(0,p.jsx)(ge.Z,{type:"primary",htmlType:"submit",size:"large",loading:x.submitting,children:"Create proposal"})})]}),x.showCreateActionModal&&(0,p.jsx)(Vr,{edit:void 0!==x.selectedAction,actions:u.getFieldValue("actions"),initialValues:x.selectedAction,onCancel:function(){return f({showCreateActionModal:!1,selectedAction:void 0})},onSubmit:function(e){var t=u.getFieldValue("actions");x.selectedAction?t=t.map((function(t){return t===x.selectedAction?e:t})):t.push(e),u.setFieldsValue({actions:t})}}),x.showDeleteActionModal&&(0,p.jsx)(Fr,{onCancel:function(){return f({showDeleteActionModal:!1,selectedAction:void 0})},onOk:function(){var e=x.selectedAction;e&&u.setFieldsValue({actions:u.getFieldValue("actions").filter((function(t){return t!==e}))}),f({showDeleteActionModal:!1,selectedAction:void 0})}})]}):(0,p.jsx)(a.l_,{to:"/governance/proposals"})},Or=n(676),Lr={minThreshold:1},Mr=r.createContext((0,A.L)("ProposalProvider"));function qr(){return r.useContext(Mr)}var Gr=function(e){var t=e.proposalId,n=e.children,s=(0,a.k6)(),l=(0,U.Os)(),c=I(),d=xe(),u=(0,Pe.O)(),h=(0,o.Z)(u,2),m=h[0],x=h[1],f=(0,L.Z)(Lr),v=(0,o.Z)(f,2),g=v[0],j=v[1];return r.useEffect((function(){t?c.fetchProposal(t).then((function(e){j({proposal:e})})).catch((function(e){404===e?Or.Z.error({message:"Proposal with id=".concat(t," doesn't exist.")}):Or.Z.error({message:"Failed to fetch proposal with id=".concat(t,". (Status: ").concat(e,")")}),s.push("/governance/proposals")})):j({proposal:void 0})}),[t,x]),r.useEffect((function(){if(j({forRate:void 0,againstRate:void 0,quorum:void 0,isCanceled:void 0}),g.proposal){var e=g.proposal,t=e.forVotes,n=e.againstVotes,o=e.createTime,r=e.warmUpDuration,a=t.plus(n),i=0,s=0;a.gt(y().ZERO)&&(i=t.multipliedBy(100).div(a).toNumber(),s=n.multipliedBy(100).div(a).toNumber()),j({forRate:i,againstRate:s}),d.daoBarn.getBondStakedAtTs(o+r).then((function(e){var t;null!==e&&void 0!==e&&e.gt(y().ZERO)&&(t=a.multipliedBy(100).div(e).toNumber()),j({quorum:t})})),d.daoGovernance.getAbrogationProposals(g.proposal.proposalId).then((function(e){e&&j({isCanceled:e.createTime>0})}))}}),[g.proposal]),r.useEffect((function(){j({thresholdRate:void 0});var e=d.daoBarn.bondStaked;if(g.proposal&&e&&!e.isEqualTo(y().ZERO)){var t=g.proposal.proposer;d.daoBarn.getVotingPower(t).then((function(t){t&&j({thresholdRate:t.div(e).multipliedBy(100).toNumber()})}))}}),[g.proposal,d.daoBarn.bondStaked]),r.useEffect((function(){if(j({receipt:void 0,votingPower:void 0}),g.proposal&&l.isActive){var e=g.proposal,t=e.createTime,n=e.warmUpDuration;d.daoGovernance.getReceipt(g.proposal.proposalId,l.account).then((function(e){j({receipt:e})})),d.daoBarn.getVotingPowerAtTs(l.account,t+n).then((function(e){j({votingPower:e})}))}}),[g.proposal,l.account]),(0,p.jsx)(Mr.Provider,{value:(0,i.Z)((0,i.Z)({},g),{},{reload:m,cancelProposal:function(){return t?d.daoGovernance.cancelProposal(t).then((function(){return m()})):Promise.reject()},queueProposalForExecution:function(e){return t?d.daoGovernance.queue(t,e).then((function(){return m()})):Promise.reject()},executeProposal:function(){return t?d.daoGovernance.execute(t).then((function(){return m()})):Promise.reject()},proposalCastVote:function(e,n){return t?d.daoGovernance.castVote(t,e,n).then((function(){return m()})):Promise.reject()},proposalCancelVote:function(e){return t?d.daoGovernance.cancelVote(t,e).then((function(){return m()})):Promise.reject()},startAbrogationProposal:function(e,n){return t?d.daoGovernance.startAbrogationProposal(t,e,n).then((function(){return m()})):Promise.reject()}}),children:n})},Wr={acceptanceThreshold:50},Yr=r.createContext((0,A.L)("AbrogationProvider"));function zr(){return r.useContext(Yr)}var Qr=function(e){var t=e.children,n=(0,a.k6)(),s=(0,Pe.O)(),l=(0,o.Z)(s,2),c=l[0],d=l[1],u=(0,U.Os)(),h=I(),m=xe(),x=qr().proposal,f=(0,L.Z)(Wr),v=(0,o.Z)(f,2),g=v[0],j=v[1];return r.useEffect((function(){x?h.fetchAbrogation(x.proposalId).then((function(e){j({abrogation:e})})).catch((function(e){404===e?Or.Z.error({message:"Proposal with id=".concat(x.proposalId," doesn't exist.")}):Or.Z.error({message:"Failed to fetch proposal with id=".concat(x.proposalId,". (Status: ").concat(e,")")}),n.push("/governance/proposals/".concat(x.proposalId))})):j({abrogation:void 0})}),[x,d]),r.useEffect((function(){if(j({forRate:void 0,againstRate:void 0}),g.abrogation){var e=g.abrogation,t=e.forVotes,n=e.againstVotes,o=e.createTime,r=t.plus(n),a=0,i=0;r.gt(y().ZERO)&&(a=t.multipliedBy(100).div(r).toNumber(),i=n.multipliedBy(100).div(r).toNumber()),j({forRate:a,againstRate:i}),m.daoBarn.getBondStakedAtTs(o-1).then((function(e){var n;null!==e&&void 0!==e&&e.gt(y().ZERO)&&(n=t.multipliedBy(100).div(e).toNumber(),n=Math.min(n,100)),j({approvalRate:n})}))}}),[g.abrogation]),r.useEffect((function(){if(j({approvalRate:void 0}),g.abrogation&&u.account){var e=g.abrogation,t=e.proposalId,n=e.createTime;m.daoBarn.getVotingPowerAtTs(u.account,n-1).then((function(e){j({votingPower:e})})),m.daoGovernance.getAbrogationProposalReceipt(t,u.account).then((function(e){j({receipt:e})}))}}),[g.abrogation,u.account]),(0,p.jsx)(Yr.Provider,{value:(0,i.Z)((0,i.Z)({},g),{},{reload:c,abrogationProposalCastVote:function(e,t){return null!==x&&void 0!==x&&x.proposalId?m.daoGovernance.abrogationProposalCastVote(null===x||void 0===x?void 0:x.proposalId,e,t).then((function(){return c()})):Promise.reject()},abrogationProposalCancelVote:function(e){return null!==x&&void 0!==x&&x.proposalId?m.daoGovernance.abrogationProposalCancelVote(null===x||void 0===x?void 0:x.proposalId,e).then((function(){return c()})):Promise.reject()}}),children:t})},Hr=function(){var e,t,n,o=zr(),r=(null!==(e=o.approvalRate)&&void 0!==e?e:0)>=(null!==(t=o.acceptanceThreshold)&&void 0!==t?t:0);return(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("div",{className:"card-header",children:(0,p.jsx)(_e.k,{text:"Approval is the percentage of votes on a proposal that the total support must be greater than for the proposal to be approved. For example, if \u201cApproval\u201d is set to 51%, then more than 51% of the votes on a proposal must vote \u201cYes\u201d for the proposal to pass.",children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Abrogation proposal approval"})})}),(0,p.jsxs)(g.Z,{className:"p-24",flow:"row",gap:16,children:[(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsxs)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:[null===(n=o.approvalRate)||void 0===n?void 0:n.toFixed(2),"%"]}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["(> ",o.acceptanceThreshold,"% required)"]})]}),(0,p.jsx)(ot,{percent:o.approvalRate,acceptance:o.acceptanceThreshold,strokeColor:r?"var(--theme-green-color)":"var(--theme-red-color)",trailColor:r?"rgba(var(--theme-green-color-rgb), .16)":"rgba(var(--theme-red-color-rgb), .16)"})]})]})},Kr=function(){var e,t,n,o,r=zr();return(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("div",{className:"card-header",children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Details"})}),(0,p.jsx)(g.Z,{flow:"col",gap:32,justify:"space-between",padding:24,children:(0,p.jsx)(g.Z,{flow:"col",gap:32,children:(0,p.jsxs)(g.Z,{flow:"row",gap:4,children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Created by"}),(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsx)(ct.Z,{address:null===(e=r.abrogation)||void 0===e?void 0:e.caller,width:24,height:24}),(0,p.jsx)(v.S,{address:null===(t=r.abrogation)||void 0===t?void 0:t.caller,children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"blue",children:(0,k.eI)(null===(n=r.abrogation)||void 0===n?void 0:n.caller)})})]})]})})}),(0,p.jsx)(ye,{}),(0,p.jsxs)(g.Z,{flow:"row",gap:16,padding:24,children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Description"}),(0,p.jsx)(_e.x,{type:"p1",color:"primary",wrap:!0,children:null===(o=r.abrogation)||void 0===o?void 0:o.description})]})]})},Xr={votes:[],total:0,page:1,pageSize:10,loading:!1,supportFilter:void 0},Jr=r.createContext((0,A.L)("AbrogationVotersProvider"));var $r=function(e){var t=e.children,n=I(),a=zr().abrogation,s=(0,L.Z)(Xr),l=(0,o.Z)(s,2),c=l[0],d=l[1];return r.useEffect((function(){a?(d({loading:!0}),n.fetchAbrogationVoters(a.proposalId,c.page,c.pageSize,c.supportFilter).then((function(e){d({loading:!1,votes:e.data,total:e.meta.count})})).catch((function(){d({loading:!1,votes:[]})}))):d({votes:[],total:0})}),[a,c.page,c.supportFilter]),(0,p.jsx)(Jr.Provider,{value:(0,i.Z)((0,i.Z)({},c),{},{changeSupportFilter:function(e){d({supportFilter:e,page:1})},changePage:function(e){d({page:e})}}),children:t})},ea="s_component__Ul8Ji",ta="s_tabs__F83+x",na="s_table__IbRMz",oa="s_powerCell__9rgLi",ra="s_forTag__7frdM",aa="s_againstTag__LYEIM",ia=[{title:"Address",dataIndex:"address",width:"35%",render:function(e){return(0,p.jsxs)(g.Z,{flow:"col",gap:8,align:"center",children:[(0,p.jsx)(ct.Z,{address:e,width:32,height:32}),(0,p.jsx)(v.S,{address:e,children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"blue",children:(0,k.eI)(e)})})]})}},{title:"Votes",dataIndex:"power",width:"38%",align:"right",render:function(e){return(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",className:oa,children:(0,k.Ib)(e,0)})}},{title:"Vote type",dataIndex:"support",width:"27%",render:function(e){return e?(0,p.jsx)(_e.x,{type:"lb2",weight:"semibold",className:ra,children:"For"}):(0,p.jsx)(_e.x,{type:"lb2",weight:"semibold",className:aa,children:"Against"})}}],sa=function(e){var t=Object.assign({},((0,Dr.Z)(e),e)),n=r.useContext(Jr);return(0,p.jsxs)(Fe.Z,(0,i.Z)((0,i.Z)({className:ea,width:620},t),{},{children:[(0,p.jsxs)(f,{className:ta,defaultActiveKey:"all",onChange:function(e){"for"===e?n.changeSupportFilter(!0):"against"===e?n.changeSupportFilter(!1):n.changeSupportFilter(void 0)},children:[(0,p.jsx)(f.Tab,{tab:"All Votes"},"all"),(0,p.jsx)(f.Tab,{tab:"For"},"for"),(0,p.jsx)(f.Tab,{tab:"Against"},"against")]}),(0,p.jsx)(lt,{className:na,columns:ia,dataSource:n.votes,rowKey:"address",loading:n.loading,locale:{emptyText:"No votes"},pagination:{total:n.total,current:n.page,pageSize:n.pageSize,position:["bottomRight"],showTotal:function(e,t){var n=(0,o.Z)(t,2),r=n[0],a=n[1];return(0,p.jsxs)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:["Showing ",r," to ",a," out of ",e," votes"]})},onChange:function(e){n.changePage(e)}}})]}))},la=function(e){return(0,p.jsx)($r,{children:(0,p.jsx)(sa,(0,i.Z)({},e))})},ca=function(){var e,t,n,a,i,s=zr(),l=r.useState(!1),c=(0,o.Z)(l,2),d=c[0],u=c[1];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"card",children:[(0,p.jsxs)("div",{className:"card-header flex justify-space-between",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Vote results"}),(0,p.jsx)(ge.Z,{type:"link",onClick:function(){return u(!0)},children:"View voters"})]}),(0,p.jsxs)(g.Z,{className:"card-row p-24",flow:"row",children:[(0,p.jsxs)(g.Z,{flow:"col",justify:"space-between",children:[(0,p.jsxs)(g.Z,{flow:"row",gap:4,children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"For"}),(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:null===(e=s.abrogation)||void 0===e?void 0:e.forVotes.toFormat(2)}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["(",null===(t=s.forRate)||void 0===t?void 0:t.toFixed(2),"%)"]})]})]}),(0,p.jsxs)(g.Z,{flow:"row",gap:4,align:"end",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",align:"right",children:"Against"}),(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:null===(n=s.abrogation)||void 0===n?void 0:n.againstVotes.toFormat(2)}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["(",null===(a=s.againstRate)||void 0===a?void 0:a.toFixed(2),"%)"]})]})]})]}),(0,p.jsx)(ot,{percent:s.forRate,strokeColor:"var(--theme-green-color)",trailColor:"var(--theme-red-color)"})]}),(0,p.jsx)(g.Z,{className:"card-row p-24",flow:"row",children:(0,p.jsxs)(g.Z,{flow:"col",justify:"space-between",children:[(0,p.jsx)("div",{}),(0,p.jsxs)(g.Z,{flow:"row",gap:4,align:"end",children:[(0,p.jsx)(_e.k,{text:"Approval is the percentage of votes on a proposal that the total support must be greater than for the proposal to be approved. For example, if \u201cApproval\u201d is set to 51%, then more than 51% of the votes on a proposal must vote \u201cYes\u201d for the proposal to pass.",children:(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",align:"right",children:"Approval"})}),(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsxs)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:[null===(i=s.forRate)||void 0===i?void 0:i.toFixed(2),"%"]}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["(> ",s.acceptanceThreshold,"% required)"]})]})]})]})})]}),d&&(0,p.jsx)(la,{onCancel:function(){return u(!1)}})]})},da="s_component__Sn2AL",ua="s_row__+49gk",pa="s_changeGroup__kWoBi",ha="s_actionBtn__0sxS5",ma=["voteState"],xa=function(e){return e[e.None=0]="None",e[e.VoteInitiate=1]="VoteInitiate",e[e.VoteFor=2]="VoteFor",e[e.VoteAgainst=3]="VoteAgainst",e[e.VoteChange=4]="VoteChange",e[e.VoteCancel=5]="VoteCancel",e}({}),fa={changeOption:void 0,description:void 0,gasPrice:void 0},va={submitting:!1},ga=function(e){var t,n,a,l,c=e.voteState,d=(0,s.Z)(e,ma),u=qr(),h=zr(),m=(0,L.Z)(va),x=(0,o.Z)(m,2),f=x[0],v=x[1],j=Tt.Z.useForm(),w=(0,o.Z)(j,1)[0];function b(){return(b=(0,q.Z)((0,M.Z)().mark((function t(n){var o,r,a;return(0,M.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c===xa.VoteInitiate||h.abrogation){t.next=2;break}return t.abrupt("return");case 2:if(o=n.gasPrice){t.next=5;break}return t.abrupt("return");case 5:return v({submitting:!0}),t.prev=6,t.next=9,w.validateFields();case 9:if(c!==xa.VoteInitiate){t.next=14;break}return t.next=12,u.startAbrogationProposal(null!==(a=n.description)&&void 0!==a?a:"",o.value);case 12:t.next=32;break;case 14:if(c!==xa.VoteFor){t.next=19;break}return t.next=17,h.abrogationProposalCastVote(!0,o.value);case 17:t.next=32;break;case 19:if(c!==xa.VoteAgainst){t.next=24;break}return t.next=22,h.abrogationProposalCastVote(!1,o.value);case 22:t.next=32;break;case 24:if(c!==xa.VoteChange){t.next=29;break}return t.next=27,h.abrogationProposalCastVote(!0===n.changeOption,o.value);case 27:t.next=32;break;case 29:if(c!==xa.VoteCancel){t.next=32;break}return t.next=32,h.abrogationProposalCancelVote(o.value);case 32:null===(r=e.onCancel)||void 0===r||r.call(e),t.next=37;break;case 35:t.prev=35,t.t0=t.catch(6);case 37:v({submitting:!1});case 38:case"end":return t.stop()}}),t,null,[[6,35]])})))).apply(this,arguments)}return r.useEffect((function(){var e;c===xa.VoteChange&&w.setFieldsValue({changeOption:null===(e=h.receipt)||void 0===e?void 0:e.support})}),[c,h.receipt]),(0,p.jsx)(Fe.Z,(0,i.Z)((0,i.Z)({className:da,width:560,title:(0,p.jsxs)(p.Fragment,{children:[c===xa.VoteInitiate&&"Initiate abrogation proposal",c===xa.VoteFor&&"Confirm your vote",c===xa.VoteAgainst&&"Confirm your vote",c===xa.VoteChange&&"Change your vote",c===xa.VoteCancel&&"Cancel your vote"]})},d),{},{children:(0,p.jsxs)(Ut,{form:w,initialValues:fa,validateTrigger:["onSubmit","onChange"],onFinish:function(e){return b.apply(this,arguments)},children:[c===xa.VoteInitiate&&(0,p.jsx)(g.Z,{flow:"row",gap:16,padding:32,children:(0,p.jsx)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:null===(t=u.proposal)||void 0===t?void 0:t.title})}),c!==xa.VoteInitiate&&(0,p.jsxs)(g.Z,{flow:"row",gap:16,className:ua,children:[(0,p.jsxs)(g.Z,{flow:"col",gap:8,align:"center",children:[(0,p.jsx)(_e.x,{type:"h2",weight:"bold",color:"primary",children:(0,k.Ib)(u.votingPower,2)}),(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"secondary",children:"Votes"})]}),(c===xa.VoteFor||c===xa.VoteAgainst)&&(0,p.jsxs)(g.Z,{flow:"row",gap:8,children:[(0,p.jsxs)(_e.x,{type:"p2",color:"secondary",children:["You are about to vote ",c===xa.VoteFor?"FOR":"AGAINST"," the abrogation proposal for"]}),(0,p.jsxs)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:["\u201c",null===(n=u.proposal)||void 0===n?void 0:n.title,"\u201d"]}),(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"You can change your vote later."})]}),c===xa.VoteChange&&(0,p.jsxs)(g.Z,{flow:"row",gap:8,children:[(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"You are about to change your vote on the abrogation proposal for"}),(0,p.jsxs)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:["\u201c",null===(a=u.proposal)||void 0===a?void 0:a.title,"\u201d"]}),(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"Are you sure you want to continue? You can change your vote again later."})]}),c===xa.VoteCancel&&(0,p.jsxs)(g.Z,{flow:"row",gap:8,children:[(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"You are about to cancel your vote on the abrogation proposal for"}),(0,p.jsxs)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:["\u201c",null===(l=u.proposal)||void 0===l?void 0:l.title,"&dquo;"]}),(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"Are you sure you want to continue? You can change your vote again later."})]})]}),(0,p.jsx)(ye,{}),(0,p.jsxs)(g.Z,{flow:"row",gap:32,className:ua,children:[c===xa.VoteInitiate&&(0,p.jsx)(Ut.Item,{name:"description",label:"Description",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(Mo,{placeholder:"Placeholder",rows:4,disabled:f.submitting})}),c===xa.VoteChange&&(0,p.jsx)(Ut.Item,{name:"changeOption",label:"Vote",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(Bt.default.Group,{className:pa,disabled:f.submitting,children:(0,p.jsxs)(g.Z,{gap:16,colsTemplate:"1fr 1fr",children:[(0,p.jsx)(qt,{label:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"For"}),value:!0}),(0,p.jsx)(qt,{label:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Against"}),value:!1})]})})}),(0,p.jsx)(Ut.Item,{name:"gasPrice",label:"Gas Fee (Gwei)",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(zt,{disabled:f.submitting})}),(0,p.jsx)(Ut.Item,{shouldUpdate:!0,children:function(e){var t,n=(0,e.getFieldsValue)().changeOption,o=!1;c===xa.VoteChange&&((null===(t=h.receipt)||void 0===t?void 0:t.support)===n&&(o=!0));return(0,p.jsxs)(ge.Z,{htmlType:"submit",type:"primary",loading:f.submitting,disabled:o,className:ha,children:[c===xa.VoteInitiate&&"Initiate abrogation proposal",c===xa.VoteFor&&"Vote for abrogation proposal",c===xa.VoteAgainst&&"Vote against abrogation proposal",c===xa.VoteChange&&!0===n&&"Vote for abrogation proposal",c===xa.VoteChange&&!1===n&&"Vote against abrogation proposal",c===xa.VoteCancel&&"Cancel abrogation vote"]})}})]})]})}))},ja={showVotersModal:!1,showVoteModal:!1,voteState:xa.None},wa=function(){var e,t,n,r,a,i,s=zr(),l=(0,L.Z)(ja),c=(0,o.Z)(l,2),d=c[0],u=c[1];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"card",children:[(0,p.jsxs)("div",{className:"card-header flex justify-space-between",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Abrogation proposal votes"}),(0,p.jsx)(ge.Z,{type:"link",onClick:function(){u({showVotersModal:!0})},children:"View voters"})]}),(0,p.jsxs)(g.Z,{className:"card-row p-24",flow:"row",gap:32,children:[(0,p.jsxs)(g.Z,{flow:"row",gap:16,children:[(0,p.jsxs)(g.Z,{flow:"col",justify:"space-between",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"For"}),(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:null===(e=s.abrogation)||void 0===e?void 0:e.forVotes.toFormat(2)}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["(",null===(t=s.forRate)||void 0===t?void 0:t.toFixed(2),"%)"]})]})]}),(0,p.jsx)(ot,{percent:s.forRate,strokeColor:"var(--theme-green-color)",trailColor:"rgba(var(--theme-green-color-rgb), .16)"})]}),(0,p.jsxs)(g.Z,{flow:"row",gap:16,children:[(0,p.jsxs)(g.Z,{flow:"col",justify:"space-between",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Against"}),(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:null===(n=s.abrogation)||void 0===n?void 0:n.againstVotes.toFormat(2)}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["(",null===(r=s.againstRate)||void 0===r?void 0:r.toFixed(2),"%)"]})]})]}),(0,p.jsx)(ot,{percent:s.againstRate,strokeColor:"var(--theme-red-color)",trailColor:"rgba(var(--theme-red-color-rgb), .16)"})]})]}),(0,p.jsxs)(g.Z,{className:"card-row p-24",flow:"row",gap:24,children:[(0,p.jsxs)(g.Z,{flow:"row",gap:8,children:[(0,p.jsx)(_e.x,{type:"p1",color:"secondary",children:"Your voting power for this proposal"}),(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:(0,k.Ib)(s.votingPower,2)})]}),(0,p.jsx)(g.Z,{flow:"row",gap:24,children:null!==(a=s.receipt)&&void 0!==a&&a.hasVoted?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(en,{message:"You already voted ".concat(null!==(i=s.receipt)&&void 0!==i&&i.support?"FOR":"AGAINST"," the proposal abrogation")}),(0,p.jsxs)(g.Z,{flow:"col",gap:24,colsTemplate:"1fr 1fr",children:[(0,p.jsx)(ge.Z,{type:"primary",onClick:function(){u({showVoteModal:!0,voteState:xa.VoteChange})},children:"Change vote"}),(0,p.jsx)(ge.Z,{type:"default",onClick:function(){u({showVoteModal:!0,voteState:xa.VoteCancel})},children:"Cancel vote"})]})]}):(0,p.jsxs)(g.Z,{gap:24,colsTemplate:"1fr 1fr",children:[(0,p.jsx)(ge.Z,{type:"primary",onClick:function(){u({showVoteModal:!0,voteState:xa.VoteFor})},children:"Vote for"}),(0,p.jsx)(ge.Z,{type:"default",onClick:function(){u({showVoteModal:!0,voteState:xa.VoteAgainst})},children:"Vote against"})]})})]})]}),d.showVotersModal&&(0,p.jsx)(la,{onCancel:function(){u({showVotersModal:!1})}}),d.showVoteModal&&(0,p.jsx)(ga,{voteState:d.voteState,onCancel:function(){u({showVoteModal:!1,voteState:xa.None})}})]})},ba="s_component__FMjw3",ya=function(e){var t,n,o,r,a=qr();return(0,p.jsx)(Fe.Z,(0,i.Z)((0,i.Z)({className:ba},e),{},{children:(0,p.jsxs)(g.Z,{flow:"row",gap:16,align:"center",children:[(0,p.jsxs)(g.Z,{flow:"col",gap:8,align:"start",width:1070,children:[(0,p.jsx)(j.Z,{name:"warning-outlined"}),(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"red",children:"Abrogation proposal"})]}),(0,p.jsxs)(g.Z,{flow:"row",gap:64,align:"center",children:[(0,p.jsx)(g.Z,{flow:"col",gap:32,colsTemplate:"1fr 1fr",width:1070,children:(0,p.jsxs)(_e.x,{type:"h2",weight:"semibold",color:"primary",children:["PID-",null===(t=a.proposal)||void 0===t?void 0:t.proposalId,": ",null===(n=a.proposal)||void 0===n?void 0:n.title]})}),(0,p.jsxs)(g.Z,{flow:"col",gap:32,colsTemplate:"minmax(0, 610px) minmax(0, 428px)",width:1070,children:[(0,p.jsxs)(g.Z,{flow:"row",gap:32,children:[(null===(o=a.proposal)||void 0===o?void 0:o.state)!==E.QUEUED&&(0,p.jsx)(ca,{}),(0,p.jsx)(Kr,{})]}),(0,p.jsx)(g.Z,{flow:"row",gap:32,children:(null===(r=a.proposal)||void 0===r?void 0:r.state)===E.QUEUED&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(wa,{}),(0,p.jsx)(Hr,{})]})})]})]})]})}))},Za=function(e){return(0,p.jsx)(Qr,{children:(0,p.jsx)(ya,(0,i.Z)({},e))})},ka={abrogationVoteModal:!1,abrogationViewModal:!1,showWhyReason:!1,cancelling:!1},Na=function(){var e,t=xe(),n=qr(),r=(0,L.Z)(ka),a=(0,o.Z)(r,2),i=a[0],s=a[1],l=!!t.thresholdRate&&t.thresholdRate>=t.minThreshold;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("div",{className:"card-header",children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Abrogation proposal"})}),(0,p.jsxs)("div",{className:"p-24",children:[void 0===n.isCanceled&&(0,p.jsx)(g.Z,{flow:"col",justify:"center",children:(0,p.jsx)(Ot.default,{spinning:!0})}),!1===n.isCanceled&&(0,p.jsxs)(g.Z,{flow:"row",gap:24,children:[(0,p.jsx)(_e.x,{type:"p1",color:"primary",children:"This is a special type of proposal, with the following thresholds:"}),(0,p.jsxs)("ul",{children:[(0,p.jsx)("li",{children:(0,p.jsx)(_e.x,{type:"p1",color:"primary",children:"Acceptance criteria: 50% of staked SWINGBY"})}),(0,p.jsx)("li",{children:(0,p.jsx)(_e.x,{type:"p1",color:"primary",children:"A proposal can only have one associated abrogation proposal at any given time"})}),(0,p.jsx)("li",{children:(0,p.jsx)(_e.x,{type:"p1",color:"primary",children:"Anyone can vote on these proposals"})}),(0,p.jsx)("li",{children:(0,p.jsx)(_e.x,{type:"p1",color:"primary",children:"There is a new snapshot for voter balances - taken at Abrogation Proposal\u2019s start time"})}),(0,p.jsx)("li",{children:(0,p.jsx)(_e.x,{type:"p1",color:"primary",children:"Abrogation Proposal\u2019s duration is never greater than the Initial Proposal\u2019s queue period"})}),(0,p.jsx)("li",{children:(0,p.jsx)(_e.x,{type:"p1",color:"primary",children:"When someone goes to execute the Initial Proposal - there is a check if an Abrogation Proposal that met its acceptance criteria exists"})})]}),(0,p.jsxs)(g.Z,{flow:"row",gap:8,align:"center",justify:"end",children:[(0,p.jsx)(ge.Z,{type:"default",loading:i.cancelling,disabled:!l,onClick:function(){return s({abrogationVoteModal:!0})},children:"Initiate abrogation proposal"}),!l&&(0,p.jsxs)(g.Z,{flow:"col",gap:8,align:"center",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"You are not able to abrogate proposal."}),(0,p.jsx)(sr.Z,{title:"Why you can\u2019t abrogate proposal",placement:"bottomLeft",overlayStyle:{width:520},content:(0,p.jsxs)(_e.x,{type:"p2",weight:"semibold",children:["You don\u2019t have enough voting power to create an abrogation proposal. The creator of an abrogation proposal needs to have a voting power of at least ",t.minThreshold,"% of the amount of $BOND staked in the DAO."]}),visible:i.showWhyReason,onVisibleChange:function(e){return s({showWhyReason:e})},children:(0,p.jsx)(ge.Z,{type:"link",children:"See why"})})]})]})]}),!0===n.isCanceled&&(0,p.jsxs)(g.Z,{flow:"row",gap:24,children:[(null===(e=n.proposal)||void 0===e?void 0:e.state)===E.QUEUED&&(0,p.jsx)(_e.x,{type:"p1",color:"primary",children:"Abrogation proposal currently in progress."}),(0,p.jsx)(ge.Z,{type:"primary",onClick:function(){return s({abrogationViewModal:!0})},children:"View abrogation proposal"})]})]})]}),i.abrogationVoteModal&&(0,p.jsx)(ga,{voteState:xa.VoteInitiate,onCancel:function(){return s({abrogationVoteModal:!1})}}),i.abrogationViewModal&&(0,p.jsx)(Za,{onCancel:function(){return s({abrogationViewModal:!1})}})]})},Aa=function(){var e,t,n,o,r,a,i=qr(),s=(null!==(e=i.forRate)&&void 0!==e?e:0)>=(null!==(t=null===(n=i.proposal)||void 0===n?void 0:n.acceptanceThreshold)&&void 0!==t?t:0);return(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("div",{className:"card-header",children:(0,p.jsx)(_e.k,{text:"Approval is the percentage of votes on a proposal that the total support must be greater than for the proposal to be approved. For example, if \u201cApproval\u201d is set to 51%, then more than 51% of the votes on a proposal must vote \u201cYes\u201d for the proposal to pass.",children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Approval"})})}),(0,p.jsxs)(g.Z,{className:"p-24",flow:"row",gap:16,children:[(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsxs)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:[null===(o=i.forRate)||void 0===o?void 0:o.toFixed(2),"%"]}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["(> ",null===(r=i.proposal)||void 0===r?void 0:r.acceptanceThreshold,"% required)"]})]}),(0,p.jsx)(ot,{percent:i.forRate,acceptance:null===(a=i.proposal)||void 0===a?void 0:a.acceptanceThreshold,strokeColor:s?"var(--theme-green-color)":"var(--theme-red-color)",trailColor:s?"rgba(var(--theme-green-color-rgb), .16)":"rgba(var(--theme-red-color-rgb), .16)"})]})]})},Ca={cancelling:!1},_a=function(){var e,t,n,a=(0,U.Os)(),s=qr(),l=s.proposal,c=s.thresholdRate,d=s.minThreshold,u=r.useState(Ca),h=(0,o.Z)(u,2),m=h[0],x=h[1],f=(null===l||void 0===l?void 0:l.proposer)===a.account,w=void 0!==c&&c<d,b=[E.WARMUP,E.ACTIVE].includes(null===l||void 0===l?void 0:l.state)&&(f||w);return(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("div",{className:"card-header",children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Details"})}),(0,p.jsxs)("div",{className:"card-row flexbox-list p-24",style:{"--gap":"32px"},children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",className:"mb-4",children:"Created by"}),(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsx)(ct.Z,{address:null===(e=s.proposal)||void 0===e?void 0:e.proposer,width:24,height:24}),(0,p.jsx)(v.S,{address:null===(t=s.proposal)||void 0===t?void 0:t.proposer,children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"blue",children:(0,k.eI)(null===(n=s.proposal)||void 0===n?void 0:n.proposer)})})]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)(_e.k,{text:"If the creator\u2019s vSWINGBY balance falls below ".concat(d,"% of the total amount of $SWINGBY staked in the DAO the proposal can be cancelled by anyone."),children:(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",className:"mb-4",children:"Creator threshold"})}),(0,p.jsx)(g.Z,{flow:"col",gap:8,children:void 0!==c&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(j.Z,{name:w?"close-circle-outlined":"check-circle-outlined"}),(0,p.jsx)(Ae,{loading:void 0===l,children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:w?"Below 1%":"Above 1%"})})]})})]}),(0,p.jsx)("div",{children:b&&(0,p.jsx)(ge.Z,{type:"default",loading:m.cancelling,onClick:function(){x((function(e){return(0,i.Z)((0,i.Z)({},e),{},{cancelling:!0})})),s.cancelProposal().then((function(){x((function(e){return(0,i.Z)((0,i.Z)({},e),{},{cancelling:!1})}))})).catch((function(){x((function(e){return(0,i.Z)((0,i.Z)({},e),{},{cancelling:!1})}))}))},children:"Cancel proposal"})})]}),(0,p.jsxs)(g.Z,{className:"card-row p-24",flow:"row",gap:16,children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Description"}),(0,p.jsx)(_e.x,{type:"p1",color:"primary",wrap:!0,children:null===l||void 0===l?void 0:l.description})]}),(0,p.jsxs)(g.Z,{className:"card-row p-24",flow:"row",gap:16,children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Actions"}),null===l||void 0===l?void 0:l.targets.map((function(e,t){return(0,p.jsx)(Cr,{title:"Action ".concat(t+1),target:null===l||void 0===l?void 0:l.targets[t],signature:null===l||void 0===l?void 0:l.signatures[t],callData:null===l||void 0===l?void 0:l.calldatas[t]},t)}))]})]})},Sa=function(){var e,t,n,o,r,a,i=qr(),s=(null!==(e=i.quorum)&&void 0!==e?e:0)>=(null!==(t=null===(n=i.proposal)||void 0===n?void 0:n.minQuorum)&&void 0!==t?t:0);return(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("div",{className:"card-header",children:(0,p.jsx)(_e.k,{text:"Quorum is the percentage of the amount of tokens staked in the DAO that support for a proposal must be greater than for the proposal to be considered valid. For example, if the Quorum % is set to 20%, then more than 20% of the amount of tokens staked in the DAO must vote to approve a proposal for the vote to be considered valid.",children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Quorum"})})}),(0,p.jsxs)(g.Z,{className:"p-24",flow:"row",gap:16,children:[(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsxs)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:[null===(o=i.quorum)||void 0===o?void 0:o.toFixed(2),"%"]}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["(> ",null===(r=i.proposal)||void 0===r?void 0:r.minQuorum,"% required)"]})]}),(0,p.jsx)(ot,{percent:i.quorum,acceptance:null===(a=i.proposal)||void 0===a?void 0:a.minQuorum,strokeColor:s?"var(--theme-green-color)":"var(--theme-red-color)",trailColor:s?"rgba(var(--theme-green-color-rgb), .16)":"rgba(var(--theme-red-color-rgb), .16)"})]})]})},Ta=n(15572),Pa=n(44615);function Ea(e,t){return[E.EXPIRED,E.FAILED,E.CANCELED,E.ABROGATED].includes(t)?(0,p.jsx)(j.Z,{name:"close-circle-outlined",width:40,height:40,color:"red"}):[E.CREATED,E.ACCEPTED,E.EXECUTED].includes(t)?(0,p.jsx)(j.Z,{name:"check-circle-outlined",width:40,height:40,color:"green"}):0===e?(0,p.jsx)(j.Z,{name:"history-circle-outlined",width:40,height:40,color:"blue"}):(0,p.jsx)(j.Z,{name:"check-circle-outlined",width:40,height:40,color:"green"})}function Va(e,t,n){var o=new Date(1e3*t),r=new Date;if([E.CREATED,E.EXPIRED,E.FAILED,E.CANCELED,E.EXECUTED,E.QUEUED,E.ACCEPTED,E.ABROGATED].includes(e))return(0,Ta.Z)(o,"dd MMM yyyy - HH:mm");if(n>0){var a=new Date(1e3*n);if(a<=r)return"Ended at ".concat((0,Ta.Z)(a,"dd MMM yyyy - HH:mm"));var i=(0,Pa.Z)(a,r,{addSuffix:!0,includeSeconds:!0});return"Ends ".concat(i)}var s=(0,Pa.Z)(o,r,{addSuffix:!0,includeSeconds:!0});return"Started ".concat(s)}var Da=function(){var e=qr(),t=e.proposal,n=e.reload;return t?(0,p.jsx)("div",{className:"card p-24",children:(0,p.jsx)(g.Z,{flow:"row",gap:24,children:t.history.map((function(e,t){return(0,p.jsxs)("div",{className:"flex col-gap-12 align-center",children:[Ea(t,e.name),(0,p.jsxs)("div",{className:"flex flow-row",children:[(0,p.jsxs)("div",{className:"flex align-center",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",className:"mr-8",children:D.get(e.name)}),e.txHash&&(0,p.jsx)(v.fT,{address:e.txHash,style:{height:"16px"},children:(0,p.jsx)(j.Z,{name:"link-outlined",width:16,height:16})})]}),(0,p.jsx)(Ve,{end:1e3*e.endTimestamp,delay:5e3,onEnd:function(){return n()},children:function(){return(0,p.jsx)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:Va(e.name,e.startTimestamp,e.endTimestamp)})}})]})]},e.name)}))})}):null},Fa={votes:[],total:0,page:1,pageSize:10,loading:!1,supportFilter:void 0},Ia=r.createContext((0,A.L)("ProposalVotersProvider"));var Ra=function(e){var t=e.children,n=I(),a=qr().proposal,s=(0,L.Z)(Fa),l=(0,o.Z)(s,2),c=l[0],d=l[1];return r.useEffect((function(){null!==a&&void 0!==a&&a.proposalId?(d({loading:!0}),n.fetchProposalVoters(a.proposalId,c.page,c.pageSize,c.supportFilter).then((function(e){d({loading:!1,votes:e.data,total:e.meta.count})})).catch((function(){d({loading:!1,votes:[]})}))):d({votes:[],total:0})}),[a,c.page,c.supportFilter]),(0,p.jsx)(Ia.Provider,{value:(0,i.Z)((0,i.Z)({},c),{},{changeSupportFilter:function(e){d({supportFilter:e,page:1})},changePage:function(e){d({page:e})}}),children:t})},Ua="s_component__xat8+",Ba="s_tabs__sMZ0E",Oa="s_table__epqF6",La="s_powerCell__fMX8u",Ma="s_forTag__clX1X",qa="s_againstTag__Lnxv+",Ga=[{title:"Address",dataIndex:"address",width:"35%",render:function(e){return(0,p.jsxs)(g.Z,{flow:"col",gap:8,align:"center",children:[(0,p.jsx)(ct.Z,{address:e,width:32,height:32}),(0,p.jsx)(v.S,{address:e,children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"blue",children:(0,k.eI)(e)})})]})}},{title:"Votes",dataIndex:"power",width:"38%",align:"right",render:function(e){return(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",className:La,children:(0,k.Ib)(e,2,"-",2)})}},{title:"Vote type",dataIndex:"support",width:"27%",render:function(e){return e?(0,p.jsx)(_e.x,{type:"lb2",weight:"semibold",className:Ma,children:"For"}):(0,p.jsx)(_e.x,{type:"lb2",weight:"semibold",className:qa,children:"Against"})}}],Wa=function(e){var t=Object.assign({},((0,Dr.Z)(e),e)),n=r.useContext(Ia);return(0,p.jsxs)(Fe.Z,(0,i.Z)((0,i.Z)({className:Ua,width:620},t),{},{children:[(0,p.jsxs)(f,{className:Ba,defaultActiveKey:"all",onChange:function(e){"for"===e?n.changeSupportFilter(!0):"against"===e?n.changeSupportFilter(!1):n.changeSupportFilter(void 0)},children:[(0,p.jsx)(f.Tab,{tab:"All Votes"},"all"),(0,p.jsx)(f.Tab,{tab:"For"},"for"),(0,p.jsx)(f.Tab,{tab:"Against"},"against")]}),(0,p.jsx)(lt,{className:Oa,columns:Ga,dataSource:n.votes,rowKey:"address",loading:n.loading,locale:{emptyText:"No votes"},pagination:{total:n.total,current:n.page,pageSize:n.pageSize,position:["bottomRight"],showTotal:function(e,t){var n=(0,o.Z)(t,2),r=n[0],a=n[1];return(0,p.jsxs)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:["Showing ",r," to ",a," out of ",e," votes"]})},onChange:function(e){n.changePage(e)}}})]}))},Ya=function(e){return(0,p.jsx)(Ra,{children:(0,p.jsx)(Wa,(0,i.Z)({},e))})},za=function(){var e,t,n,a,i,s,l,c,d=qr(),u=r.useState(!1),h=(0,o.Z)(u,2),m=h[0],x=h[1];return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"card",children:[(0,p.jsxs)("div",{className:"card-header flex justify-space-between",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Vote results"}),(0,p.jsx)(ge.Z,{type:"link",onClick:function(){return x(!0)},children:"View voters"})]}),(0,p.jsxs)(g.Z,{flow:"row",className:"card-row p-24",children:[(0,p.jsxs)(g.Z,{flow:"col",justify:"space-between",children:[(0,p.jsxs)(g.Z,{flow:"row",gap:4,children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"For"}),(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:null===(e=d.proposal)||void 0===e?void 0:e.forVotes.toFormat(2)}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["(",null===(t=d.forRate)||void 0===t?void 0:t.toFixed(2),"%)"]})]})]}),(0,p.jsxs)(g.Z,{flow:"row",gap:4,align:"end",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",align:"right",children:"Against"}),(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:null===(n=d.proposal)||void 0===n?void 0:n.againstVotes.toFormat(2)}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["(",null===(a=d.againstRate)||void 0===a?void 0:a.toFixed(),"%)"]})]})]})]}),(0,p.jsx)(ot,{percent:d.forRate,strokeColor:"var(--theme-green-color)",trailColor:"var(--theme-red-color)"})]}),(0,p.jsx)(g.Z,{flow:"row",className:"card-row p-24",children:(0,p.jsxs)(g.Z,{flow:"col",justify:"space-between",children:[(0,p.jsxs)(g.Z,{flow:"row",gap:4,children:[(0,p.jsx)(_e.k,{text:"Quorum is the percentage of the amount of tokens staked in the DAO that support for a proposal must be greater than for the proposal to be considered valid. For example, if the Quorum % is set to 20%, then more than 20% of the amount of tokens staked in the DAO must vote to approve a proposal for the vote to be considered valid.",children:(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"Quorum"})}),(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsxs)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:[null===(i=d.quorum)||void 0===i?void 0:i.toFixed(2),"%"]}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["(> ",null===(s=d.proposal)||void 0===s?void 0:s.minQuorum,"% required)"]})]})]}),(0,p.jsxs)(g.Z,{flow:"row",gap:4,align:"end",children:[(0,p.jsx)(_e.k,{text:"Approval is the percentage of votes on a proposal that the total support must be greater than for the proposal to be approved. For example, if \u201cApproval\u201d is set to 51%, then more than 51% of the votes on a proposal must vote \u201cYes\u201d for the proposal to pass.",children:(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",align:"right",children:"Approval"})}),(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsxs)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:[null===(l=d.forRate)||void 0===l?void 0:l.toFixed(2),"%"]}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["(> ",null===(c=d.proposal)||void 0===c?void 0:c.acceptanceThreshold,"% required)"]})]})]})]})})]}),m&&(0,p.jsx)(Ya,{onCancel:function(){return x(!1)}})]})},Qa="s_component__Jo2uw",Ha="s_row__AIhCm",Ka="s_changeGroup__+gzlh",Xa="s_actionBtn__Z81Kz",Ja=["voteState"],$a=function(e){return e[e.None=0]="None",e[e.VoteFor=1]="VoteFor",e[e.VoteAgainst=2]="VoteAgainst",e[e.VoteChange=3]="VoteChange",e[e.VoteCancel=4]="VoteCancel",e}({}),ei={changeOption:void 0,gasPrice:void 0},ti={submitting:!1},ni=function(e){var t,n,a,l=e.voteState,c=(0,s.Z)(e,Ja),d=Tt.Z.useForm(),u=(0,o.Z)(d,1)[0],h=qr(),m=(0,L.Z)(ti),x=(0,o.Z)(m,2),f=x[0],v=x[1];function j(){return(j=(0,q.Z)((0,M.Z)().mark((function t(n){var o,r;return(0,M.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.gasPrice,h.proposal&&o){t.next=3;break}return t.abrupt("return");case 3:return v({submitting:!0}),t.prev=4,t.next=7,u.validateFields();case 7:if(l!==$a.VoteFor){t.next=12;break}return t.next=10,h.proposalCastVote(!0,o.value);case 10:t.next=25;break;case 12:if(l!==$a.VoteAgainst){t.next=17;break}return t.next=15,h.proposalCastVote(!1,o.value);case 15:t.next=25;break;case 17:if(l!==$a.VoteChange){t.next=22;break}return t.next=20,h.proposalCastVote(!0===n.changeOption,o.value);case 20:t.next=25;break;case 22:if(l!==$a.VoteCancel){t.next=25;break}return t.next=25,h.proposalCancelVote(o.value);case 25:null===(r=e.onCancel)||void 0===r||r.call(e),t.next=30;break;case 28:t.prev=28,t.t0=t.catch(4);case 30:v({submitting:!1});case 31:case"end":return t.stop()}}),t,null,[[4,28]])})))).apply(this,arguments)}return r.useEffect((function(){var e;l===$a.VoteChange&&u.setFieldsValue({changeOption:null===(e=h.receipt)||void 0===e?void 0:e.support})}),[l]),(0,p.jsx)(Fe.Z,(0,i.Z)((0,i.Z)({className:Qa,width:560,title:(0,p.jsxs)(p.Fragment,{children:[l===$a.VoteFor&&"Confirm your vote",l===$a.VoteAgainst&&"Confirm your vote",l===$a.VoteChange&&"Change your vote",l===$a.VoteCancel&&"Cancel your vote"]})},c),{},{children:(0,p.jsxs)(Ut,{form:u,initialValues:ei,validateTrigger:["onSubmit","onChange"],onFinish:function(e){return j.apply(this,arguments)},children:[(0,p.jsxs)(g.Z,{flow:"row",gap:16,className:Ha,children:[(0,p.jsxs)(g.Z,{flow:"col",gap:8,align:"center",children:[(0,p.jsx)(_e.x,{type:"h2",weight:"bold",color:"primary",children:(0,k.Ib)(h.votingPower,2)}),(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"secondary",children:"Votes"})]}),(l===$a.VoteFor||l===$a.VoteAgainst)&&(0,p.jsxs)(g.Z,{flow:"row",gap:8,children:[(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"You are about to vote on proposal"}),(0,p.jsxs)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:["\u201c",null===(t=h.proposal)||void 0===t?void 0:t.title,"\u201d"]}),(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"Are you sure you want to continue? You can change your vote later."})]}),l===$a.VoteChange&&(0,p.jsxs)(g.Z,{flow:"row",gap:8,children:[(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"You are about to change your vote on proposal"}),(0,p.jsxs)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:["\u201c",null===(n=h.proposal)||void 0===n?void 0:n.title,"\u201d"]}),(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"Are you sure you want to continue? You can change your vote again later."})]}),l===$a.VoteCancel&&(0,p.jsxs)(g.Z,{flow:"row",gap:8,children:[(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"You are about to cancel your vote on proposal"}),(0,p.jsxs)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:["\u201c",null===(a=h.proposal)||void 0===a?void 0:a.title,"\u201d"]}),(0,p.jsx)(_e.x,{type:"p2",color:"secondary",children:"Are you sure you want to continue? You can change your vote again later."})]})]}),(0,p.jsx)(ye,{}),(0,p.jsxs)(g.Z,{flow:"row",gap:32,className:Ha,children:[l===$a.VoteChange&&(0,p.jsx)(Ut.Item,{name:"changeOption",label:"Vote",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(Bt.default.Group,{className:Ka,disabled:f.submitting,children:(0,p.jsxs)(g.Z,{gap:16,colsTemplate:"1fr 1fr",children:[(0,p.jsx)(qt,{label:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"For"}),value:!0}),(0,p.jsx)(qt,{label:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Against"}),value:!1})]})})}),(0,p.jsx)(Ut.Item,{name:"gasPrice",label:"Gas Fee (Gwei)",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(zt,{disabled:f.submitting})}),(0,p.jsx)(Ut.Item,{shouldUpdate:!0,children:function(e){var t,n=(0,e.getFieldsValue)().changeOption,o=!1;l===$a.VoteChange&&((null===(t=h.receipt)||void 0===t?void 0:t.support)===n&&(o=!0));return(0,p.jsxs)(ge.Z,{htmlType:"submit",type:"primary",loading:f.submitting,disabled:o,className:Xa,children:[l===$a.VoteFor&&"Vote for proposal",l===$a.VoteAgainst&&"Vote against proposal",l===$a.VoteCancel&&"Cancel vote",l===$a.VoteChange&&!0===n&&"Vote for proposal",l===$a.VoteChange&&!1===n&&"Vote against proposal"]})}})]})]})}))},oi={showVotersModal:!1,showVoteModal:!1,voteState:$a.None},ri=function(){var e,t,n,a,s,l,c,d,u=(0,U.Os)(),h=qr(),m=r.useState(oi),x=(0,o.Z)(m,2),f=x[0],v=x[1],j=null===(e=h.votingPower)||void 0===e?void 0:e.isGreaterThan(0);return(null===(t=h.proposal)||void 0===t?void 0:t.state)===E.WARMUP?(0,p.jsxs)("div",{className:"card",children:[(0,p.jsx)("div",{className:"card-header",children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Votes"})}),(0,p.jsx)("div",{className:"p-24",children:(0,p.jsx)(en,{type:"info",message:"Voting on this proposal will start after the Warm-Up period ends."})})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"card",children:[(0,p.jsxs)("div",{className:"card-header flex justify-space-between",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Votes"}),(0,p.jsx)(ge.Z,{type:"link",onClick:function(){v((function(e){return(0,i.Z)((0,i.Z)({},e),{},{showVotersModal:!0})}))},children:"View voters"})]}),(0,p.jsxs)(g.Z,{className:"card-row p-24",flow:"row",gap:32,children:[(0,p.jsxs)(g.Z,{flow:"row",gap:16,children:[(0,p.jsxs)(g.Z,{flow:"col",justify:"space-between",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"For"}),(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:null===(n=h.proposal)||void 0===n?void 0:n.forVotes.toFormat(2)}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["(",null===(a=h.forRate)||void 0===a?void 0:a.toFixed(2),"%)"]})]})]}),(0,p.jsx)(ot,{percent:h.forRate,strokeColor:"var(--theme-green-color)",trailColor:"rgba(var(--theme-green-color-rgb), .16)"})]}),(0,p.jsxs)(g.Z,{flow:"row",gap:16,children:[(0,p.jsxs)(g.Z,{flow:"col",justify:"space-between",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Against"}),(0,p.jsxs)(g.Z,{flow:"col",gap:8,children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:null===(s=h.proposal)||void 0===s?void 0:s.againstVotes.toFormat(2)}),(0,p.jsxs)(_e.x,{type:"p1",color:"secondary",children:["(",null===(l=h.againstRate)||void 0===l?void 0:l.toFixed(2),"%)"]})]})]}),(0,p.jsx)(ot,{percent:h.againstRate,strokeColor:"var(--theme-red-color)",trailColor:"rgba(var(--theme-red-color-rgb), .16)"})]})]}),u.isActive&&(0,p.jsxs)(g.Z,{className:"card-row p-24",flow:"row",gap:24,children:[(0,p.jsxs)(g.Z,{flow:"row",gap:8,children:[(0,p.jsx)(_e.x,{type:"p1",color:"secondary",children:"Your voting power for this proposal"}),(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:(0,k.Ib)(h.votingPower,2)})]}),(0,p.jsx)(g.Z,{flow:"row",gap:24,children:null!==(c=h.receipt)&&void 0!==c&&c.hasVoted?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(en,{message:"You already voted ".concat(null!==(d=h.receipt)&&void 0!==d&&d.support?"FOR":"AGAINST"," the proposal")}),(0,p.jsxs)(g.Z,{flow:"col",gap:24,colsTemplate:"1fr 1fr",children:[(0,p.jsx)(ge.Z,{type:"primary",onClick:function(){v((function(e){return(0,i.Z)((0,i.Z)({},e),{},{showVoteModal:!0,voteState:$a.VoteChange})}))},children:"Change vote"}),(0,p.jsx)(ge.Z,{type:"default",onClick:function(){v((function(e){return(0,i.Z)((0,i.Z)({},e),{},{showVoteModal:!0,voteState:$a.VoteCancel})}))},children:"Cancel vote"})]})]}):(0,p.jsxs)(g.Z,{gap:24,colsTemplate:"1fr 1fr",children:[(0,p.jsx)(ge.Z,{type:"primary",onClick:function(){v((function(e){return(0,i.Z)((0,i.Z)({},e),{},{showVoteModal:!0,voteState:$a.VoteFor})}))},disabled:!j,children:"Vote for"}),(0,p.jsx)(ge.Z,{type:"primary",onClick:function(){v((function(e){return(0,i.Z)((0,i.Z)({},e),{},{showVoteModal:!0,voteState:$a.VoteAgainst})}))},disabled:!j,children:"Vote against"})]})})]})]}),f.showVotersModal&&(0,p.jsx)(Ya,{onCancel:function(){v((function(e){return(0,i.Z)((0,i.Z)({},e),{},{showVotersModal:!1})}))}}),f.showVoteModal&&(0,p.jsx)(ni,{voteState:f.voteState,onCancel:function(){v((function(e){return(0,i.Z)((0,i.Z)({},e),{},{showVoteModal:!1,voteState:$a.None})}))}})]})},ai="s_component__NHhHS",ii="s_row__GEA1u",si="s_actionBtn__-ASno",li={gasPrice:void 0},ci={submitting:!1},di=function(e){var t=Object.assign({},((0,Dr.Z)(e),e)),n=St.Z.useForm(),r=(0,o.Z)(n,1)[0],a=qr(),s=(0,L.Z)(ci),l=(0,o.Z)(s,2),c=l[0],d=l[1];function u(){return(u=(0,q.Z)((0,M.Z)().mark((function t(n){var o,i;return(0,M.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=n.gasPrice,a.proposal&&o){t.next=3;break}return t.abrupt("return");case 3:return d({submitting:!0}),t.prev=4,t.next=7,r.validateFields();case 7:return t.next=9,a.queueProposalForExecution(o.value);case 9:null===(i=e.onCancel)||void 0===i||i.call(e),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(4);case 14:d({submitting:!1});case 15:case"end":return t.stop()}}),t,null,[[4,12]])})))).apply(this,arguments)}return(0,p.jsx)(Fe.Z,(0,i.Z)((0,i.Z)({className:ai,width:560,title:"Queue for execution"},t),{},{children:(0,p.jsxs)(Ut,{form:r,initialValues:li,validateTrigger:["onSubmit","onChange"],onFinish:function(e){return u.apply(this,arguments)},children:[(0,p.jsx)(g.Z,{flow:"row",gap:16,className:ii,children:(0,p.jsx)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:"Once a proposal is accepted, it will have to wait in the queue before it can be executed. During this time it can only be cancelled by an abrogation proposal."})}),(0,p.jsx)(ye,{}),(0,p.jsxs)(g.Z,{flow:"row",gap:32,className:ii,children:[(0,p.jsx)(Ut.Item,{name:"gasPrice",label:"Gas Fee (Gwei)",rules:[{required:!0,message:"Required"}],children:(0,p.jsx)(zt,{disabled:c.submitting})}),(0,p.jsx)(ge.Z,{htmlType:"submit",type:"primary",loading:c.submitting,className:si,children:"Queue proposal for execution"})]})]})}))},ui="s_cardsAndSidebarContainer__c-hbu",pi="s_cardsContainer__d7lnU",hi="s_sidebarContainer__YgKrj",mi={showQueueForExecution:!1,executing:!1},xi=function(){var e,t,n,r=(0,a.k6)(),s=(0,U.Os)(),l=qr(),c=null===(e=l.proposal)||void 0===e?void 0:e.state,d=(0,L.Z)(mi),u=(0,o.Z)(d,2),h=u[0],m=u[1];return(0,p.jsxs)("div",{className:"container-limit",children:[(0,p.jsx)("div",{className:"mb-32",children:(0,p.jsxs)("button",{type:"button",onClick:function(){r.push("/governance/proposals")},className:"button-text",children:[(0,p.jsx)(j.Z,{name:"arrow-back",width:16,height:16,className:"mr-8",color:"inherit"}),"Proposals"]})}),(0,p.jsxs)(g.Z,{flow:"col",gap:32,colsTemplate:"1fr 1fr",className:"mb-32",children:[(0,p.jsxs)(_e.x,{type:"h2",weight:"semibold",color:"primary",children:["PID-",null===(t=l.proposal)||void 0===t?void 0:t.proposalId,": ",null===(n=l.proposal)||void 0===n?void 0:n.title]}),(0,p.jsx)(g.Z,{flow:"col",justify:"end",children:s.account&&(0,p.jsxs)(p.Fragment,{children:[E.ACCEPTED===c&&(0,p.jsx)(ge.Z,{type:"primary",loading:h.executing,onClick:function(){return m({showQueueForExecution:!0})},children:"Queue for execution"}),E.GRACE===c&&(0,p.jsx)(ge.Z,{type:"primary",loading:h.executing,onClick:function(){m((function(e){return(0,i.Z)((0,i.Z)({},e),{},{executing:!0})})),l.executeProposal().catch(Error).then((function(){m((function(e){return(0,i.Z)((0,i.Z)({},e),{},{executing:!1})}))}))},children:"Execute proposal"})]})})]}),(0,p.jsxs)("div",{className:ui,children:[(0,p.jsxs)(g.Z,{flow:"row",gap:32,className:pi,children:[![E.WARMUP,E.ACTIVE].includes(c)&&(0,p.jsx)(za,{}),(0,p.jsx)(_a,{})]}),(0,p.jsxs)(g.Z,{flow:"row",gap:32,className:hi,children:[(0,p.jsx)(Da,{}),(E.QUEUED===c||l.isCanceled)&&(0,p.jsx)(Na,{}),[E.WARMUP,E.ACTIVE].includes(c)&&(0,p.jsx)(ri,{}),E.ACTIVE===c&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Sa,{}),(0,p.jsx)(Aa,{})]})]})]}),h.showQueueForExecution&&(0,p.jsx)(di,{onCancel:function(){return m({showQueueForExecution:!1})}})]})},fi=function(){var e=(0,a.$B)().params;return(0,p.jsx)(Gr,{proposalId:Number(e.id),children:(0,p.jsx)(xi,{})})},vi=n(47822),gi={proposals:[],total:0,page:1,pageSize:10,loading:!1,stateFilter:void 0,searchFilter:void 0},ji=r.createContext((0,A.L)("ProposalsProvider"));function wi(){return r.useContext(ji)}var bi=function(e){var t=e.stateFilter,n=e.searchFilter,a=e.children,s=I(),l=(0,L.Z)(gi),c=(0,o.Z)(l,2),d=c[0],u=c[1];return r.useEffect((function(){u({stateFilter:t,searchFilter:n,page:1})}),[t,n]),r.useEffect((function(){u({loading:!0}),s.fetchProposals(d.page,d.pageSize,d.stateFilter,d.searchFilter).then((function(e){u({loading:!1,proposals:e.data.map((function(e){var t;return(0,i.Z)((0,i.Z)({},e),{},{stateTimeLeftTs:Date.now()+1e3*(null!==(t=e.stateTimeLeft)&&void 0!==t?t:0)})})),total:e.meta.count})})).catch((function(){u({loading:!1,proposals:[]})}))}),[d.page,d.stateFilter,d.searchFilter]),(0,p.jsx)(ji.Provider,{value:(0,i.Z)((0,i.Z)({},d),{},{changeStateFilter:function(e){u({stateFilter:e})},changeSearchFilter:function(e){u({searchFilter:e})},changePage:function(e){u({page:e})}}),children:a})},yi=n(16868),Zi=function(e){var t=e.state,n=(e.className,"grey");switch(t){case"ACCEPTED":case"EXECUTED":n="green";break;case"WARMUP":case"ACTIVE":case"QUEUED":case"GRACE":n="blue";break;case"EXPIRED":case"FAILED":case"CANCELED":case"ABROGATED":n="red"}return(0,p.jsx)(yi.C,{color:n,size:"large",children:D.get(t)})},ki=[{title:"Proposal",width:"70%",render:function(e,t){return(0,p.jsxs)(g.Z,{flow:"row",gap:8,children:[(0,p.jsx)(ft.rU,{to:"proposals/".concat(t.proposalId),children:(0,p.jsxs)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:["PID-",t.proposalId,": ",t.title]})}),(0,p.jsxs)(g.Z,{flow:"col",gap:16,align:"center",children:[(0,p.jsx)(Zi,{state:t.state}),(0,p.jsx)(Ve,{end:t.stateTimeLeftTs,delay:1e3,children:function(e){return(0,p.jsx)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:e>0?(0,Ie.Ud)(0,t.stateTimeLeftTs):""})}})]})]})}},{title:"Votes",width:"30%",render:function(e,t){var n=t.forVotes.plus(t.againstVotes),o=y().ZERO,r=y().ZERO;return n.gt(y().ZERO)&&(o=t.forVotes.multipliedBy(100).div(n),r=t.againstVotes.multipliedBy(100).div(n)),(0,p.jsxs)(g.Z,{flow:"row",gap:8,children:[(0,p.jsxs)(g.Z,{gap:24,colsTemplate:"minmax(0, 196px) 65px",children:[(0,p.jsx)(ot,{percent:o.toNumber(),strokeColor:"var(--theme-green-color)",trailColor:"rgba(var(--theme-green-color-rgb), .16)"}),(0,p.jsxs)(_e.x,{type:"p2",weight:"semibold",color:"secondary",align:"right",children:[o.toFormat(2),"%"]})]}),(0,p.jsxs)(g.Z,{gap:24,colsTemplate:"minmax(0, 196px) 65px",children:[(0,p.jsx)(ot,{percent:r.toNumber(),strokeColor:"var(--theme-red-color)",trailColor:"rgba(var(--theme-red-color-rgb), .16)"}),(0,p.jsxs)(_e.x,{type:"p2",weight:"semibold",color:"secondary",align:"right",children:[r.toFormat(2),"%"]})]})]})}}],Ni=function(){var e=wi();return(0,p.jsx)(lt,{columns:ki,dataSource:e.proposals,rowKey:"proposalId",loading:e.loading,locale:{emptyText:"No proposals"},pagination:{total:e.total,current:e.page,pageSize:e.pageSize,position:["bottomRight"],showTotal:function(e,t){var n=(0,o.Z)(t,2),r=n[0],a=n[1];return(0,p.jsxs)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:["Showing ",r," to ",a," out of ",e," proposals"]})},onChange:function(t){e.changePage(t)}}})},Ai="s_tabs__xzny9",Ci="s_search__OzayU",_i={hasActiveProposal:void 0,showWhyReason:!1},Si=function(){var e=(0,a.k6)(),t=(0,U.Os)(),n=xe(),i=wi(),s=(0,L.Z)(_i),l=(0,o.Z)(s,2),c=l[0],d=l[1];var u=(0,vi.Z)((function(e){i.changeSearchFilter(e.target.value)}),400);r.useEffect((function(){n.actions.hasActiveProposal().then((function(e){d({hasActiveProposal:e})}))}),[t.account]);var h=void 0!==c.hasActiveProposal&&void 0!==n.actions.hasThreshold(),m=!1===c.hasActiveProposal&&!0===n.actions.hasThreshold();return(0,p.jsxs)(g.Z,{flow:"row",gap:32,children:[(0,p.jsxs)(g.Z,{flow:"col",align:"center",justify:"space-between",children:[(0,p.jsx)(_e.x,{type:"h1",weight:"bold",color:"primary",children:"Proposals"}),t.isActive&&(0,p.jsxs)(g.Z,{flow:"row",gap:8,align:"end",justify:"end",children:[(0,p.jsx)(ge.Z,{type:"primary",disabled:!m,onClick:function(){return e.push("proposals/create")},children:"Create proposal"}),h&&!m&&(0,p.jsxs)(g.Z,{flow:"col",gap:8,align:"center",children:[(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:"You are not able to create a proposal."}),(0,p.jsx)(sr.Z,{title:"Why you can\u2019t create a proposal",placement:"bottomLeft",overlayStyle:{width:520},content:(0,p.jsxs)(g.Z,{flow:"row",gap:8,children:[(0,p.jsx)(_e.x,{type:"p2",weight:"semibold",children:"There are 2 possible reasons for why you can\u2019t create a proposal:"}),(0,p.jsxs)("ul",{children:[(0,p.jsx)("li",{children:(0,p.jsx)(_e.x,{type:"p2",weight:"semibold",children:"You already are the creator of an ongoing proposal"})}),(0,p.jsx)("li",{children:(0,p.jsxs)(_e.x,{type:"p2",weight:"semibold",children:["You don\u2019t have enough voting power to create a proposal. The creator of a proposal needs to have a voting power of at least ",n.minThreshold,"% of the amount of $SWINGBY staked in the DAO."]})})]})]}),visible:c.showWhyReason,onVisibleChange:function(e){return d({showWhyReason:e})},children:(0,p.jsx)(ge.Z,{type:"link",children:"See why"})})]})]})]}),(0,p.jsxs)("div",{className:"card",children:[(0,p.jsxs)("div",{className:"card-header flex justify-space-between",style:{padding:0},children:[(0,p.jsxs)(f,{className:Ai,simple:!0,activeKey:i.stateFilter,onChange:function(e){i.changeStateFilter(e)},children:[(0,p.jsx)(f.Tab,{tab:"All proposals"},"all"),(0,p.jsx)(f.Tab,{tab:"Active"},"active"),(0,p.jsx)(f.Tab,{tab:"Executed"},"executed"),(0,p.jsx)(f.Tab,{tab:"Failed"},"failed")]}),(0,p.jsx)(_n,{className:Ci,prefix:(0,p.jsx)(j.Z,{name:"search-outlined",width:16,height:16}),placeholder:"Search proposal",onChange:function(e){return u(e)}})]}),(0,p.jsx)(Ni,{})]})]})},Ti=function(){var e=(0,a.k6)(),t=xe();return void 0===t.isActive?(0,p.jsx)(Ot.default,{}):t.isActive?(0,p.jsx)(bi,{children:(0,p.jsx)(Si,{})}):(0,p.jsxs)(g.Z,{flow:"row",gap:24,align:"start",children:[(0,p.jsxs)("button",{type:"button",onClick:function(){e.push("/governance/overview")},className:"button-text",children:[(0,p.jsx)(j.Z,{name:"arrow-back",width:16,height:16,className:"mr-8",color:"inherit"}),"Overview"]}),(0,p.jsx)(rt,{className:"full-width"})]})},Pi=n(93433),Ei=n(76333),Vi="s_pagination__HqLWs",Di="s_page__u9T7h",Fi="s_separator__11jCE",Ii="s_prev__9y-4m",Ri="s_next__UrPox",Ui="s_active__8ki4v";var Bi=function(e){var t=e.className,n=e.total,o=e.current,a=e.pageSize,i=e.onChange,s=Math.ceil(n/a),l=(0,r.useMemo)((function(){return function(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=e-o,a=e+o+1,i=[],s=[];if(t<2)return[1];i.push(1);for(var l=e-o;l<=e+o;l++)l>=r&&l<a&&l<t&&l>1&&i.push(l);return i.push(t),i.forEach((function(e){n&&(e-n===2?s.push(n+1):e-n!==1&&s.push(null)),s.push(e),n=e})),s}(o,s)}),[o,s]);return s<2?null:(0,p.jsxs)("div",{className:d()(Vi,t),children:[(0,p.jsx)("button",{className:d()(Di,Ii),type:"button",onClick:function(){return i(o-1)},disabled:o<=1,children:(0,p.jsx)(Pt.J,{name:"chevron",rotate:180,size:24})}),l.map((function(e,t){return e?(0,p.jsx)("button",{onClick:function(){return i(e)},className:d()(Di,(0,xt.Z)({},Ui,e===o)),type:"button",disabled:e===o,children:e},t):(0,p.jsx)("div",{className:Fi,children:"..."},t)})),(0,p.jsx)("button",{className:d()(Di,Ri),type:"button",onClick:function(){return i(o+1)},disabled:o>=s,children:(0,p.jsx)(Pt.J,{name:"chevron",size:24})})]})},Oi="s_tableContainer__RCW7M",Li="s_loading__ITAA7",Mi="s_table__gMEXW",qi="s_clickable__+yr+H",Gi="s_arrowIcon__hbtao",Wi="s_tableFooter__WFhYh",Yi="s_spinner__ZwiYo",zi=function(e){var t,n=e.columns,o=e.data,r=e.loading,s=e.rowKey,l=e.variation,c=void 0===l?"standard":l,u=e.link,h=(0,a.k6)();return(0,p.jsxs)("div",{className:d()("table-container",Oi,(0,xt.Z)({},Li,r)),children:[(0,p.jsxs)("table",{className:d()(Mi,(t={table:"standard"===c,"table-separated":"separated"===c},(0,xt.Z)(t,qi,u),(0,xt.Z)(t,Li,r),t)),children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[n.map((function(e,t){var n=e.heading,o=e.align;return(0,p.jsx)("th",{className:o?"text-".concat(o):void 0,children:n},t)})),u?(0,p.jsx)("th",{}):null]})}),(0,p.jsx)("tbody",{children:o.map((function(e,t){var o;return(0,p.jsxs)("tr",{onClick:u?function(){return h.push(u(e))}:void 0,children:[n.map((function(t,n){var o=t.render,r=t.align;return(0,p.jsx)("td",{className:r?"text-".concat(r):void 0,children:(0,p.jsx)(o,(0,i.Z)({},e))},n)})),u?(0,p.jsx)("td",{children:(0,p.jsx)(Pt.J,{name:"arrow",color:"red",className:Gi})}):null]},null!==(o=null===s||void 0===s?void 0:s(e))&&void 0!==o?o:t)}))})]}),r&&(0,p.jsx)(wn,{className:Yi,style:{width:40,height:40,position:"absolute",marginTop:-20,marginLeft:-20}})]})},Qi=function(e){e.children;var t=e.text,n=e.total,o=e.current,r=e.pageSize,a=e.onChange,i=function(e){var t,n=e.text,o=e.total,r=e.current,a=e.pageSize;if(n){var i=o?(r-1)*a+1:0,s=r*a>o?o:r*a;"function"===typeof n&&(t=n({total:o,from:i,to:s})),!0===n&&(t=(0,p.jsxs)(p.Fragment,{children:["Showing ",i," to ",s," out of ",o," entries"]}))}return t}({text:t,total:n,current:o,pageSize:r});return(0,p.jsxs)("div",{className:d()(Wi,"p-24"),children:[i?(0,p.jsx)(_e.x,{type:"p2",weight:"semibold",color:"secondary",children:i}):null,(0,p.jsx)(Bi,{total:n,current:o,pageSize:r,onChange:a})]})};var Hi=function(e){var t=e.filters,n=e.value,a=e.onChange,s=e.className,l=Tt.Z.useForm(),c=(0,o.Z)(l,1)[0],u=(0,r.useState)(!1),h=(0,o.Z)(u,2),m=h[0],x=h[1],f=(0,r.useMemo)((function(){return t.reduce((function(e,t){return(0,i.Z)((0,i.Z)({},e),{},(0,xt.Z)({},t.name,t.defaultValue))}),{})}),[t]),v=(0,r.useMemo)((function(){var e=0;return n&&t.forEach((function(t){n[t.name]!==t.defaultValue&&e++})),e}),[t,n]);(0,r.useEffect)((function(){n&&c.setFieldsValue(n)}),[n]);var g=(0,p.jsxs)(Ut,{form:c,initialValues:f,validateTrigger:["onSubmit"],onFinish:function(e){x(!1),a(e)},children:[t.map((function(e){return(0,p.jsx)(Ut.Item,{name:e.name,label:e.label,className:"mb-32",children:e.itemRender()},e.name)})),(0,p.jsxs)("div",{className:"grid flow-col align-center justify-space-between",children:[(0,p.jsx)("button",{type:"button",onClick:function(){return c.resetFields()},className:"button-text",children:"Reset filters"}),(0,p.jsx)("button",{type:"submit",className:"button-primary",children:"Apply filters"})]})]});return(0,p.jsx)(sr.Z,{title:"Filters",overlayStyle:{width:348},content:g,visible:m,onVisibleChange:x,placement:"bottomRight",children:(0,p.jsxs)("button",{type:"button",className:d()("button-ghost-monochrome pv-16",s),children:[(0,p.jsx)(Pt.J,{name:"filter",className:"mr-8"}),(0,p.jsx)("span",{className:"mr-8",children:"Filters"}),(0,p.jsx)(yi.z,{children:v})]})})},Ki=(n(1905),n(15688));function Xi(e){var t=(null!==e&&void 0!==e?e:{}).listeners,n=void 0===t||t,a=(0,U.Os)(),i=a.account,s=a.provider,l=(0,ir.$6)().activeProvider,c=(0,Pe.O)(),d=(0,o.Z)(c,2),u=d[0],h=d[1],m=(0,r.useRef)(l),x=(0,r.useRef)(s),f=(0,r.useRef)(i),v=(0,r.useRef)(new Map),g=(0,r.useCallback)((function(e,t,n){var o,r=t();return r.setCallProvider(m.current),r.setProvider(x.current),r.setAccount(f.current),v.current.set(e,{address:e,factory:t,options:n,instance:r}),null===n||void 0===n||null===(o=n.afterInit)||void 0===o||o.call(n,r),u(),r}),[l,i,u]),j=(0,vi.Z)((function(){v.current.forEach((function(e){var t,n;null===(t=e.options)||void 0===t||null===(n=t.onDestroy)||void 0===n||n.call(t,e.instance),g(e.address,(function(){return e.instance}),e.options)}))}),250);m.current!==l&&(m.current=l,j()),x.current!==s&&(x.current=s,j()),f.current!==i&&(f.current=i,j());var w=(0,r.useCallback)((function(e,t,n){return v.current.has(e)?v.current.get(e).instance:g(e,t,n)}),[g]);return{getOrCreateContract:w,getContract:(0,r.useCallback)((function(e){if(v.current.has(e))return v.current.get(e).instance}),[g]),Listeners:(0,r.useMemo)((function(){return n?(0,p.jsx)(p.Fragment,{children:Array.from(v.current).map((function(e){var t=(0,o.Z)(e,2),n=t[0],r=t[1];return(0,p.jsx)(Ki.Z,{contract:r.instance},n)}))}):null}),[h,n])}}var Ji=[{heading:"Token Name",render:function(e){var t,n,o,r;return(0,p.jsxs)("div",{className:"flex flow-col col-gap-12 align-center",children:[(0,p.jsx)(w.T,{name:null===(t=e.token)||void 0===t?void 0:t.icon,className:"mr-16",size:32}),(0,p.jsxs)("div",{className:"flex flow-row row-gap-4",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:null!==(n=e.tokenSymbol)&&void 0!==n?n:"-"}),(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:null!==(o=null===(r=e.token)||void 0===r?void 0:r.name)&&void 0!==o?o:"-"})]})]})}},{heading:"Transaction Hash",render:function(e){return(0,p.jsx)(v.fT,{address:e.transactionHash,children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"blue",children:(0,k.eI)(e.transactionHash)})})}},{heading:"Date",render:function(e){return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",className:"mb-4",children:(0,Ta.Z)(1e3*e.blockTimestamp,"MM.dd.yyyy")}),(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:(0,Ta.Z)(1e3*e.blockTimestamp,"HH:mm")})]})}},{heading:(0,p.jsx)("div",{className:"text-right",children:"Amount"}),render:function(e){var t,n;return(0,p.jsx)(Ce.Z,{placement:"bottomRight",title:(0,k.nx)(e.amount,{decimals:e.tokenDecimals,tokenName:e.tokenSymbol}),children:(0,p.jsxs)("div",{className:"text-right",children:[(0,p.jsxs)(_e.x,{type:"p1",weight:"semibold",color:"IN"===e.transactionDirection?"green":"red",children:["IN"===e.transactionDirection?"+":"-"," ",null!==(t=(0,k.nx)(e.amount))&&void 0!==t?t:"-"]}),(0,p.jsx)(_e.x,{type:"small",weight:"semibold",children:null!==(n=(0,k.ZP)(e.amountUSD))&&void 0!==n?n:"-"})]})})}},{heading:"From",render:function(e){return(0,p.jsx)(v.S,{address:"IN"===e.transactionDirection?e.counterpartyAddress:e.accountAddress,children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"blue",children:"IN"===e.transactionDirection?e.counterpartyLabel||(0,k.eI)(e.counterpartyAddress):e.accountLabel||(0,k.eI)(e.accountAddress)})})}},{heading:"To",render:function(e){return(0,p.jsx)(v.S,{address:"OUT"===e.transactionDirection?e.counterpartyAddress:e.accountAddress,children:(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"blue",children:"OUT"===e.transactionDirection?e.counterpartyLabel||(0,k.eI)(e.counterpartyAddress):e.accountLabel||(0,k.eI)(e.accountAddress)})})}}],$i=function(){var e,t,n,a=(0,N.z)(),s=(0,Pe.O)(),l=(0,o.Z)(s,2),c=l[0],d=l[1],u=(0,De.rU)(),h=u.getAmountInUSD,m=u.getToken,x=Xi(),f=x.getOrCreateContract,v=x.getContract,g=(0,r.useState)(1),j=(0,o.Z)(g,2),b=j[0],Z=j[1],A=(0,r.useState)("all"),_=(0,o.Z)(A,2),S=_[0],T=_[1],P=(0,r.useState)("all"),E=(0,o.Z)(P,2),V=E[0],D=E[1],F=(0,r.useMemo)((function(){return{token:S,direction:V}}),[S,V]),I=function(){var e,t=(0,N.z)(),n=new URL("/api/governance/treasury/tokens?address=".concat(null===(e=t.contracts.dao)||void 0===e?void 0:e.governance),t.api.baseUrl);return(0,C.ib)(n,{transform:function(e){return e.data}})}(),R=I.data,U=void 0===R?[]:R,B=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,r=(0,N.z)(),a=(0,C.g2)({address:null===(e=r.contracts.dao)||void 0===e?void 0:e.governance,limit:10,page:t,tokenAddress:n,transactionDirection:o}),s=new URL("/api/governance/treasury/transactions?".concat(a),r.api.baseUrl);return(0,C.ib)(s,{transform:function(e){var t=e.data,n=void 0===t?[]:t;return{meta:e.meta,data:n.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{amount:Number(e.amount)})}))}}})}(b,S,V),O=B.data,L=B.loading,M=null!==(e=null===O||void 0===O?void 0:O.data)&&void 0!==e?e:[],q=null!==(t=null===O||void 0===O?void 0:O.meta.count)&&void 0!==t?t:0,G=(0,r.useMemo)((function(){var e=(null!==U&&void 0!==U?U:[]).map((function(e){var t,n,o=m(e.symbol);if(o){var r=v(e.address),s=null===r||void 0===r||null===(t=r.getBalanceOf(null===(n=a.contracts.dao)||void 0===n?void 0:n.governance))||void 0===t?void 0:t.unscaleBy(e.decimals),l=h(s,e.symbol);return(0,i.Z)((0,i.Z)({},e),{},{balanceAmount:s,balanceAmountUSD:l,token:o})}})).filter(Boolean);return e.sort((function(e,t){return e.balanceAmountUSD&&t.balanceAmountUSD?t.balanceAmountUSD.minus(e.balanceAmountUSD).toNumber():0})),e}),[h,v,U,d]),W=(0,r.useMemo)((function(){return y().sumEach(G,(function(e){var t;return null!==(t=e.balanceAmountUSD)&&void 0!==t?t:y().ZERO}))}),[G]),Y=(0,r.useMemo)((function(){var e;return null!==(e=null===M||void 0===M?void 0:M.map((function(e){var t=m(e.tokenSymbol),n=y().from(e.amount),o=h(n,e.tokenSymbol);return(0,i.Z)((0,i.Z)({},e),{},{token:t,amount:n,amountUSD:o})})))&&void 0!==e?e:[]}),[M]),z=(0,r.useMemo)((function(){return[{name:"token",label:"Token address",defaultValue:"all",itemRender:function(){var e=[{value:"all",label:"All tokens"}].concat((0,Pi.Z)(G.map((function(e){var t,n;return{value:e.address,label:null!==(t=null===(n=e.token)||void 0===n?void 0:n.name)&&void 0!==t?t:e.symbol}}))));return(0,p.jsx)(tr,{options:e,className:"full-width"})}},{name:"direction",label:"Transaction direction",defaultValue:"all",itemRender:function(){return(0,p.jsx)(tr,{options:[{value:"all",label:"All pool transactions"},{value:"in",label:"In"},{value:"out",label:"Out"}],className:"full-width"})}}]}),[G]);return(0,r.useEffect)((function(){null===U||void 0===U||U.forEach((function(e){f(e.address,(function(){return new Ei.Z([],e.address)}),{afterInit:function(e){var t;e.on(Q.ZP.UPDATE_DATA,c),e.loadCommon().catch(Error),e.loadBalance(null===(t=a.contracts.dao)||void 0===t?void 0:t.governance).catch(Error)}})}))}),[U]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(_e.x,{type:"h2",weight:"bold",color:"primary",className:"mb-4",children:null!==(n=(0,k.ZP)(W))&&void 0!==n?n:"-"}),(0,p.jsx)(_e.x,{type:"p2",weight:"semibold",color:"secondary",className:"mb-32",children:"Total holdings balance"}),(0,p.jsx)("div",{className:"grid gap-16 mb-32",style:{gridTemplateColumns:"repeat(3, 1fr)"},children:G.map((function(e){var t,n,o,r,a,i;return(0,p.jsxs)("div",{className:"card flex flow-col col-gap-12 align-center p-24",children:[(0,p.jsx)(w.T,{name:null===(t=e.token)||void 0===t?void 0:t.icon,className:"mr-8",size:32}),(0,p.jsxs)("div",{className:"flex flow-row row-gap-4",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:null!==(n=e.symbol)&&void 0!==n?n:"-"}),(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:null!==(o=null===(r=e.token)||void 0===r?void 0:r.name)&&void 0!==o?o:"-"})]}),(0,p.jsxs)("div",{className:"flex flow-row row-gap-6 align-end ml-auto",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:null!==(a=(0,k.nx)(e.balanceAmount))&&void 0!==a?a:"-"}),(0,p.jsx)(_e.x,{type:"small",weight:"semibold",color:"secondary",children:null!==(i=(0,k.ZP)(e.balanceAmountUSD))&&void 0!==i?i:"-"})]})]},e.address)}))}),(0,p.jsxs)("div",{className:"card",children:[(0,p.jsxs)("div",{className:"card-header flex flow-col align-center justify-space-between pv-14",children:[(0,p.jsx)(_e.x,{type:"p1",weight:"semibold",color:"primary",children:"Transaction history"}),(0,p.jsx)(Hi,{filters:z,value:F,onChange:function(e){Z(1),T(e.token),D(e.direction)}})]}),(0,p.jsx)(zi,{columns:Ji,data:Y,rowKey:function(e){return"".concat(e.transactionHash,"_").concat(e.tokenSymbol,"_").concat(e.counterpartyAddress,"_").concat(e.amount)},loading:L,variation:"separated"}),(0,p.jsx)(Qi,{total:q,current:b,pageSize:10,onChange:Z,text:function(e){var t=e.total,n=e.from,o=e.to;return(0,p.jsxs)(p.Fragment,{children:["Showing ",n," to ",o," out of ",t," transactions"]})}})]})]})},es=function(){var e=(0,a.$B)().params.tab,t=void 0===e?"holdings":e,n=(0,a.k6)(),i=(0,r.useState)(t),s=(0,o.Z)(i,2),l=s[0],c=s[1];return(0,r.useEffect)((function(){t!==l&&c(t)}),[t]),(0,p.jsxs)("div",{className:"container-limit",children:[(0,p.jsx)("div",{className:"card mb-32",children:(0,p.jsx)("div",{className:"card-header pv-0",children:(0,p.jsx)(At,{tabs:[{id:"holdings",children:"Holdings",onClick:function(){var e;e="holdings",n.push("/governance/treasury/".concat(e))}}],size:"small",activeKey:l,onClick:c})})}),(0,p.jsx)(a.rs,{children:(0,p.jsx)(a.AW,{path:"/governance/treasury/holdings",exact:!0,component:$i})})]})},ts="s_tabs__JLw0g",ns=function(){var e=(0,a.k6)(),t=(0,a.$B)().params.vt,n=void 0===t?"overview":t,i=(0,U.Os)(),s=r.useState(n),l=(0,o.Z)(s,2),c=l[0],d=l[1];return r.useEffect((function(){n!==c&&d(n)}),[n]),(0,p.jsxs)(g.Z,{flow:"row",children:[i.account&&(0,p.jsx)(Xe,{}),(0,p.jsxs)(f,{className:ts,activeKey:c,onChange:function(t){t&&(d(t),e.push("/governance/".concat(t)))},children:[(0,p.jsx)(f.Tab,{tab:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(j.Z,{name:"bar-charts-outlined"})," Overview"]})},"overview"),(0,p.jsx)(f.Tab,{disabled:!i.account,tab:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(j.Z,{name:"wallet-outlined"})," Portfolio"]})},"portfolio"),(0,p.jsx)(f.Tab,{tab:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(j.Z,{name:"proposal-outlined"})," Proposals"]})},"proposals"),(0,p.jsx)(f.Tab,{tab:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(j.Z,{name:"treasury-outlined"})," Treasury"]})},"treasury"),(0,p.jsx)(f.Tab,{tab:(0,p.jsx)(v.dL,{href:"https://snapshot.org/#/swingbydao.eth",style:{color:"inherit"},children:(0,p.jsxs)(g.Z,{flow:"col",gap:8,align:"center",children:[(0,p.jsx)(j.Z,{name:"chats-outlined",style:{paddingTop:"3px"}}),(0,p.jsx)("p",{style:{textDecoration:"underline"},children:"Snapshot.org"})]})})},"signal"),(0,p.jsx)(f.Tab,{tab:(0,p.jsx)(v.dL,{href:"https://github.com/SwingbyProtocol/swips/issues",style:{color:"inherit"},children:(0,p.jsxs)(g.Z,{flow:"col",gap:8,align:"center",children:[(0,p.jsx)(j.Z,{name:"forum-outlined",style:{paddingTop:"3px"}}),(0,p.jsx)("p",{style:{textDecoration:"underline"},children:"Github Issues"})]})})},"github"),(0,p.jsx)(f.Tab,{tab:(0,p.jsx)(v.dL,{href:"https://app.sushi.com/swap?inputCurrency=ETH&outputCurrency=0x8287c7b963b405b7b8d467db9d79eec40625b13a",style:{color:"inherit"},children:(0,p.jsxs)(g.Z,{flow:"col",gap:8,align:"center",children:[(0,p.jsx)(w.T,{name:"sushi",style:{paddingTop:"3px"}}),(0,p.jsx)("p",{style:{textDecoration:"underline"},children:"Sushiswap"})]})})},"sushiswap"),(0,p.jsx)(f.Tab,{tab:(0,p.jsx)(v.dL,{href:"https://app.uniswap.org/#/swap?chain=mainnet&inputCurrency=ETH&outputCurrency=0x8287C7b963b405b7B8D467DB9d79eEC40625b13A",style:{color:"inherit"},children:(0,p.jsxs)(g.Z,{flow:"col",gap:8,align:"center",children:[(0,p.jsx)(w.T,{name:"uni",style:{paddingTop:"3px"}}),(0,p.jsx)("p",{style:{textDecoration:"underline"},children:"Uniswap"})]})})},"uniswap")]}),(0,p.jsx)("div",{className:"content-container-fix content-container",children:(0,p.jsxs)(a.rs,{children:[(0,p.jsx)(a.AW,{path:"/governance/overview",exact:!0,component:mt}),(0,p.jsx)(a.l_,{exact:!0,from:"/governance/portfolio",to:"/governance/portfolio/deposit"}),(0,p.jsx)(a.AW,{path:"/governance/portfolio/:action(\\w+)",component:Uo}),(0,p.jsx)(a.l_,{exact:!0,from:"/governance/treasury",to:"/governance/treasury/holdings"}),(0,p.jsx)(a.AW,{path:"/governance/treasury/:tab(\\w+)",exact:!0,component:es}),(0,p.jsx)(a.AW,{path:"/governance/proposals/create",exact:!0,component:Br}),(0,p.jsx)(a.AW,{path:"/governance/proposals/:id(\\d+)",exact:!0,component:fi}),(0,p.jsx)(a.AW,{path:"/governance/proposals",exact:!0,component:Ti}),(0,p.jsx)(a.l_,{from:"/governance",to:"/governance/overview"})]})})]})},os=function(e){return(0,p.jsx)(R,{children:(0,p.jsx)(fe,{children:(0,p.jsx)(ns,{children:e.children})})})}}}]);